angular.module('sntApp').controller('RegionDetailChart',function ($scope, AuthService, $stateParams, $state, toaster, POPTIMEOUT, $rootScope,$uibModal,$timeout,$cookieStore) {
    var findRealTimeData,regionName=$stateParams.regionName,regionId=$stateParams.regionId,gatewayId=$stateParams.gatewayId,token=$cookieStore.get("token");$scope.chartDetailShow=!1,$scope.chartShow=!0,$scope.delay=0,$scope.minDuration=0,$scope.message="",$scope.backdrop=!1,$scope.promise=null,$scope.templateUrl="./pages/custom-loading-template.html",findRealTimeData={region_guid:regionId,gateway_id:gatewayId,type:"nows",size:"1"},$scope.sensorRealDataProm=AuthService.myHttp(token,findRealTimeData,"GET","sensor/nowData").then(function(a){$scope.sensor_first_dataTime=a.content[0].minTime,$scope.device_guid=a.content[0].table_device_guid});
    //创建传感器数据数据库
    var dataBase = openDatabase('sensorData','1.0','sensorDataTable', 1024 * 1024 * 1024);
    //创建库表
    dataBase.transaction(function (context) {
        // context.executeSql("DROP TABLE sensorDataTable");
        // context.executeSql("DROP TABLE sensorQuarterDataTable");
        // context.executeSql("DROP TABLE sensorHalfYearDataTable");
        // context.executeSql("DROP TABLE sensorYearDataTable");
        //新建总表
        var createTableSql = "CREATE TABLE IF NOT EXISTS sensorDataTable (device_guid,time,Carbon_Dioxide_original,Carbon_Dioxide,Substrate_PH_original,Substrate_PH,Substrate_Conductivity_original,Substrate_Conductivity,Substrate_Temperature_original,Substrate_Temperature" +
            ",Air_Temperature_original,Air_Temperature,Ppfd_original,Ppfd,Liquid_PH_original,Liquid_PH,Substrate_Humidity_original,Substrate_Humidity,Liquid_DOC_original,Liquid_DOC,Liquid_Conductivity_original,Liquid_Conductivity" +
            ",Air_Humidity_original,Air_Humidity,Substrate_DOC_original,Substrate_DOC,Illuminance_original,Illuminance,Lai_original,Lai)";
        //新建季度数据表
        var createQuarterTableSql = "CREATE TABLE IF NOT EXISTS sensorQuarterDataTable (device_guid,time,Carbon_Dioxide_original,Carbon_Dioxide,Substrate_PH_original,Substrate_PH,Substrate_Conductivity_original,Substrate_Conductivity,Substrate_Temperature_original,Substrate_Temperature" +
            ",Air_Temperature_original,Air_Temperature,Ppfd_original,Ppfd,Liquid_PH_original,Liquid_PH,Substrate_Humidity_original,Substrate_Humidity,Liquid_DOC_original,Liquid_DOC,Liquid_Conductivity_original,Liquid_Conductivity" +
            ",Air_Humidity_original,Air_Humidity,Substrate_DOC_original,Substrate_DOC,Illuminance_original,Illuminance,Lai_original,Lai)";
        //新建半年数据表
        var createHalfYearTableSql = "CREATE TABLE IF NOT EXISTS sensorHalfYearDataTable (device_guid,time,Carbon_Dioxide_original,Carbon_Dioxide,Substrate_PH_original,Substrate_PH,Substrate_Conductivity_original,Substrate_Conductivity,Substrate_Temperature_original,Substrate_Temperature" +
            ",Air_Temperature_original,Air_Temperature,Ppfd_original,Ppfd,Liquid_PH_original,Liquid_PH,Substrate_Humidity_original,Substrate_Humidity,Liquid_DOC_original,Liquid_DOC,Liquid_Conductivity_original,Liquid_Conductivity" +
            ",Air_Humidity_original,Air_Humidity,Substrate_DOC_original,Substrate_DOC,Illuminance_original,Illuminance,Lai_original,Lai)";
        //新建年度数据表
        var createYearTableSql = "CREATE TABLE IF NOT EXISTS sensorYearDataTable (device_guid,time,Carbon_Dioxide_original,Carbon_Dioxide,Substrate_PH_original,Substrate_PH,Substrate_Conductivity_original,Substrate_Conductivity,Substrate_Temperature_original,Substrate_Temperature" +
            ",Air_Temperature_original,Air_Temperature,Ppfd_original,Ppfd,Liquid_PH_original,Liquid_PH,Substrate_Humidity_original,Substrate_Humidity,Liquid_DOC_original,Liquid_DOC,Liquid_Conductivity_original,Liquid_Conductivity" +
            ",Air_Humidity_original,Air_Humidity,Substrate_DOC_original,Substrate_DOC,Illuminance_original,Illuminance,Lai_original,Lai)";
        context.executeSql(createTableSql);
        context.executeSql(createQuarterTableSql);
        context.executeSql(createHalfYearTableSql);
        context.executeSql(createYearTableSql);
    })

    function DateDiff(a,b){var c,d,e,f;return c=a.split("-"),d=new Date(c[1]+"-"+c[2]+"-"+c[0]),c=b.split("-"),e=new Date(c[1]+"-"+c[2]+"-"+c[0]),f=parseInt(Math.abs(d-e)/1e3/60/60/24)}function getNewDay(a,b){var c,d,e,f,g,h;return a=a.split("-"),c=new Date(a[1]+"-"+a[2]+"-"+a[0]),d=Math.abs(c)+1e3*60*60*24*b,e=new Date(d),f=e.getFullYear(),g=e.getMonth()+1,10>g&&(g="0"+g),h=e.getDate(),10>h&&(h="0"+h),f+"-"+g+"-"+h}$scope.format=function(a,b){var c=new Date(a),d=function(a){return(10>a?"0":"")+a};return b.replace(/yyyy|MM|dd|HH|mm|ss/g,function(a){switch(a){case"yyyy":return d(c.getUTCFullYear());break;case"MM":return d(c.getUTCMonth()+1);break;case"mm":return d(c.getUTCMinutes());break;case"dd":return d(c.getUTCDate());break;case"HH":return d(c.getUTCHours());break;case"ss":return d(c.getUTCSeconds())}})},Date.prototype.Format=function(a){var c,b={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds()};/(y+)/.test(a)&&(a=a.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(c in b)new RegExp("("+c+")").test(a)&&(a=a.replace(RegExp.$1,1==RegExp.$1.length?b[c]:("00"+b[c]).substr((""+b[c]).length)));return a};

    //传感器第一条数据转换成本地时间
    $scope.sensor_first_dataTime = new Date($scope.sensor_first_dataTime).getTime();
    $scope.sensor_first_dataTime -= new Date().getTimezoneOffset() * 60 * 1000;
    $scope.sensor_first_dataTime = new Date($scope.sensor_first_dataTime).Format('yyyy-MM-dd hh:mm:ss');
    //统计图部分
    $scope.default_endTime = new Date(new Date().getTime() - 10*60*1000);
    $scope.default_startTime = new Date($scope.default_endTime.getTime() - 60*60*1000);
    var local_default_end_time = $scope.default_endTime.Format('yyyy-MM-dd hh:mm:ss');
    var UTC_startTime = $scope.format($scope.default_startTime.toUTCString(), 'yyyy-MM-dd HH:mm:ss');
    var UTC_endTime = $scope.format($scope.default_endTime.toUTCString(), 'yyyy-MM-dd HH:mm:ss');
    var data = {gateway_id: gatewayId, region_guid: regionId, start_time: encodeURI(UTC_startTime), end_time: encodeURI(UTC_endTime), type: "history", size: ''};
    $scope.my = {};$scope.findStandard=[{name:"Hour",timeDiff:"1"},{name:"Day",timeDiff:"24"},{name:"Week",timeDiff:"168"},{name:"Month",timeDiff:"720"},{name:"Quarter",timeDiff:"2160"},{name:"HalfYear",timeDiff:"4320"},{name:"Year",timeDiff:"8640"}];$scope.my.name = $scope.findStandard[0];$scope.my.standard = $scope.findStandard[0].name;$scope.my.timeDiff = $scope.findStandard[0].timeDiff;
    //默认显示的时间段(最近一小时)
    $scope.sensorDataProm=AuthService.myHttp(token,data,"GET","sensor").then(function(a){var b,c,d,e;if("0"==a.code&&a.content.time&&a.content.data){for(b=[],c=[],d=0;d<a.content.time.length;d++)c[d]=new Date(a.content.time[d]),b[d]=c[d].getTime(),b[d]-=1e3*60*(new Date).getTimezoneOffset(),b[d]=new Date(b[d]).Format("yyyy-MM-dd hh:mm:ss");e=a.content,new Highcharts.Chart({chart:{renderTo:"container",backgroundColor:"rgba(0,0,0,0)"},colors:["#000000","#CE0000","#FF79BC","#921AFF","#7D7DFF","#00CACA","#93FF93","#FF8040","#A8FF24","#AD5A5A","#8080C0","#A5A552","#424200","#642100"],title:{text:"Sensor History Data",x:-20},exporting:{enabled:!1,filename:"horticulture growing condition datasheet"},subtitle:{text:"Source Region: "+regionName,x:-20},marker:!1,noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",borderRadius:10,pointFormat:'<tr><td>{series.name}: </td><td style="text-align: right"><b>{point.y}</b></td></tr>',valueDecimals:3},legend:{align:"center",verticalAlign:"bottom"},series:e.data}),$scope.downLoad=function(){window.open("http://73.231.41.102:8080/sensor/history/export?user_id="+$cookieStore.get("user_id")+"&region_guid="+regionId+"&gateway_id="+gatewayId+"&start_time="+encodeURI(UTC_startTime)+"&end_time="+encodeURI(UTC_endTime))},$scope.toChartDetail=function(){var a,c,d,f,g,h,i,j,k,l,m,n,o,p;e.data||0!=e.data.length?($scope.chartDetailShow=!$scope.chartDetailShow,$scope.lastNextShow=!$scope.lastNextShow,$scope.chartShow=!$scope.chartShow,a=new Highcharts.Chart({chart:{renderTo:"chart_container"},title:{text:e.data[0].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[0].original_name+" condition datasheet"},colors:["#000000"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[0].original_name,data:e.data[0].original_data}]}),$scope.ExportChartDetailToExcel=function(){a.downloadXLS()},c=new Highcharts.Chart({chart:{renderTo:"chart_container1"},title:{text:e.data[1].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[1].original_name+" condition datasheet"},colors:["#CE0000"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[1].original_name,data:e.data[1].original_data}]}),$scope.ExportChartDetailToExcel1=function(){c.downloadXLS()},d=new Highcharts.Chart({chart:{renderTo:"chart_container2"},title:{text:e.data[2].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[2].original_name+" condition datasheet"},colors:["#FF79BC"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[2].original_name,data:e.data[2].original_data}]}),$scope.ExportChartDetailToExcel2=function(){d.downloadXLS()},f=new Highcharts.Chart({chart:{renderTo:"chart_container3"},title:{text:e.data[3].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[3].original_name+" condition datasheet"},colors:["#921AFF"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[3].original_name,data:e.data[3].original_data}]}),$scope.ExportChartDetailToExcel3=function(){f.downloadXLS()},g=new Highcharts.Chart({chart:{renderTo:"chart_container4"},title:{text:e.data[4].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[4].original_name+" condition datasheet"},colors:["#7D7DFF"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[4].original_name,data:e.data[4].original_data}]}),$scope.ExportChartDetailToExcel4=function(){g.downloadXLS()},h=new Highcharts.Chart({chart:{renderTo:"chart_container5"},title:{text:e.data[5].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[5].original_name+" condition datasheet"},colors:["#00CACA"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[5].original_name,data:e.data[5].original_data}]}),$scope.ExportChartDetailToExcel5=function(){h.downloadXLS()},i=new Highcharts.Chart({chart:{renderTo:"chart_container6"},title:{text:e.data[6].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[6].original_name+" condition datasheet"},colors:["#93FF93"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[6].original_name,data:e.data[6].original_data}]}),$scope.ExportChartDetailToExcel6=function(){i.downloadXLS()},j=new Highcharts.Chart({chart:{renderTo:"chart_container7"},title:{text:e.data[7].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[7].original_name+" condition datasheet"},colors:["#FF8040"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[7].original_name,data:e.data[7].original_data}]}),$scope.ExportChartDetailToExcel7=function(){j.downloadXLS()},k=new Highcharts.Chart({chart:{renderTo:"chart_container8"},title:{text:e.data[8].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[8].original_name+" condition datasheet"},colors:["#A8FF24"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[8].original_name,data:e.data[8].original_data}]}),$scope.ExportChartDetailToExcel8=function(){k.downloadXLS()},l=new Highcharts.Chart({chart:{renderTo:"chart_container9"},title:{text:e.data[9].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[9].original_name+" condition datasheet"},colors:["#AD5A5A"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[9].original_name,data:e.data[9].original_data}]}),$scope.ExportChartDetailToExcel9=function(){l.downloadXLS()},m=new Highcharts.Chart({chart:{renderTo:"chart_container10"},title:{text:e.data[10].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[10].original_name+" condition datasheet"},colors:["#8080C0"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[10].original_name,data:e.data[10].original_data}]}),$scope.ExportChartDetailToExcel10=function(){m.downloadXLS()},n=new Highcharts.Chart({chart:{renderTo:"chart_container11"},title:{text:e.data[11].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[11].original_name+" condition datasheet"},colors:["#A5A552"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[11].original_name,data:e.data[11].original_data}]}),$scope.ExportChartDetailToExcel11=function(){n.downloadXLS()},o=new Highcharts.Chart({chart:{renderTo:"chart_container12"},title:{text:e.data[12].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[12].original_name+" condition datasheet"},colors:["#424200"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[12].original_name,data:e.data[12].original_data}]}),$scope.ExportChartDetailToExcel12=function(){o.downloadXLS()},p=new Highcharts.Chart({chart:{renderTo:"chart_container13"},title:{text:e.data[13].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[13].original_name+" condition datasheet"},colors:["#642100"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[13].original_name,data:e.data[13].original_data}]}),$scope.ExportChartDetailToExcel13=function(){p.downloadXLS()}):toaster.pop({type:"error",title:"Error",body:"There is no data to display",timeout:POPTIMEOUT})}}else toaster.pop({type:"error",title:"Error",body:a.message,timeout:POPTIMEOUT}),$scope.dataContent="noData"});
    //默认显示情况用户选择上一小时,下一小时
    $scope.last=function(){var c,a="",b="";$scope.default_startTime.Format("yyyy-MM-dd hh:mm:ss")<=$scope.sensor_first_dataTime?toaster.pop({type:"error",title:"Error",body:"There is no earlier data !",timeout:POPTIMEOUT}):($scope.default_endTime=$scope.default_startTime,$scope.default_startTime=new Date(new Date($scope.default_startTime).getTime()-36e5),a=$scope.format($scope.default_startTime.toUTCString(),"yyyy-MM-dd HH:mm:ss"),b=$scope.format($scope.default_endTime.toUTCString(),"yyyy-MM-dd HH:mm:ss"),c={gateway_id:gatewayId,region_guid:regionId,start_time:encodeURI(a),end_time:encodeURI(b),type:"history",size:""},$scope.delay=0,$scope.minDuration=0,$scope.message="",$scope.backdrop=!1,$scope.promise=null,$scope.templateUrl="./pages/custom-loading-template.html",$scope.sensorDataProm=AuthService.myHttp(token,c,"GET","sensor").then(function(c){var d,e,f,g;if("0"==c.code&&c.content.time&&c.content.data){for(d=[],e=[],f=0;f<c.content.time.length;f++)e[f]=new Date(c.content.time[f]),d[f]=e[f].getTime(),d[f]-=1e3*60*(new Date).getTimezoneOffset(),d[f]=new Date(d[f]).Format("yyyy-MM-dd hh:mm:ss");g=c.content,new Highcharts.Chart({chart:{renderTo:"container",backgroundColor:"rgba(0,0,0,0)"},colors:["#000000","#CE0000","#FF79BC","#921AFF","#7D7DFF","#00CACA","#93FF93","#FF8040","#A8FF24","#AD5A5A","#8080C0","#A5A552","#424200","#642100"],title:{text:"Sensor History Data",x:-20},exporting:{enabled:!1,filename:"horticulture growing condition datasheet"},subtitle:{text:"Source Region: "+regionName,x:-20},marker:!1,noData:{position:{},attr:{},style:{}},xAxis:{categories:d,tickInterval:d.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",borderRadius:10,pointFormat:'<tr><td>{series.name}: </td><td style="text-align: right"><b>{point.y}</b></td></tr>',valueDecimals:3},legend:{align:"center",verticalAlign:"bottom"},series:g.data}),$scope.downLoad=function(){window.open("http://73.231.41.102:8080/sensor/history/export?user_id="+$cookieStore.get("user_id")+"&region_guid="+regionId+"&gateway_id="+gatewayId+"&start_time="+encodeURI(a)+"&end_time="+encodeURI(b))},$scope.toChartDetail=function(){var a,b,c,e,f,h,i,j,k,l,m,n,o,p;g.data||0!=g.data.length?($scope.chartDetailShow=!$scope.chartDetailShow,$scope.lastNextShow=!$scope.lastNextShow,$scope.chartShow=!$scope.chartShow,a=new Highcharts.Chart({chart:{renderTo:"chart_container"},title:{text:g.data[0].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:g.data[0].original_name+" condition datasheet"},colors:["#000000"],noData:{position:{},attr:{},style:{}},xAxis:{categories:d,tickInterval:d.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:g.data[0].original_name,data:g.data[0].original_data}]}),$scope.ExportChartDetailToExcel=function(){a.downloadXLS()},b=new Highcharts.Chart({chart:{renderTo:"chart_container1"},title:{text:g.data[1].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:g.data[1].original_name+" condition datasheet"},colors:["#CE0000"],noData:{position:{},attr:{},style:{}},xAxis:{categories:d,tickInterval:d.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:g.data[1].original_name,data:g.data[1].original_data}]}),$scope.ExportChartDetailToExcel1=function(){b.downloadXLS()},c=new Highcharts.Chart({chart:{renderTo:"chart_container2"},title:{text:g.data[2].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:g.data[2].original_name+" condition datasheet"},colors:["#FF79BC"],noData:{position:{},attr:{},style:{}},xAxis:{categories:d,tickInterval:d.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:g.data[2].original_name,data:g.data[2].original_data}]}),$scope.ExportChartDetailToExcel2=function(){c.downloadXLS()},e=new Highcharts.Chart({chart:{renderTo:"chart_container3"},title:{text:g.data[3].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:g.data[3].original_name+" condition datasheet"},colors:["#921AFF"],noData:{position:{},attr:{},style:{}},xAxis:{categories:d,tickInterval:d.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:g.data[3].original_name,data:g.data[3].original_data}]}),$scope.ExportChartDetailToExcel3=function(){e.downloadXLS()},f=new Highcharts.Chart({chart:{renderTo:"chart_container4"},title:{text:g.data[4].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:g.data[4].original_name+" condition datasheet"},colors:["#7D7DFF"],noData:{position:{},attr:{},style:{}},xAxis:{categories:d,tickInterval:d.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:g.data[4].original_name,data:g.data[4].original_data}]}),$scope.ExportChartDetailToExcel4=function(){f.downloadXLS()},h=new Highcharts.Chart({chart:{renderTo:"chart_container5"},title:{text:g.data[5].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:g.data[5].original_name+" condition datasheet"},colors:["#00CACA"],noData:{position:{},attr:{},style:{}},xAxis:{categories:d,tickInterval:d.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:g.data[5].original_name,data:g.data[5].original_data}]}),$scope.ExportChartDetailToExcel5=function(){h.downloadXLS()},i=new Highcharts.Chart({chart:{renderTo:"chart_container6"},title:{text:g.data[6].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:g.data[6].original_name+" condition datasheet"},colors:["#93FF93"],noData:{position:{},attr:{},style:{}},xAxis:{categories:d,tickInterval:d.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:g.data[6].original_name,data:g.data[6].original_data}]}),$scope.ExportChartDetailToExcel6=function(){i.downloadXLS()},j=new Highcharts.Chart({chart:{renderTo:"chart_container7"},title:{text:g.data[7].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:g.data[7].original_name+" condition datasheet"},colors:["#FF8040"],noData:{position:{},attr:{},style:{}},xAxis:{categories:d,tickInterval:d.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:g.data[7].original_name,data:g.data[7].original_data}]}),$scope.ExportChartDetailToExcel7=function(){j.downloadXLS()},k=new Highcharts.Chart({chart:{renderTo:"chart_container8"},title:{text:g.data[8].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:g.data[8].original_name+" condition datasheet"},colors:["#A8FF24"],noData:{position:{},attr:{},style:{}},xAxis:{categories:d,tickInterval:d.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:g.data[8].original_name,data:g.data[8].original_data}]}),$scope.ExportChartDetailToExcel8=function(){k.downloadXLS()},l=new Highcharts.Chart({chart:{renderTo:"chart_container9"},title:{text:g.data[9].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:g.data[9].original_name+" condition datasheet"},colors:["#AD5A5A"],noData:{position:{},attr:{},style:{}},xAxis:{categories:d,tickInterval:d.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:g.data[9].original_name,data:g.data[9].original_data}]}),$scope.ExportChartDetailToExcel9=function(){l.downloadXLS()},m=new Highcharts.Chart({chart:{renderTo:"chart_container10"},title:{text:g.data[10].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:g.data[10].original_name+" condition datasheet"},colors:["#8080C0"],noData:{position:{},attr:{},style:{}},xAxis:{categories:d,tickInterval:d.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:g.data[10].original_name,data:g.data[10].original_data}]}),$scope.ExportChartDetailToExcel10=function(){m.downloadXLS()},n=new Highcharts.Chart({chart:{renderTo:"chart_container11"},title:{text:g.data[11].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:g.data[11].original_name+" condition datasheet"},colors:["#A5A552"],noData:{position:{},attr:{},style:{}},xAxis:{categories:d,tickInterval:d.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:g.data[11].original_name,data:g.data[11].original_data}]}),$scope.ExportChartDetailToExcel11=function(){n.downloadXLS()},o=new Highcharts.Chart({chart:{renderTo:"chart_container12"},title:{text:g.data[12].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:g.data[12].original_name+" condition datasheet"},colors:["#424200"],noData:{position:{},attr:{},style:{}},xAxis:{categories:d,tickInterval:d.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:g.data[12].original_name,data:g.data[12].original_data}]}),$scope.ExportChartDetailToExcel12=function(){o.downloadXLS()},p=new Highcharts.Chart({chart:{renderTo:"chart_container13"},title:{text:g.data[13].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:g.data[13].original_name+" condition datasheet"},colors:["#642100"],noData:{position:{},attr:{},style:{}},xAxis:{categories:d,tickInterval:d.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:g.data[13].original_name,data:g.data[13].original_data}]}),$scope.ExportChartDetailToExcel13=function(){p.downloadXLS()}):toaster.pop({type:"error",title:"Error",body:"There is no data to display",timeout:POPTIMEOUT})}}else toaster.pop({type:"error",title:"Error",body:c.message,timeout:POPTIMEOUT}),$scope.dataContent="noData"}))};
    $scope.next=function(){if(new Date(new Date($scope.default_endTime).getTime()+1e3*60*60*$scope.my.timeDiff).Format("yyyy-MM-dd hh:mm:ss")>local_default_end_time)toaster.pop({type:"error",title:"Error",body:"There is mo more data !",timeout:POPTIMEOUT});else{$scope.default_startTime=$scope.default_endTime,$scope.default_endTime=new Date(new Date($scope.default_endTime).getTime()+1e3*60*60*$scope.my.timeDiff),UTC_startTime=$scope.format($scope.default_startTime.toUTCString(),"yyyy-MM-dd HH:mm:ss"),UTC_endTime=$scope.format($scope.default_endTime.toUTCString(),"yyyy-MM-dd HH:mm:ss");var a={gateway_id:gatewayId,region_guid:regionId,start_time:encodeURI(UTC_startTime),end_time:encodeURI(UTC_endTime),type:"history",size:""};$scope.delay=0,$scope.minDuration=0,$scope.message="",$scope.backdrop=!1,$scope.promise=null,$scope.templateUrl="./pages/custom-loading-template.html",$scope.getSensorDataProm=AuthService.myHttp(token,a,"GET","sensor").then(function(a){var b,c,d,e;if("0"==a.code&&a.content.time&&a.content.data){for(b=[],c=[],d=0;d<a.content.time.length;d++)c[d]=new Date(a.content.time[d]),b[d]=c[d].getTime(),b[d]-=1e3*60*(new Date).getTimezoneOffset(),b[d]=new Date(b[d]).Format("yyyy-MM-dd hh:mm:ss");e=a.content,new Highcharts.Chart({chart:{renderTo:"container",backgroundColor:"rgba(0,0,0,0)"},colors:["#000000","#CE0000","#FF79BC","#921AFF","#7D7DFF","#00CACA","#93FF93","#FF8040","#A8FF24","#AD5A5A","#8080C0","#A5A552","#424200","#642100"],title:{text:"Sensor History Data",x:-20},exporting:{enabled:!1,filename:"horticulture growing condition datasheet"},subtitle:{text:"Source Region: "+regionName,x:-20},marker:!1,noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",borderRadius:10,pointFormat:'<tr><td>{series.name}: </td><td style="text-align: right"><b>{point.y}</b></td></tr>',valueDecimals:3},legend:{align:"center",verticalAlign:"bottom"},series:e.data}),$scope.downLoad=function(){window.open("http://73.231.41.102:8080/sensor/history/export?user_id="+$cookieStore.get("user_id")+"&region_guid="+regionId+"&gateway_id="+gatewayId+"&start_time="+encodeURI(UTC_startTime)+"&end_time="+encodeURI(UTC_endTime))},$scope.toChartDetail=function(){var a,c,d,f,g,h,i,j,k,l,m,n,o,p;e.data||0!=e.data.length?($scope.chartDetailShow=!$scope.chartDetailShow,$scope.lastNextShow=!$scope.lastNextShow,$scope.chartShow=!$scope.chartShow,a=new Highcharts.Chart({chart:{renderTo:"chart_container"},title:{text:e.data[0].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[0].original_name+" condition datasheet"},colors:["#000000"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[0].original_name,data:e.data[0].original_data}]}),$scope.ExportChartDetailToExcel=function(){a.downloadXLS()},c=new Highcharts.Chart({chart:{renderTo:"chart_container1"},title:{text:e.data[1].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[1].original_name+" condition datasheet"},colors:["#CE0000"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[1].original_name,data:e.data[1].original_data}]}),$scope.ExportChartDetailToExcel1=function(){c.downloadXLS()},d=new Highcharts.Chart({chart:{renderTo:"chart_container2"},title:{text:e.data[2].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[2].original_name+" condition datasheet"},colors:["#FF79BC"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[2].original_name,data:e.data[2].original_data}]}),$scope.ExportChartDetailToExcel2=function(){d.downloadXLS()},f=new Highcharts.Chart({chart:{renderTo:"chart_container3"},title:{text:e.data[3].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[3].original_name+" condition datasheet"},colors:["#921AFF"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[3].original_name,data:e.data[3].original_data}]}),$scope.ExportChartDetailToExcel3=function(){f.downloadXLS()},g=new Highcharts.Chart({chart:{renderTo:"chart_container4"},title:{text:e.data[4].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[4].original_name+" condition datasheet"},colors:["#7D7DFF"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[4].original_name,data:e.data[4].original_data}]}),$scope.ExportChartDetailToExcel4=function(){g.downloadXLS()},h=new Highcharts.Chart({chart:{renderTo:"chart_container5"},title:{text:e.data[5].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[5].original_name+" condition datasheet"},colors:["#00CACA"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[5].original_name,data:e.data[5].original_data}]}),$scope.ExportChartDetailToExcel5=function(){h.downloadXLS()},i=new Highcharts.Chart({chart:{renderTo:"chart_container6"},title:{text:e.data[6].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[6].original_name+" condition datasheet"},colors:["#93FF93"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[6].original_name,data:e.data[6].original_data}]}),$scope.ExportChartDetailToExcel6=function(){i.downloadXLS()},j=new Highcharts.Chart({chart:{renderTo:"chart_container7"},title:{text:e.data[7].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[7].original_name+" condition datasheet"},colors:["#FF8040"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[7].original_name,data:e.data[7].original_data}]}),$scope.ExportChartDetailToExcel7=function(){j.downloadXLS()},k=new Highcharts.Chart({chart:{renderTo:"chart_container8"},title:{text:e.data[8].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[8].original_name+" condition datasheet"},colors:["#A8FF24"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[8].original_name,data:e.data[8].original_data}]}),$scope.ExportChartDetailToExcel8=function(){k.downloadXLS()},l=new Highcharts.Chart({chart:{renderTo:"chart_container9"},title:{text:e.data[9].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[9].original_name+" condition datasheet"},colors:["#AD5A5A"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[9].original_name,data:e.data[9].original_data}]}),$scope.ExportChartDetailToExcel9=function(){l.downloadXLS()},m=new Highcharts.Chart({chart:{renderTo:"chart_container10"},title:{text:e.data[10].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[10].original_name+" condition datasheet"},colors:["#8080C0"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[10].original_name,data:e.data[10].original_data}]}),$scope.ExportChartDetailToExcel10=function(){m.downloadXLS()},n=new Highcharts.Chart({chart:{renderTo:"chart_container11"},title:{text:e.data[11].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[11].original_name+" condition datasheet"},colors:["#A5A552"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[11].original_name,data:e.data[11].original_data}]}),$scope.ExportChartDetailToExcel11=function(){n.downloadXLS()},o=new Highcharts.Chart({chart:{renderTo:"chart_container12"},title:{text:e.data[12].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[12].original_name+" condition datasheet"},colors:["#424200"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[12].original_name,data:e.data[12].original_data}]}),$scope.ExportChartDetailToExcel12=function(){o.downloadXLS()},p=new Highcharts.Chart({chart:{renderTo:"chart_container13"},title:{text:e.data[13].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[13].original_name+" condition datasheet"},colors:["#642100"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[13].original_name,data:e.data[13].original_data}]}),$scope.ExportChartDetailToExcel13=function(){p.downloadXLS()}):toaster.pop({type:"error",title:"Error",body:"There is no data to display",timeout:POPTIMEOUT})}}else toaster.pop({type:"error",title:"Error",body:a.message,timeout:POPTIMEOUT}),$scope.dataContent="noData"})}};

    //查询曲线图数据
    var localEndTime;
    $scope.find = function () {
        $scope.delay = 0;$scope.minDuration = 0;$scope.message = '';$scope.backdrop = false;$scope.promise = null;$scope.templateUrl = './pages/custom-loading-template.html';
        $scope.default_endTime = new Date();//点击时的当前时间
        localEndTime = new Date().Format('yyyy-MM-dd hh:mm:ss');//这个时间主要用于下翻页时最后一页的截止时间
        $scope.my.standard = $scope.my.name.name;$scope.my.timeDiff = $scope.my.name.timeDiff;
        if($scope.my.standard == 'Hour'){
            //从当前时间往前10分钟进行查询(仅小时)
            $scope.default_endTime = new Date(new Date($scope.default_endTime) - 10*60*1000);
            localEndTime = $scope.default_endTime.Format('yyyy-MM-dd hh:mm:ss');
            var data,UTC_startTime="",UTC_endTime="";$scope.default_startTime=new Date($scope.default_endTime.getTime()-1e3*60*60*$scope.my.timeDiff).Format("yyyy-MM-dd hh:mm:ss"),$scope.default_endTime=$scope.default_endTime.Format("yyyy-MM-dd hh:mm:ss"),UTC_startTime=$scope.format(new Date($scope.default_startTime).toUTCString(),"yyyy-MM-dd HH:mm:ss"),UTC_endTime=$scope.format(new Date($scope.default_endTime).toUTCString(),"yyyy-MM-dd HH:mm:ss"),data={gateway_id:gatewayId,region_guid:regionId,start_time:encodeURI(UTC_startTime),end_time:encodeURI(UTC_endTime),type:"history",size:""};
            $scope.getSensorDataProm=AuthService.myHttp(token,data,"GET","sensor").then(function(a){var b,c,d,e;if("0"==a.code&&a.content.time&&a.content.data){for(b=[],c=[],d=0;d<a.content.time.length;d++)c[d]=new Date(a.content.time[d]),b[d]=c[d].getTime(),b[d]-=1e3*60*(new Date).getTimezoneOffset(),b[d]=new Date(b[d]).Format("yyyy-MM-dd hh:mm:ss");e=a.content,new Highcharts.Chart({chart:{renderTo:"container",backgroundColor:"rgba(0,0,0,0)"},colors:["#000000","#CE0000","#FF79BC","#921AFF","#7D7DFF","#00CACA","#93FF93","#FF8040","#A8FF24","#AD5A5A","#8080C0","#A5A552","#424200","#642100"],title:{text:"Sensor History Data",x:-20},exporting:{enabled:!1,filename:"horticulture growing condition datasheet"},subtitle:{text:"Source Region: "+regionName,x:-20},marker:!1,noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",borderRadius:10,pointFormat:'<tr><td>{series.name}: </td><td style="text-align: right"><b>{point.y}</b></td></tr>',valueDecimals:3},legend:{align:"center",verticalAlign:"bottom"},series:e.data}),$scope.downLoad=function(){window.open("http://73.231.41.102:8080/sensor/history/export?user_id="+$cookieStore.get("user_id")+"&region_guid="+regionId+"&gateway_id="+gatewayId+"&start_time="+encodeURI(UTC_startTime)+"&end_time="+encodeURI(UTC_endTime))},$scope.toChartDetail=function(){var a,c,d,f,g,h,i,j,k,l,m,n,o,p;e.data||0!=e.data.length?($scope.chartDetailShow=!$scope.chartDetailShow,$scope.lastNextShow=!$scope.lastNextShow,$scope.chartShow=!$scope.chartShow,a=new Highcharts.Chart({chart:{renderTo:"chart_container"},title:{text:e.data[0].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[0].original_name+" condition datasheet"},colors:["#000000"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[0].original_name,data:e.data[0].original_data}]}),$scope.ExportChartDetailToExcel=function(){a.downloadXLS()},c=new Highcharts.Chart({chart:{renderTo:"chart_container1"},title:{text:e.data[1].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[1].original_name+" condition datasheet"},colors:["#CE0000"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[1].original_name,data:e.data[1].original_data}]}),$scope.ExportChartDetailToExcel1=function(){c.downloadXLS()},d=new Highcharts.Chart({chart:{renderTo:"chart_container2"},title:{text:e.data[2].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[2].original_name+" condition datasheet"},colors:["#FF79BC"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[2].original_name,data:e.data[2].original_data}]}),$scope.ExportChartDetailToExcel2=function(){d.downloadXLS()},f=new Highcharts.Chart({chart:{renderTo:"chart_container3"},title:{text:e.data[3].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[3].original_name+" condition datasheet"},colors:["#921AFF"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[3].original_name,data:e.data[3].original_data}]}),$scope.ExportChartDetailToExcel3=function(){f.downloadXLS()},g=new Highcharts.Chart({chart:{renderTo:"chart_container4"},title:{text:e.data[4].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[4].original_name+" condition datasheet"},colors:["#7D7DFF"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[4].original_name,data:e.data[4].original_data}]}),$scope.ExportChartDetailToExcel4=function(){g.downloadXLS()},h=new Highcharts.Chart({chart:{renderTo:"chart_container5"},title:{text:e.data[5].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[5].original_name+" condition datasheet"},colors:["#00CACA"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[5].original_name,data:e.data[5].original_data}]}),$scope.ExportChartDetailToExcel5=function(){h.downloadXLS()},i=new Highcharts.Chart({chart:{renderTo:"chart_container6"},title:{text:e.data[6].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[6].original_name+" condition datasheet"},colors:["#93FF93"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[6].original_name,data:e.data[6].original_data}]}),$scope.ExportChartDetailToExcel6=function(){i.downloadXLS()},j=new Highcharts.Chart({chart:{renderTo:"chart_container7"},title:{text:e.data[7].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[7].original_name+" condition datasheet"},colors:["#FF8040"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[7].original_name,data:e.data[7].original_data}]}),$scope.ExportChartDetailToExcel7=function(){j.downloadXLS()},k=new Highcharts.Chart({chart:{renderTo:"chart_container8"},title:{text:e.data[8].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[8].original_name+" condition datasheet"},colors:["#A8FF24"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[8].original_name,data:e.data[8].original_data}]}),$scope.ExportChartDetailToExcel8=function(){k.downloadXLS()},l=new Highcharts.Chart({chart:{renderTo:"chart_container9"},title:{text:e.data[9].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[9].original_name+" condition datasheet"},colors:["#AD5A5A"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[9].original_name,data:e.data[9].original_data}]}),$scope.ExportChartDetailToExcel9=function(){l.downloadXLS()},m=new Highcharts.Chart({chart:{renderTo:"chart_container10"},title:{text:e.data[10].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[10].original_name+" condition datasheet"},colors:["#8080C0"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[10].original_name,data:e.data[10].original_data}]}),$scope.ExportChartDetailToExcel10=function(){m.downloadXLS()},n=new Highcharts.Chart({chart:{renderTo:"chart_container11"},title:{text:e.data[11].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[11].original_name+" condition datasheet"},colors:["#A5A552"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[11].original_name,data:e.data[11].original_data}]}),$scope.ExportChartDetailToExcel11=function(){n.downloadXLS()},o=new Highcharts.Chart({chart:{renderTo:"chart_container12"},title:{text:e.data[12].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[12].original_name+" condition datasheet"},colors:["#424200"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[12].original_name,data:e.data[12].original_data}]}),$scope.ExportChartDetailToExcel12=function(){o.downloadXLS()},p=new Highcharts.Chart({chart:{renderTo:"chart_container13"},title:{text:e.data[13].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[13].original_name+" condition datasheet"},colors:["#642100"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[13].original_name,data:e.data[13].original_data}]}),$scope.ExportChartDetailToExcel13=function(){p.downloadXLS()}):toaster.pop({type:"error",title:"Error",body:"There is no data to display",timeout:POPTIMEOUT})}}else toaster.pop({type:"error",title:"Error",body:a.message,timeout:POPTIMEOUT}),$scope.dataContent="noData"});
        }else if($scope.my.standard == 'Day'){
            $scope.default_startTime=new Date($scope.default_endTime.Format("yyyy-MM-dd hh:mm:ss").substring(0,10)+" 00:00:00").Format("yyyy-MM-dd hh:mm:ss"),$scope.default_endTime=$scope.default_endTime.Format("yyyy-MM-dd hh:mm:ss"),UTC_startTime=$scope.format(new Date($scope.default_startTime).toUTCString(),"yyyy-MM-dd HH:mm:ss"),UTC_endTime=$scope.format(new Date($scope.default_endTime).toUTCString(),"yyyy-MM-dd HH:mm:ss");var data={gateway_id:gatewayId,region_guid:regionId,start_time:encodeURI(UTC_startTime),end_time:encodeURI(UTC_endTime),type:"history",size:""};
            $scope.getSensorDataProm=AuthService.myHttp(token,data,"GET","sensor").then(function(a){var b,c,d,e;if("0"==a.code&&a.content.time&&a.content.data){for(b=[],c=[],d=0;d<a.content.time.length;d++)c[d]=new Date(a.content.time[d]),b[d]=c[d].getTime(),b[d]-=1e3*60*(new Date).getTimezoneOffset(),b[d]=new Date(b[d]).Format("yyyy-MM-dd hh:mm:ss");e=a.content,new Highcharts.Chart({chart:{renderTo:"container",backgroundColor:"rgba(0,0,0,0)"},colors:["#000000","#CE0000","#FF79BC","#921AFF","#7D7DFF","#00CACA","#93FF93","#FF8040","#A8FF24","#AD5A5A","#8080C0","#A5A552","#424200","#642100"],title:{text:"Sensor History Data",x:-20},exporting:{enabled:!1,filename:"horticulture growing condition datasheet"},subtitle:{text:"Source Region: "+regionName,x:-20},marker:!1,noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",borderRadius:10,pointFormat:'<tr><td>{series.name}: </td><td style="text-align: right"><b>{point.y}</b></td></tr>',valueDecimals:3},legend:{align:"center",verticalAlign:"bottom"},series:e.data}),$scope.downLoad=function(){window.open("http://73.231.41.102:8080/sensor/history/export?user_id="+$cookieStore.get("user_id")+"&region_guid="+regionId+"&gateway_id="+gatewayId+"&start_time="+encodeURI(UTC_startTime)+"&end_time="+encodeURI(UTC_endTime))},$scope.toChartDetail=function(){var a,c,d,f,g,h,i,j,k,l,m,n,o,p;e.data||0!=e.data.length?($scope.chartDetailShow=!$scope.chartDetailShow,$scope.lastNextShow=!$scope.lastNextShow,$scope.chartShow=!$scope.chartShow,a=new Highcharts.Chart({chart:{renderTo:"chart_container"},title:{text:e.data[0].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[0].original_name+" condition datasheet"},colors:["#000000"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[0].original_name,data:e.data[0].original_data}]}),$scope.ExportChartDetailToExcel=function(){a.downloadXLS()},c=new Highcharts.Chart({chart:{renderTo:"chart_container1"},title:{text:e.data[1].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[1].original_name+" condition datasheet"},colors:["#CE0000"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[1].original_name,data:e.data[1].original_data}]}),$scope.ExportChartDetailToExcel1=function(){c.downloadXLS()},d=new Highcharts.Chart({chart:{renderTo:"chart_container2"},title:{text:e.data[2].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[2].original_name+" condition datasheet"},colors:["#FF79BC"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[2].original_name,data:e.data[2].original_data}]}),$scope.ExportChartDetailToExcel2=function(){d.downloadXLS()},f=new Highcharts.Chart({chart:{renderTo:"chart_container3"},title:{text:e.data[3].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[3].original_name+" condition datasheet"},colors:["#921AFF"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[3].original_name,data:e.data[3].original_data}]}),$scope.ExportChartDetailToExcel3=function(){f.downloadXLS()},g=new Highcharts.Chart({chart:{renderTo:"chart_container4"},title:{text:e.data[4].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[4].original_name+" condition datasheet"},colors:["#7D7DFF"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[4].original_name,data:e.data[4].original_data}]}),$scope.ExportChartDetailToExcel4=function(){g.downloadXLS()},h=new Highcharts.Chart({chart:{renderTo:"chart_container5"},title:{text:e.data[5].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[5].original_name+" condition datasheet"},colors:["#00CACA"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[5].original_name,data:e.data[5].original_data}]}),$scope.ExportChartDetailToExcel5=function(){h.downloadXLS()},i=new Highcharts.Chart({chart:{renderTo:"chart_container6"},title:{text:e.data[6].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[6].original_name+" condition datasheet"},colors:["#93FF93"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[6].original_name,data:e.data[6].original_data}]}),$scope.ExportChartDetailToExcel6=function(){i.downloadXLS()},j=new Highcharts.Chart({chart:{renderTo:"chart_container7"},title:{text:e.data[7].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[7].original_name+" condition datasheet"},colors:["#FF8040"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[7].original_name,data:e.data[7].original_data}]}),$scope.ExportChartDetailToExcel7=function(){j.downloadXLS()},k=new Highcharts.Chart({chart:{renderTo:"chart_container8"},title:{text:e.data[8].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[8].original_name+" condition datasheet"},colors:["#A8FF24"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[8].original_name,data:e.data[8].original_data}]}),$scope.ExportChartDetailToExcel8=function(){k.downloadXLS()},l=new Highcharts.Chart({chart:{renderTo:"chart_container9"},title:{text:e.data[9].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[9].original_name+" condition datasheet"},colors:["#AD5A5A"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[9].original_name,data:e.data[9].original_data}]}),$scope.ExportChartDetailToExcel9=function(){l.downloadXLS()},m=new Highcharts.Chart({chart:{renderTo:"chart_container10"},title:{text:e.data[10].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[10].original_name+" condition datasheet"},colors:["#8080C0"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[10].original_name,data:e.data[10].original_data}]}),$scope.ExportChartDetailToExcel10=function(){m.downloadXLS()},n=new Highcharts.Chart({chart:{renderTo:"chart_container11"},title:{text:e.data[11].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[11].original_name+" condition datasheet"},colors:["#A5A552"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[11].original_name,data:e.data[11].original_data}]}),$scope.ExportChartDetailToExcel11=function(){n.downloadXLS()},o=new Highcharts.Chart({chart:{renderTo:"chart_container12"},title:{text:e.data[12].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[12].original_name+" condition datasheet"},colors:["#424200"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[12].original_name,data:e.data[12].original_data}]}),$scope.ExportChartDetailToExcel12=function(){o.downloadXLS()},p=new Highcharts.Chart({chart:{renderTo:"chart_container13"},title:{text:e.data[13].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[13].original_name+" condition datasheet"},colors:["#642100"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[13].original_name,data:e.data[13].original_data}]}),$scope.ExportChartDetailToExcel13=function(){p.downloadXLS()}):toaster.pop({type:"error",title:"Error",body:"There is no data to display",timeout:POPTIMEOUT})}}else toaster.pop({type:"error",title:"Error",body:a.message,timeout:POPTIMEOUT}),$scope.dataContent="noData"});
        }else if($scope.my.standard == 'Week' || $scope.my.standard == 'Month'){
            function selectFromTable(a){dataBase.transaction(function(b){b.executeSql(sqls[a],[],function(b,c){function e(a){var b={table_device_guid:$scope.device_guid,device_name:"",gateway_id:gatewayId,start_time:$scope.format(new Date(noDataDateDates[a]+" 00:00:00").toUTCString(),"yyyy-MM-dd HH:mm:ss"),end_time:$scope.format(new Date(noDataDateDates[a]+" 23:59:59").toUTCString(),"yyyy-MM-dd HH:mm:ss")};$scope.getSensorDataProm=AuthService.myHttp(token,b,"GET","sensor/sensorOneDay").then(function(b){var c,d,f,g,h,i,j,k,l,m,n;if("0"==b.code){for($scope.message=Math.round(100*((a+1)/$scope.vm.total)),c=[],d=[],f=[],g=[],h=[],i=[],j=[],k=[],l=0;l<b.content.time.length;l++)d[l]=new Date(b.content.time[l]),c[l]=d[l].getTime(),c[l]-=1e3*60*(new Date).getTimezoneOffset(),c[l]=new Date(c[l]).Format("yyyy-MM-dd hh:mm:ss");for(m=0;m<b.content.quarterObject.time.length;m++)f[m]=new Date(b.content.quarterObject.time[m]),i[m]=f[m].getTime(),i[m]-=1e3*60*(new Date).getTimezoneOffset(),i[m]=new Date(i[m]).Format("yyyy-MM-dd hh:mm:ss");for(m=0;m<b.content.halfYearObject.time.length;m++)g[m]=new Date(b.content.halfYearObject.time[m]),j[m]=g[m].getTime(),j[m]-=1e3*60*(new Date).getTimezoneOffset(),j[m]=new Date(j[m]).Format("yyyy-MM-dd hh:mm:ss");for(m=0;m<b.content.yearObject.time.length;m++)h[m]=new Date(b.content.yearObject.time[m]),k[m]=h[m].getTime(),k[m]-=1e3*60*(new Date).getTimezoneOffset(),k[m]=new Date(k[m]).Format("yyyy-MM-dd hh:mm:ss");if(dataBase.transaction(function(a){var d,e,f,g,h,l,m,n;for(d=0;d<b.content.time.length;d++)e="INSERT INTO sensorDataTable(device_guid,time,Carbon_Dioxide_original,Carbon_Dioxide,Substrate_PH_original,Substrate_PH,Substrate_Conductivity_original,Substrate_Conductivity,Substrate_Temperature_original,Substrate_Temperature,Air_Temperature_original,Air_Temperature,Ppfd_original,Ppfd,Liquid_PH_original,Liquid_PH,Substrate_Humidity_original,Substrate_Humidity,Liquid_DOC_original,Liquid_DOC,Liquid_Conductivity_original,Liquid_Conductivity,Air_Humidity_original,Air_Humidity,Substrate_DOC_original,Substrate_DOC,Illuminance_original,Illuminance,Lai_original,Lai) values ('"+$scope.device_guid+"','"+c[d]+"','"+b.content.data[0].original_data[d]+"','"+b.content.data[0].data[d]+"'"+",'"+b.content.data[1].original_data[d]+"','"+b.content.data[1].data[d]+"','"+b.content.data[2].original_data[d]+"','"+b.content.data[2].data[d]+"','"+b.content.data[3].original_data[d]+"','"+b.content.data[3].data[d]+"'"+",'"+b.content.data[4].original_data[d]+"','"+b.content.data[4].data[d]+"','"+b.content.data[5].original_data[d]+"','"+b.content.data[5].data[d]+"','"+b.content.data[6].original_data[d]+"','"+b.content.data[6].data[d]+"'"+",'"+b.content.data[7].original_data[d]+"','"+b.content.data[7].data[d]+"','"+b.content.data[8].original_data[d]+"','"+b.content.data[8].data[d]+"','"+b.content.data[9].original_data[d]+"','"+b.content.data[9].data[d]+"'"+",'"+b.content.data[10].original_data[d]+"','"+b.content.data[10].data[d]+"','"+b.content.data[11].original_data[d]+"','"+b.content.data[11].data[d]+"','"+b.content.data[12].original_data[d]+"','"+b.content.data[12].data[d]+"'"+",'"+b.content.data[13].original_data[d]+"','"+b.content.data[13].data[d]+"')",a.executeSql(e);for(f=0;f<b.content.quarterObject.time.length;f++)g="INSERT INTO sensorQuarterDataTable(device_guid,time,Carbon_Dioxide_original,Carbon_Dioxide,Substrate_PH_original,Substrate_PH,Substrate_Conductivity_original,Substrate_Conductivity,Substrate_Temperature_original,Substrate_Temperature,Air_Temperature_original,Air_Temperature,Ppfd_original,Ppfd,Liquid_PH_original,Liquid_PH,Substrate_Humidity_original,Substrate_Humidity,Liquid_DOC_original,Liquid_DOC,Liquid_Conductivity_original,Liquid_Conductivity,Air_Humidity_original,Air_Humidity,Substrate_DOC_original,Substrate_DOC,Illuminance_original,Illuminance,Lai_original,Lai) values ('"+$scope.device_guid+"','"+i[f]+"','"+b.content.quarterObject.data[0].original_data[f]+"','"+b.content.quarterObject.data[0].data[f]+"'"+",'"+b.content.quarterObject.data[1].original_data[f]+"','"+b.content.quarterObject.data[1].data[f]+"','"+b.content.quarterObject.data[2].original_data[f]+"','"+b.content.quarterObject.data[2].data[f]+"','"+b.content.quarterObject.data[3].original_data[f]+"','"+b.content.quarterObject.data[3].data[f]+"'"+",'"+b.content.quarterObject.data[4].original_data[f]+"','"+b.content.quarterObject.data[4].data[f]+"','"+b.content.quarterObject.data[5].original_data[f]+"','"+b.content.quarterObject.data[5].data[f]+"','"+b.content.quarterObject.data[6].original_data[f]+"','"+b.content.quarterObject.data[6].data[f]+"'"+",'"+b.content.quarterObject.data[7].original_data[f]+"','"+b.content.quarterObject.data[7].data[f]+"','"+b.content.quarterObject.data[8].original_data[f]+"','"+b.content.quarterObject.data[8].data[f]+"','"+b.content.quarterObject.data[9].original_data[f]+"','"+b.content.quarterObject.data[9].data[f]+"'"+",'"+b.content.quarterObject.data[10].original_data[f]+"','"+b.content.quarterObject.data[10].data[f]+"','"+b.content.quarterObject.data[11].original_data[f]+"','"+b.content.quarterObject.data[11].data[f]+"','"+b.content.quarterObject.data[12].original_data[f]+"','"+b.content.quarterObject.data[12].data[f]+"'"+",'"+b.content.quarterObject.data[13].original_data[f]+"','"+b.content.quarterObject.data[13].data[f]+"')",a.executeSql(g);for(h=0;h<b.content.quarterObject.time.length;h++)l="INSERT INTO sensorHalfYearDataTable(device_guid,time,Carbon_Dioxide_original,Carbon_Dioxide,Substrate_PH_original,Substrate_PH,Substrate_Conductivity_original,Substrate_Conductivity,Substrate_Temperature_original,Substrate_Temperature,Air_Temperature_original,Air_Temperature,Ppfd_original,Ppfd,Liquid_PH_original,Liquid_PH,Substrate_Humidity_original,Substrate_Humidity,Liquid_DOC_original,Liquid_DOC,Liquid_Conductivity_original,Liquid_Conductivity,Air_Humidity_original,Air_Humidity,Substrate_DOC_original,Substrate_DOC,Illuminance_original,Illuminance,Lai_original,Lai) values ('"+$scope.device_guid+"','"+j[h]+"','"+b.content.halfYearObject.data[0].original_data[h]+"','"+b.content.halfYearObject.data[0].data[h]+"'"+",'"+b.content.halfYearObject.data[1].original_data[h]+"','"+b.content.halfYearObject.data[1].data[h]+"','"+b.content.halfYearObject.data[2].original_data[h]+"','"+b.content.halfYearObject.data[2].data[h]+"','"+b.content.halfYearObject.data[3].original_data[h]+"','"+b.content.halfYearObject.data[3].data[h]+"'"+",'"+b.content.halfYearObject.data[4].original_data[h]+"','"+b.content.halfYearObject.data[4].data[h]+"','"+b.content.halfYearObject.data[5].original_data[h]+"','"+b.content.halfYearObject.data[5].data[h]+"','"+b.content.halfYearObject.data[6].original_data[h]+"','"+b.content.halfYearObject.data[6].data[h]+"'"+",'"+b.content.halfYearObject.data[7].original_data[h]+"','"+b.content.halfYearObject.data[7].data[h]+"','"+b.content.halfYearObject.data[8].original_data[h]+"','"+b.content.halfYearObject.data[8].data[h]+"','"+b.content.halfYearObject.data[9].original_data[h]+"','"+b.content.halfYearObject.data[9].data[h]+"'"+",'"+b.content.halfYearObject.data[10].original_data[h]+"','"+b.content.halfYearObject.data[10].data[h]+"','"+b.content.halfYearObject.data[11].original_data[h]+"','"+b.content.halfYearObject.data[11].data[h]+"','"+b.content.halfYearObject.data[12].original_data[h]+"','"+b.content.halfYearObject.data[12].data[h]+"'"+",'"+b.content.halfYearObject.data[13].original_data[h]+"','"+b.content.halfYearObject.data[13].data[h]+"')",a.executeSql(l);for(m=0;m<b.content.yearObject.time.length;m++)n="INSERT INTO sensorYearDataTable(device_guid,time,Carbon_Dioxide_original,Carbon_Dioxide,Substrate_PH_original,Substrate_PH,Substrate_Conductivity_original,Substrate_Conductivity,Substrate_Temperature_original,Substrate_Temperature,Air_Temperature_original,Air_Temperature,Ppfd_original,Ppfd,Liquid_PH_original,Liquid_PH,Substrate_Humidity_original,Substrate_Humidity,Liquid_DOC_original,Liquid_DOC,Liquid_Conductivity_original,Liquid_Conductivity,Air_Humidity_original,Air_Humidity,Substrate_DOC_original,Substrate_DOC,Illuminance_original,Illuminance,Lai_original,Lai) values ('"+$scope.device_guid+"','"+k[m]+"','"+b.content.yearObject.data[0].original_data[m]+"','"+b.content.yearObject.data[0].data[m]+"'"+",'"+b.content.yearObject.data[1].original_data[m]+"','"+b.content.yearObject.data[1].data[m]+"','"+b.content.yearObject.data[2].original_data[m]+"','"+b.content.yearObject.data[2].data[m]+"','"+b.content.yearObject.data[3].original_data[m]+"','"+b.content.yearObject.data[3].data[m]+"'"+",'"+b.content.yearObject.data[4].original_data[m]+"','"+b.content.yearObject.data[4].data[m]+"','"+b.content.yearObject.data[5].original_data[m]+"','"+b.content.yearObject.data[5].data[m]+"','"+b.content.yearObject.data[6].original_data[m]+"','"+b.content.yearObject.data[6].data[m]+"'"+",'"+b.content.yearObject.data[7].original_data[m]+"','"+b.content.yearObject.data[7].data[m]+"','"+b.content.yearObject.data[8].original_data[m]+"','"+b.content.yearObject.data[8].data[m]+"','"+b.content.yearObject.data[9].original_data[m]+"','"+b.content.yearObject.data[9].data[m]+"'"+",'"+b.content.yearObject.data[10].original_data[m]+"','"+b.content.yearObject.data[10].data[m]+"','"+b.content.yearObject.data[11].original_data[m]+"','"+b.content.yearObject.data[11].data[m]+"','"+b.content.yearObject.data[12].original_data[m]+"','"+b.content.yearObject.data[12].data[m]+"'"+",'"+b.content.yearObject.data[13].original_data[m]+"','"+b.content.yearObject.data[13].data[m]+"')",a.executeSql(n)}),a+1!=noDataDateDates.length)return $timeout(function(){e(a+1)},1500);a+1==noDataDateDates.length&&(toaster.pop({type:"success",title:"Success",body:"Download successfully , please waiting...",timeout:POPTIMEOUT}),n={},dataBase.transaction(function(a){var b="SELECT * FROM sensorDataTable WHERE time BETWEEN'"+$scope.default_startTime+"' AND '"+$scope.default_endTime+"' AND device_guid = '"+$scope.device_guid+"' ORDER BY time";a.executeSql(b,[],function(a,b){var V,c=[],d=[],e={original_name:"Carbon_Dioxide(ppm)",name:"Carbon_Dioxide(ppm)"},f=[],g=[],h={original_name:"Substrate_PH(PH)",name:"Substrate_PH(PH)"},i=[],j=[],k={original_name:"Substrate_Conductivity(mS/cm)",name:"Substrate_Conductivity(mS/cm)"},l=[],m=[],o={original_name:"Substrate_Temperature(°C)",name:"Substrate_Temperature(°C)"},p=[],q=[],r={original_name:"Air_Temperature(°C)",name:"Air_Temperature(°C)"},s=[],t=[],u={original_name:"Ppfd(μmol㎡/s)",name:"Ppfd(100*μmol㎡/s)"},v=[],w=[],x={original_name:"Liquid_PH(PH)",name:"Liquid_PH(PH)"},y=[],z=[],A={original_name:"Substrate_Humidity(%)",name:"Substrate_Humidity(%)"},B=[],C=[],D={original_name:"Liquid_DOC(mg/l)",name:"Liquid_DOC(mg/l)"},E=[],F=[],G={original_name:"Liquid_Conductivity(mS/cm)",name:"Liquid_Conductivity(mS/cm)"},H=[],I=[],J={original_name:"Air_Humidity(%)",name:"Air_Humidity(%)"},K=[],L=[],M={original_name:"Substrate_DOC(mg/l)",name:"Substrate_DOC(mg/l)"},N=[],O=[],P={original_name:"Illuminance(lux)",name:"Illuminance(100*lux)"},Q=[],R=[],S={original_name:"Lai()",name:"Lai()"},T=[],U=[];if(b)for(V=0;V<b.rows.length;V++)c.push(b.rows[V].time),f.push(parseFloat(b.rows[V].Carbon_Dioxide_original)),g.push(parseFloat(b.rows[V].Carbon_Dioxide)),i.push(parseFloat(b.rows[V].Substrate_PH_original)),j.push(parseFloat(b.rows[V].Substrate_PH)),l.push(parseFloat(b.rows[V].Substrate_Conductivity_original)),m.push(parseFloat(b.rows[V].Substrate_Conductivity)),p.push(parseFloat(b.rows[V].Substrate_Temperature_original)),q.push(parseFloat(b.rows[V].Substrate_Temperature)),s.push(parseFloat(b.rows[V].Air_Temperature_original)),t.push(parseFloat(b.rows[V].Air_Temperature)),v.push(parseFloat(b.rows[V].Ppfd_original)),w.push(parseFloat(b.rows[V].Ppfd)),y.push(parseFloat(b.rows[V].Liquid_PH_original)),z.push(parseFloat(b.rows[V].Liquid_PH)),B.push(parseFloat(b.rows[V].Substrate_Humidity_original)),C.push(parseFloat(b.rows[V].Substrate_Humidity)),E.push(parseFloat(b.rows[V].Liquid_DOC_original)),F.push(parseFloat(b.rows[V].Liquid_DOC)),H.push(parseFloat(b.rows[V].Liquid_Conductivity_original)),I.push(parseFloat(b.rows[V].Liquid_Conductivity)),K.push(parseFloat(b.rows[V].Air_Humidity_original)),L.push(parseFloat(b.rows[V].Air_Humidity)),N.push(parseFloat(b.rows[V].Substrate_DOC_original)),O.push(parseFloat(b.rows[V].Substrate_DOC)),Q.push(parseFloat(b.rows[V].Illuminance_original)),R.push(parseFloat(b.rows[V].Illuminance)),T.push(parseFloat(b.rows[V].Lai_original)),U.push(parseFloat(b.rows[V].Lai));e.original_data=f,e.data=g,h.original_data=i,h.data=j,k.original_data=l,k.data=m,o.original_data=p,o.data=q,r.original_data=s,r.data=t,u.original_data=v,u.data=w,x.original_data=y,x.data=z,A.original_data=B,A.data=C,D.original_data=E,D.data=F,G.original_data=H,G.data=I,J.original_data=K,J.data=L,M.original_data=N,M.data=O,P.original_data=Q,P.data=R,S.original_data=T,S.data=U,d.push(r),d.push(J),d.push(o),d.push(A),d.push(h),d.push(e),d.push(P),d.push(k),d.push(u),d.push(x),d.push(S),d.push(G),d.push(D),d.push(M),n.data=d,n.time=c,new Highcharts.Chart({chart:{renderTo:"container",backgroundColor:"rgba(0,0,0,0)"},colors:["#000000","#CE0000","#FF79BC","#921AFF","#7D7DFF","#00CACA","#93FF93","#FF8040","#A8FF24","#AD5A5A","#8080C0","#A5A552","#424200","#642100"],title:{text:"Sensor History Data",x:-20},exporting:{enabled:!1,filename:"horticulture growing condition datasheet"},subtitle:{text:"Source Region: "+regionName,x:-20},marker:!1,noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",borderRadius:10,pointFormat:'<tr><td>{series.name}: </td><td style="text-align: right"><b>{point.y}</b></td></tr>',valueDecimals:3},legend:{align:"center",verticalAlign:"bottom"},series:n.data}),$scope.downLoad=function(){window.open("http://73.231.41.102:8080/sensor/history/export?user_id="+$cookieStore.get("user_id")+"&region_guid="+regionId+"&gateway_id="+gatewayId+"&start_time="+encodeURI(UTC_startTime)+"&end_time="+encodeURI(UTC_endTime))},$scope.toChartDetail=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,o;n.data||0!=n.data.length?($scope.chartDetailShow=!$scope.chartDetailShow,$scope.lastNextShow=!$scope.lastNextShow,$scope.chartShow=!$scope.chartShow,a=new Highcharts.Chart({chart:{renderTo:"chart_container"},title:{text:n.data[0].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[0].original_name+" condition datasheet"},colors:["#000000"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[0].original_name,data:n.data[0].original_data}]}),$scope.ExportChartDetailToExcel=function(){a.downloadXLS()},b=new Highcharts.Chart({chart:{renderTo:"chart_container1"},title:{text:n.data[1].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[1].original_name+" condition datasheet"},colors:["#CE0000"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[1].original_name,data:n.data[1].original_data}]}),$scope.ExportChartDetailToExcel1=function(){b.downloadXLS()},c=new Highcharts.Chart({chart:{renderTo:"chart_container2"},title:{text:n.data[2].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[2].original_name+" condition datasheet"},colors:["#FF79BC"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[2].original_name,data:n.data[2].original_data}]}),$scope.ExportChartDetailToExcel2=function(){c.downloadXLS()},d=new Highcharts.Chart({chart:{renderTo:"chart_container3"},title:{text:n.data[3].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[3].original_name+" condition datasheet"},colors:["#921AFF"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[3].original_name,data:n.data[3].original_data}]}),$scope.ExportChartDetailToExcel3=function(){d.downloadXLS()},e=new Highcharts.Chart({chart:{renderTo:"chart_container4"},title:{text:n.data[4].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[4].original_name+" condition datasheet"},colors:["#7D7DFF"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[4].original_name,data:n.data[4].original_data}]}),$scope.ExportChartDetailToExcel4=function(){e.downloadXLS()},f=new Highcharts.Chart({chart:{renderTo:"chart_container5"},title:{text:n.data[5].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[5].original_name+" condition datasheet"},colors:["#00CACA"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[5].original_name,data:n.data[5].original_data}]}),$scope.ExportChartDetailToExcel5=function(){f.downloadXLS()},g=new Highcharts.Chart({chart:{renderTo:"chart_container6"},title:{text:n.data[6].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[6].original_name+" condition datasheet"},colors:["#93FF93"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[6].original_name,data:n.data[6].original_data}]}),$scope.ExportChartDetailToExcel6=function(){g.downloadXLS()},h=new Highcharts.Chart({chart:{renderTo:"chart_container7"},title:{text:n.data[7].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[7].original_name+" condition datasheet"},colors:["#FF8040"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[7].original_name,data:n.data[7].original_data}]}),$scope.ExportChartDetailToExcel7=function(){h.downloadXLS()},i=new Highcharts.Chart({chart:{renderTo:"chart_container8"},title:{text:n.data[8].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[8].original_name+" condition datasheet"},colors:["#A8FF24"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[8].original_name,data:n.data[8].original_data}]}),$scope.ExportChartDetailToExcel8=function(){i.downloadXLS()},j=new Highcharts.Chart({chart:{renderTo:"chart_container9"},title:{text:n.data[9].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[9].original_name+" condition datasheet"},colors:["#AD5A5A"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[9].original_name,data:n.data[9].original_data}]}),$scope.ExportChartDetailToExcel9=function(){j.downloadXLS()},k=new Highcharts.Chart({chart:{renderTo:"chart_container10"},title:{text:n.data[10].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[10].original_name+" condition datasheet"},colors:["#8080C0"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[10].original_name,data:n.data[10].original_data}]}),$scope.ExportChartDetailToExcel10=function(){k.downloadXLS()},l=new Highcharts.Chart({chart:{renderTo:"chart_container11"},title:{text:n.data[11].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[11].original_name+" condition datasheet"},colors:["#A5A552"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[11].original_name,data:n.data[11].original_data}]}),$scope.ExportChartDetailToExcel11=function(){l.downloadXLS()},m=new Highcharts.Chart({chart:{renderTo:"chart_container12"},title:{text:n.data[12].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[12].original_name+" condition datasheet"},colors:["#424200"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[12].original_name,data:n.data[12].original_data}]}),$scope.ExportChartDetailToExcel12=function(){m.downloadXLS()},o=new Highcharts.Chart({chart:{renderTo:"chart_container13"},title:{text:n.data[13].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[13].original_name+" condition datasheet"},colors:["#642100"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[13].original_name,data:n.data[13].original_data}]}),$scope.ExportChartDetailToExcel13=function(){o.downloadXLS()}):toaster.pop({type:"error",title:"Error",body:"There is no data to display",timeout:POPTIMEOUT})}})}))}else toaster.pop({type:"error",title:"Error",body:b.message,timeout:POPTIMEOUT})})}var d,f;return 0==c.rows.length&&noDataDateDates.push(sqls[a].substring(54,64)),a+1!=newDate.length?$timeout(function(){selectFromTable(a+1)},1):(noDataDateDates&&noDataDateDates.length>0?($scope.delay=0,$scope.minDuration=0,$scope.message="0",$scope.backdrop=!1,$scope.promise=null,$scope.templateUrl="./pages/down-loading-template.html",$scope.vm={},$scope.vm.total=noDataDateDates.length,d=0,e(d)):noDataDateDates&&0!=noDataDateDates.length||(f={},dataBase.transaction(function(a){var b="SELECT * FROM sensorDataTable WHERE time BETWEEN'"+$scope.default_startTime+"' AND '"+$scope.default_endTime+"' AND device_guid = '"+$scope.device_guid+"' ORDER BY time";a.executeSql(b,[],function(a,b){var V,c=[],d=[],e={original_name:"Carbon_Dioxide(ppm)",name:"Carbon_Dioxide(ppm)"},g=[],h=[],i={original_name:"Substrate_PH(PH)",name:"Substrate_PH(PH)"},j=[],k=[],l={original_name:"Substrate_Conductivity(mS/cm)",name:"Substrate_Conductivity(mS/cm)"},m=[],n=[],o={original_name:"Substrate_Temperature(°C)",name:"Substrate_Temperature(°C)"},p=[],q=[],r={original_name:"Air_Temperature(°C)",name:"Air_Temperature(°C)"},s=[],t=[],u={original_name:"Ppfd(μmol㎡/s)",name:"Ppfd(100*μmol㎡/s)"},v=[],w=[],x={original_name:"Liquid_PH(PH)",name:"Liquid_PH(PH)"},y=[],z=[],A={original_name:"Substrate_Humidity(%)",name:"Substrate_Humidity(%)"},B=[],C=[],D={original_name:"Liquid_DOC(mg/l)",name:"Liquid_DOC(mg/l)"},E=[],F=[],G={original_name:"Liquid_Conductivity(mS/cm)",name:"Liquid_Conductivity(mS/cm)"},H=[],I=[],J={original_name:"Air_Humidity(%)",name:"Air_Humidity(%)"},K=[],L=[],M={original_name:"Substrate_DOC(mg/l)",name:"Substrate_DOC(mg/l)"},N=[],O=[],P={original_name:"Illuminance(lux)",name:"Illuminance(100*lux)"},Q=[],R=[],S={original_name:"Lai()",name:"Lai()"},T=[],U=[];if(b)for(V=0;V<b.rows.length;V++)c.push(b.rows[V].time),g.push(parseFloat(b.rows[V].Carbon_Dioxide_original)),h.push(parseFloat(b.rows[V].Carbon_Dioxide)),j.push(parseFloat(b.rows[V].Substrate_PH_original)),k.push(parseFloat(b.rows[V].Substrate_PH)),m.push(parseFloat(b.rows[V].Substrate_Conductivity_original)),n.push(parseFloat(b.rows[V].Substrate_Conductivity)),p.push(parseFloat(b.rows[V].Substrate_Temperature_original)),q.push(parseFloat(b.rows[V].Substrate_Temperature)),s.push(parseFloat(b.rows[V].Air_Temperature_original)),t.push(parseFloat(b.rows[V].Air_Temperature)),v.push(parseFloat(b.rows[V].Ppfd_original)),w.push(parseFloat(b.rows[V].Ppfd)),y.push(parseFloat(b.rows[V].Liquid_PH_original)),z.push(parseFloat(b.rows[V].Liquid_PH)),B.push(parseFloat(b.rows[V].Substrate_Humidity_original)),C.push(parseFloat(b.rows[V].Substrate_Humidity)),E.push(parseFloat(b.rows[V].Liquid_DOC_original)),F.push(parseFloat(b.rows[V].Liquid_DOC)),H.push(parseFloat(b.rows[V].Liquid_Conductivity_original)),I.push(parseFloat(b.rows[V].Liquid_Conductivity)),K.push(parseFloat(b.rows[V].Air_Humidity_original)),L.push(parseFloat(b.rows[V].Air_Humidity)),N.push(parseFloat(b.rows[V].Substrate_DOC_original)),O.push(parseFloat(b.rows[V].Substrate_DOC)),Q.push(parseFloat(b.rows[V].Illuminance_original)),R.push(parseFloat(b.rows[V].Illuminance)),T.push(parseFloat(b.rows[V].Lai_original)),U.push(parseFloat(b.rows[V].Lai));e.original_data=g,e.data=h,i.original_data=j,i.data=k,l.original_data=m,l.data=n,o.original_data=p,o.data=q,r.original_data=s,r.data=t,u.original_data=v,u.data=w,x.original_data=y,x.data=z,A.original_data=B,A.data=C,D.original_data=E,D.data=F,G.original_data=H,G.data=I,J.original_data=K,J.data=L,M.original_data=N,M.data=O,P.original_data=Q,P.data=R,S.original_data=T,S.data=U,d.push(r),d.push(J),d.push(o),d.push(A),d.push(i),d.push(e),d.push(P),d.push(l),d.push(u),d.push(x),d.push(S),d.push(G),d.push(D),d.push(M),f.data=d,f.time=c,new Highcharts.Chart({chart:{renderTo:"container",backgroundColor:"rgba(0,0,0,0)"},colors:["#000000","#CE0000","#FF79BC","#921AFF","#7D7DFF","#00CACA","#93FF93","#FF8040","#A8FF24","#AD5A5A","#8080C0","#A5A552","#424200","#642100"],title:{text:"Sensor History Data",x:-20},exporting:{enabled:!1,filename:"horticulture growing condition datasheet"},subtitle:{text:"Source Region: "+regionName,x:-20},marker:!1,noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",borderRadius:10,pointFormat:'<tr><td>{series.name}: </td><td style="text-align: right"><b>{point.y}</b></td></tr>',valueDecimals:3},legend:{align:"center",verticalAlign:"bottom"},series:f.data}),$scope.downLoad=function(){window.open("http://73.231.41.102:8080/sensor/history/export?user_id="+$cookieStore.get("user_id")+"&region_guid="+regionId+"&gateway_id="+gatewayId+"&start_time="+encodeURI(UTC_startTime)+"&end_time="+encodeURI(UTC_endTime))},$scope.toChartDetail=function(){var a,b,c,d,e,g,h,i,j,k,l,m,n,o;f.data||0!=f.data.length?($scope.chartDetailShow=!$scope.chartDetailShow,$scope.lastNextShow=!$scope.lastNextShow,$scope.chartShow=!$scope.chartShow,a=new Highcharts.Chart({chart:{renderTo:"chart_container"},title:{text:f.data[0].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[0].original_name+" condition datasheet"},colors:["#000000"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[0].original_name,data:f.data[0].original_data}]}),$scope.ExportChartDetailToExcel=function(){a.downloadXLS()},b=new Highcharts.Chart({chart:{renderTo:"chart_container1"},title:{text:f.data[1].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[1].original_name+" condition datasheet"},colors:["#CE0000"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[1].original_name,data:f.data[1].original_data}]}),$scope.ExportChartDetailToExcel1=function(){b.downloadXLS()},c=new Highcharts.Chart({chart:{renderTo:"chart_container2"},title:{text:f.data[2].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[2].original_name+" condition datasheet"},colors:["#FF79BC"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[2].original_name,data:f.data[2].original_data}]}),$scope.ExportChartDetailToExcel2=function(){c.downloadXLS()},d=new Highcharts.Chart({chart:{renderTo:"chart_container3"},title:{text:f.data[3].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[3].original_name+" condition datasheet"},colors:["#921AFF"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[3].original_name,data:f.data[3].original_data}]}),$scope.ExportChartDetailToExcel3=function(){d.downloadXLS()},e=new Highcharts.Chart({chart:{renderTo:"chart_container4"},title:{text:f.data[4].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[4].original_name+" condition datasheet"},colors:["#7D7DFF"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[4].original_name,data:f.data[4].original_data}]}),$scope.ExportChartDetailToExcel4=function(){e.downloadXLS()},g=new Highcharts.Chart({chart:{renderTo:"chart_container5"},title:{text:f.data[5].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[5].original_name+" condition datasheet"},colors:["#00CACA"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[5].original_name,data:f.data[5].original_data}]}),$scope.ExportChartDetailToExcel5=function(){g.downloadXLS()},h=new Highcharts.Chart({chart:{renderTo:"chart_container6"},title:{text:f.data[6].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[6].original_name+" condition datasheet"},colors:["#93FF93"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[6].original_name,data:f.data[6].original_data}]}),$scope.ExportChartDetailToExcel6=function(){h.downloadXLS()},i=new Highcharts.Chart({chart:{renderTo:"chart_container7"},title:{text:f.data[7].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[7].original_name+" condition datasheet"},colors:["#FF8040"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[7].original_name,data:f.data[7].original_data}]}),$scope.ExportChartDetailToExcel7=function(){i.downloadXLS()},j=new Highcharts.Chart({chart:{renderTo:"chart_container8"},title:{text:f.data[8].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[8].original_name+" condition datasheet"},colors:["#A8FF24"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[8].original_name,data:f.data[8].original_data}]}),$scope.ExportChartDetailToExcel8=function(){j.downloadXLS()
            },k=new Highcharts.Chart({chart:{renderTo:"chart_container9"},title:{text:f.data[9].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[9].original_name+" condition datasheet"},colors:["#AD5A5A"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[9].original_name,data:f.data[9].original_data}]}),$scope.ExportChartDetailToExcel9=function(){k.downloadXLS()},l=new Highcharts.Chart({chart:{renderTo:"chart_container10"},title:{text:f.data[10].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[10].original_name+" condition datasheet"},colors:["#8080C0"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[10].original_name,data:f.data[10].original_data}]}),$scope.ExportChartDetailToExcel10=function(){l.downloadXLS()},m=new Highcharts.Chart({chart:{renderTo:"chart_container11"},title:{text:f.data[11].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[11].original_name+" condition datasheet"},colors:["#A5A552"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[11].original_name,data:f.data[11].original_data}]}),$scope.ExportChartDetailToExcel11=function(){m.downloadXLS()},n=new Highcharts.Chart({chart:{renderTo:"chart_container12"},title:{text:f.data[12].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[12].original_name+" condition datasheet"},colors:["#424200"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[12].original_name,data:f.data[12].original_data}]}),$scope.ExportChartDetailToExcel12=function(){n.downloadXLS()},o=new Highcharts.Chart({chart:{renderTo:"chart_container13"},title:{text:f.data[13].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[13].original_name+" condition datasheet"},colors:["#642100"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[13].original_name,data:f.data[13].original_data}]}),$scope.ExportChartDetailToExcel13=function(){o.downloadXLS()}):toaster.pop({type:"error",title:"Error",body:"There is no data to display",timeout:POPTIMEOUT})}})})),void 0)})})}var time1,time2,dayDiff,newDate,i,sqls,y,noDataDateDates,x;for(toaster.pop({type:"success",title:"",body:"Please waiting ...",timeout:POPTIMEOUT}),$scope.default_endTime=new Date(new Date($scope.default_endTime.getTime()-864e5).Format("yyyy-MM-dd hh:mm:ss").substring(0,10)+" 23:59:59").Format("yyyy-MM-dd hh:mm:ss"),$scope.default_startTime=new Date(new Date($scope.default_endTime).getTime()-1e3*60*60*$scope.my.timeDiff).Format("yyyy-MM-dd hh:mm:ss"),UTC_startTime=$scope.format(new Date($scope.default_startTime).toUTCString(),"yyyy-MM-dd HH:mm:ss"),UTC_endTime=$scope.format(new Date($scope.default_endTime).toUTCString(),"yyyy-MM-dd HH:mm:ss"),time1=$scope.default_startTime.substring(0,10),time2=$scope.default_endTime.substring(0,10),dayDiff=DateDiff(time1,time2)+1,newDate=[],i=0;dayDiff>i;i++)newDate[i]=getNewDay(time1,i);for(sqls=[],y=0;y<newDate.length;y++)sqls[y]="SELECT * FROM sensorYearDataTable WHERE time BETWEEN '"+newDate[y]+" 00:00:00"+"' AND '"+newDate[y]+" 23:59:59"+"' AND device_guid = '"+$scope.device_guid+"'";noDataDateDates=[],x=0,x=0,selectFromTable(x);
        }else if($scope.my.standard == 'Quarter'){
            function selectFromTable(a){dataBase.transaction(function(b){b.executeSql(sqls[a],[],function(b,c){function e(a){var b={table_device_guid:$scope.device_guid,device_name:"",gateway_id:gatewayId,start_time:$scope.format(new Date(noDataDateDates[a]+" 00:00:00").toUTCString(),"yyyy-MM-dd HH:mm:ss"),end_time:$scope.format(new Date(noDataDateDates[a]+" 23:59:59").toUTCString(),"yyyy-MM-dd HH:mm:ss")};$scope.getSensorDataProm=AuthService.myHttp(token,b,"GET","sensor/sensorOneDay").then(function(b){var c,d,f,g,h,i,j,k,l,m,n;if("0"==b.code){for($scope.message=Math.round(100*((a+1)/$scope.vm.total)),c=[],d=[],f=[],g=[],h=[],i=[],j=[],k=[],l=0;l<b.content.time.length;l++)d[l]=new Date(b.content.time[l]),c[l]=d[l].getTime(),c[l]-=1e3*60*(new Date).getTimezoneOffset(),c[l]=new Date(c[l]).Format("yyyy-MM-dd hh:mm:ss");for(m=0;m<b.content.quarterObject.time.length;m++)f[m]=new Date(b.content.quarterObject.time[m]),i[m]=f[m].getTime(),i[m]-=1e3*60*(new Date).getTimezoneOffset(),i[m]=new Date(i[m]).Format("yyyy-MM-dd hh:mm:ss");for(m=0;m<b.content.halfYearObject.time.length;m++)g[m]=new Date(b.content.halfYearObject.time[m]),j[m]=g[m].getTime(),j[m]-=1e3*60*(new Date).getTimezoneOffset(),j[m]=new Date(j[m]).Format("yyyy-MM-dd hh:mm:ss");for(m=0;m<b.content.yearObject.time.length;m++)h[m]=new Date(b.content.yearObject.time[m]),k[m]=h[m].getTime(),k[m]-=1e3*60*(new Date).getTimezoneOffset(),k[m]=new Date(k[m]).Format("yyyy-MM-dd hh:mm:ss");if(dataBase.transaction(function(a){var d,e,f,g,h,l,m,n;for(d=0;d<b.content.time.length;d++)e="INSERT INTO sensorDataTable(device_guid,time,Carbon_Dioxide_original,Carbon_Dioxide,Substrate_PH_original,Substrate_PH,Substrate_Conductivity_original,Substrate_Conductivity,Substrate_Temperature_original,Substrate_Temperature,Air_Temperature_original,Air_Temperature,Ppfd_original,Ppfd,Liquid_PH_original,Liquid_PH,Substrate_Humidity_original,Substrate_Humidity,Liquid_DOC_original,Liquid_DOC,Liquid_Conductivity_original,Liquid_Conductivity,Air_Humidity_original,Air_Humidity,Substrate_DOC_original,Substrate_DOC,Illuminance_original,Illuminance,Lai_original,Lai) values ('"+$scope.device_guid+"','"+c[d]+"','"+b.content.data[0].original_data[d]+"','"+b.content.data[0].data[d]+"'"+",'"+b.content.data[1].original_data[d]+"','"+b.content.data[1].data[d]+"','"+b.content.data[2].original_data[d]+"','"+b.content.data[2].data[d]+"','"+b.content.data[3].original_data[d]+"','"+b.content.data[3].data[d]+"'"+",'"+b.content.data[4].original_data[d]+"','"+b.content.data[4].data[d]+"','"+b.content.data[5].original_data[d]+"','"+b.content.data[5].data[d]+"','"+b.content.data[6].original_data[d]+"','"+b.content.data[6].data[d]+"'"+",'"+b.content.data[7].original_data[d]+"','"+b.content.data[7].data[d]+"','"+b.content.data[8].original_data[d]+"','"+b.content.data[8].data[d]+"','"+b.content.data[9].original_data[d]+"','"+b.content.data[9].data[d]+"'"+",'"+b.content.data[10].original_data[d]+"','"+b.content.data[10].data[d]+"','"+b.content.data[11].original_data[d]+"','"+b.content.data[11].data[d]+"','"+b.content.data[12].original_data[d]+"','"+b.content.data[12].data[d]+"'"+",'"+b.content.data[13].original_data[d]+"','"+b.content.data[13].data[d]+"')",a.executeSql(e);for(f=0;f<b.content.quarterObject.time.length;f++)g="INSERT INTO sensorQuarterDataTable(device_guid,time,Carbon_Dioxide_original,Carbon_Dioxide,Substrate_PH_original,Substrate_PH,Substrate_Conductivity_original,Substrate_Conductivity,Substrate_Temperature_original,Substrate_Temperature,Air_Temperature_original,Air_Temperature,Ppfd_original,Ppfd,Liquid_PH_original,Liquid_PH,Substrate_Humidity_original,Substrate_Humidity,Liquid_DOC_original,Liquid_DOC,Liquid_Conductivity_original,Liquid_Conductivity,Air_Humidity_original,Air_Humidity,Substrate_DOC_original,Substrate_DOC,Illuminance_original,Illuminance,Lai_original,Lai) values ('"+$scope.device_guid+"','"+i[f]+"','"+b.content.quarterObject.data[0].original_data[f]+"','"+b.content.quarterObject.data[0].data[f]+"'"+",'"+b.content.quarterObject.data[1].original_data[f]+"','"+b.content.quarterObject.data[1].data[f]+"','"+b.content.quarterObject.data[2].original_data[f]+"','"+b.content.quarterObject.data[2].data[f]+"','"+b.content.quarterObject.data[3].original_data[f]+"','"+b.content.quarterObject.data[3].data[f]+"'"+",'"+b.content.quarterObject.data[4].original_data[f]+"','"+b.content.quarterObject.data[4].data[f]+"','"+b.content.quarterObject.data[5].original_data[f]+"','"+b.content.quarterObject.data[5].data[f]+"','"+b.content.quarterObject.data[6].original_data[f]+"','"+b.content.quarterObject.data[6].data[f]+"'"+",'"+b.content.quarterObject.data[7].original_data[f]+"','"+b.content.quarterObject.data[7].data[f]+"','"+b.content.quarterObject.data[8].original_data[f]+"','"+b.content.quarterObject.data[8].data[f]+"','"+b.content.quarterObject.data[9].original_data[f]+"','"+b.content.quarterObject.data[9].data[f]+"'"+",'"+b.content.quarterObject.data[10].original_data[f]+"','"+b.content.quarterObject.data[10].data[f]+"','"+b.content.quarterObject.data[11].original_data[f]+"','"+b.content.quarterObject.data[11].data[f]+"','"+b.content.quarterObject.data[12].original_data[f]+"','"+b.content.quarterObject.data[12].data[f]+"'"+",'"+b.content.quarterObject.data[13].original_data[f]+"','"+b.content.quarterObject.data[13].data[f]+"')",a.executeSql(g);for(h=0;h<b.content.quarterObject.time.length;h++)l="INSERT INTO sensorHalfYearDataTable(device_guid,time,Carbon_Dioxide_original,Carbon_Dioxide,Substrate_PH_original,Substrate_PH,Substrate_Conductivity_original,Substrate_Conductivity,Substrate_Temperature_original,Substrate_Temperature,Air_Temperature_original,Air_Temperature,Ppfd_original,Ppfd,Liquid_PH_original,Liquid_PH,Substrate_Humidity_original,Substrate_Humidity,Liquid_DOC_original,Liquid_DOC,Liquid_Conductivity_original,Liquid_Conductivity,Air_Humidity_original,Air_Humidity,Substrate_DOC_original,Substrate_DOC,Illuminance_original,Illuminance,Lai_original,Lai) values ('"+$scope.device_guid+"','"+j[h]+"','"+b.content.halfYearObject.data[0].original_data[h]+"','"+b.content.halfYearObject.data[0].data[h]+"'"+",'"+b.content.halfYearObject.data[1].original_data[h]+"','"+b.content.halfYearObject.data[1].data[h]+"','"+b.content.halfYearObject.data[2].original_data[h]+"','"+b.content.halfYearObject.data[2].data[h]+"','"+b.content.halfYearObject.data[3].original_data[h]+"','"+b.content.halfYearObject.data[3].data[h]+"'"+",'"+b.content.halfYearObject.data[4].original_data[h]+"','"+b.content.halfYearObject.data[4].data[h]+"','"+b.content.halfYearObject.data[5].original_data[h]+"','"+b.content.halfYearObject.data[5].data[h]+"','"+b.content.halfYearObject.data[6].original_data[h]+"','"+b.content.halfYearObject.data[6].data[h]+"'"+",'"+b.content.halfYearObject.data[7].original_data[h]+"','"+b.content.halfYearObject.data[7].data[h]+"','"+b.content.halfYearObject.data[8].original_data[h]+"','"+b.content.halfYearObject.data[8].data[h]+"','"+b.content.halfYearObject.data[9].original_data[h]+"','"+b.content.halfYearObject.data[9].data[h]+"'"+",'"+b.content.halfYearObject.data[10].original_data[h]+"','"+b.content.halfYearObject.data[10].data[h]+"','"+b.content.halfYearObject.data[11].original_data[h]+"','"+b.content.halfYearObject.data[11].data[h]+"','"+b.content.halfYearObject.data[12].original_data[h]+"','"+b.content.halfYearObject.data[12].data[h]+"'"+",'"+b.content.halfYearObject.data[13].original_data[h]+"','"+b.content.halfYearObject.data[13].data[h]+"')",a.executeSql(l);for(m=0;m<b.content.yearObject.time.length;m++)n="INSERT INTO sensorYearDataTable(device_guid,time,Carbon_Dioxide_original,Carbon_Dioxide,Substrate_PH_original,Substrate_PH,Substrate_Conductivity_original,Substrate_Conductivity,Substrate_Temperature_original,Substrate_Temperature,Air_Temperature_original,Air_Temperature,Ppfd_original,Ppfd,Liquid_PH_original,Liquid_PH,Substrate_Humidity_original,Substrate_Humidity,Liquid_DOC_original,Liquid_DOC,Liquid_Conductivity_original,Liquid_Conductivity,Air_Humidity_original,Air_Humidity,Substrate_DOC_original,Substrate_DOC,Illuminance_original,Illuminance,Lai_original,Lai) values ('"+$scope.device_guid+"','"+k[m]+"','"+b.content.yearObject.data[0].original_data[m]+"','"+b.content.yearObject.data[0].data[m]+"'"+",'"+b.content.yearObject.data[1].original_data[m]+"','"+b.content.yearObject.data[1].data[m]+"','"+b.content.yearObject.data[2].original_data[m]+"','"+b.content.yearObject.data[2].data[m]+"','"+b.content.yearObject.data[3].original_data[m]+"','"+b.content.yearObject.data[3].data[m]+"'"+",'"+b.content.yearObject.data[4].original_data[m]+"','"+b.content.yearObject.data[4].data[m]+"','"+b.content.yearObject.data[5].original_data[m]+"','"+b.content.yearObject.data[5].data[m]+"','"+b.content.yearObject.data[6].original_data[m]+"','"+b.content.yearObject.data[6].data[m]+"'"+",'"+b.content.yearObject.data[7].original_data[m]+"','"+b.content.yearObject.data[7].data[m]+"','"+b.content.yearObject.data[8].original_data[m]+"','"+b.content.yearObject.data[8].data[m]+"','"+b.content.yearObject.data[9].original_data[m]+"','"+b.content.yearObject.data[9].data[m]+"'"+",'"+b.content.yearObject.data[10].original_data[m]+"','"+b.content.yearObject.data[10].data[m]+"','"+b.content.yearObject.data[11].original_data[m]+"','"+b.content.yearObject.data[11].data[m]+"','"+b.content.yearObject.data[12].original_data[m]+"','"+b.content.yearObject.data[12].data[m]+"'"+",'"+b.content.yearObject.data[13].original_data[m]+"','"+b.content.yearObject.data[13].data[m]+"')",a.executeSql(n)}),a+1!=noDataDateDates.length)return $timeout(function(){e(a+1)},1500);a+1==noDataDateDates.length&&(toaster.pop({type:"success",title:"Success",body:"Download successfully , please waiting...",timeout:POPTIMEOUT}),n={},dataBase.transaction(function(a){var b="SELECT * FROM sensorQuarterDataTable WHERE time BETWEEN'"+$scope.default_startTime+"' AND '"+$scope.default_endTime+"' AND device_guid = '"+$scope.device_guid+"' ORDER BY time";a.executeSql(b,[],function(a,b){var V,c=[],d=[],e={original_name:"Carbon_Dioxide(ppm)",name:"Carbon_Dioxide(ppm)"},f=[],g=[],h={original_name:"Substrate_PH(PH)",name:"Substrate_PH(PH)"},i=[],j=[],k={original_name:"Substrate_Conductivity(mS/cm)",name:"Substrate_Conductivity(mS/cm)"},l=[],m=[],o={original_name:"Substrate_Temperature(°C)",name:"Substrate_Temperature(°C)"},p=[],q=[],r={original_name:"Air_Temperature(°C)",name:"Air_Temperature(°C)"},s=[],t=[],u={original_name:"Ppfd(μmol㎡/s)",name:"Ppfd(100*μmol㎡/s)"},v=[],w=[],x={original_name:"Liquid_PH(PH)",name:"Liquid_PH(PH)"},y=[],z=[],A={original_name:"Substrate_Humidity(%)",name:"Substrate_Humidity(%)"},B=[],C=[],D={original_name:"Liquid_DOC(mg/l)",name:"Liquid_DOC(mg/l)"},E=[],F=[],G={original_name:"Liquid_Conductivity(mS/cm)",name:"Liquid_Conductivity(mS/cm)"},H=[],I=[],J={original_name:"Air_Humidity(%)",name:"Air_Humidity(%)"},K=[],L=[],M={original_name:"Substrate_DOC(mg/l)",name:"Substrate_DOC(mg/l)"},N=[],O=[],P={original_name:"Illuminance(lux)",name:"Illuminance(100*lux)"},Q=[],R=[],S={original_name:"Lai()",name:"Lai()"},T=[],U=[];if(b)for(V=0;V<b.rows.length;V++)c.push(b.rows[V].time),f.push(parseFloat(b.rows[V].Carbon_Dioxide_original)),g.push(parseFloat(b.rows[V].Carbon_Dioxide)),i.push(parseFloat(b.rows[V].Substrate_PH_original)),j.push(parseFloat(b.rows[V].Substrate_PH)),l.push(parseFloat(b.rows[V].Substrate_Conductivity_original)),m.push(parseFloat(b.rows[V].Substrate_Conductivity)),p.push(parseFloat(b.rows[V].Substrate_Temperature_original)),q.push(parseFloat(b.rows[V].Substrate_Temperature)),s.push(parseFloat(b.rows[V].Air_Temperature_original)),t.push(parseFloat(b.rows[V].Air_Temperature)),v.push(parseFloat(b.rows[V].Ppfd_original)),w.push(parseFloat(b.rows[V].Ppfd)),y.push(parseFloat(b.rows[V].Liquid_PH_original)),z.push(parseFloat(b.rows[V].Liquid_PH)),B.push(parseFloat(b.rows[V].Substrate_Humidity_original)),C.push(parseFloat(b.rows[V].Substrate_Humidity)),E.push(parseFloat(b.rows[V].Liquid_DOC_original)),F.push(parseFloat(b.rows[V].Liquid_DOC)),H.push(parseFloat(b.rows[V].Liquid_Conductivity_original)),I.push(parseFloat(b.rows[V].Liquid_Conductivity)),K.push(parseFloat(b.rows[V].Air_Humidity_original)),L.push(parseFloat(b.rows[V].Air_Humidity)),N.push(parseFloat(b.rows[V].Substrate_DOC_original)),O.push(parseFloat(b.rows[V].Substrate_DOC)),Q.push(parseFloat(b.rows[V].Illuminance_original)),R.push(parseFloat(b.rows[V].Illuminance)),T.push(parseFloat(b.rows[V].Lai_original)),U.push(parseFloat(b.rows[V].Lai));e.original_data=f,e.data=g,h.original_data=i,h.data=j,k.original_data=l,k.data=m,o.original_data=p,o.data=q,r.original_data=s,r.data=t,u.original_data=v,u.data=w,x.original_data=y,x.data=z,A.original_data=B,A.data=C,D.original_data=E,D.data=F,G.original_data=H,G.data=I,J.original_data=K,J.data=L,M.original_data=N,M.data=O,P.original_data=Q,P.data=R,S.original_data=T,S.data=U,d.push(r),d.push(J),d.push(o),d.push(A),d.push(h),d.push(e),d.push(P),d.push(k),d.push(u),d.push(x),d.push(S),d.push(G),d.push(D),d.push(M),n.data=d,n.time=c,new Highcharts.Chart({chart:{renderTo:"container",backgroundColor:"rgba(0,0,0,0)"},colors:["#000000","#CE0000","#FF79BC","#921AFF","#7D7DFF","#00CACA","#93FF93","#FF8040","#A8FF24","#AD5A5A","#8080C0","#A5A552","#424200","#642100"],title:{text:"Sensor History Data",x:-20},exporting:{enabled:!1,filename:"horticulture growing condition datasheet"},subtitle:{text:"Source Region: "+regionName,x:-20},marker:!1,noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",borderRadius:10,pointFormat:'<tr><td>{series.name}: </td><td style="text-align: right"><b>{point.y}</b></td></tr>',valueDecimals:3},legend:{align:"center",verticalAlign:"bottom"},series:n.data}),$scope.downLoad=function(){window.open("http://73.231.41.102:8080/sensor/history/export?user_id="+$cookieStore.get("user_id")+"&region_guid="+regionId+"&gateway_id="+gatewayId+"&start_time="+encodeURI(UTC_startTime)+"&end_time="+encodeURI(UTC_endTime))},$scope.toChartDetail=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,o;n.data||0!=n.data.length?($scope.chartDetailShow=!$scope.chartDetailShow,$scope.lastNextShow=!$scope.lastNextShow,$scope.chartShow=!$scope.chartShow,a=new Highcharts.Chart({chart:{renderTo:"chart_container"},title:{text:n.data[0].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[0].original_name+" condition datasheet"},colors:["#000000"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[0].original_name,data:n.data[0].original_data}]}),$scope.ExportChartDetailToExcel=function(){a.downloadXLS()},b=new Highcharts.Chart({chart:{renderTo:"chart_container1"},title:{text:n.data[1].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[1].original_name+" condition datasheet"},colors:["#CE0000"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[1].original_name,data:n.data[1].original_data}]}),$scope.ExportChartDetailToExcel1=function(){b.downloadXLS()},c=new Highcharts.Chart({chart:{renderTo:"chart_container2"},title:{text:n.data[2].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[2].original_name+" condition datasheet"},colors:["#FF79BC"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[2].original_name,data:n.data[2].original_data}]}),$scope.ExportChartDetailToExcel2=function(){c.downloadXLS()},d=new Highcharts.Chart({chart:{renderTo:"chart_container3"},title:{text:n.data[3].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[3].original_name+" condition datasheet"},colors:["#921AFF"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[3].original_name,data:n.data[3].original_data}]}),$scope.ExportChartDetailToExcel3=function(){d.downloadXLS()},e=new Highcharts.Chart({chart:{renderTo:"chart_container4"},title:{text:n.data[4].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[4].original_name+" condition datasheet"},colors:["#7D7DFF"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[4].original_name,data:n.data[4].original_data}]}),$scope.ExportChartDetailToExcel4=function(){e.downloadXLS()},f=new Highcharts.Chart({chart:{renderTo:"chart_container5"},title:{text:n.data[5].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[5].original_name+" condition datasheet"},colors:["#00CACA"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[5].original_name,data:n.data[5].original_data}]}),$scope.ExportChartDetailToExcel5=function(){f.downloadXLS()},g=new Highcharts.Chart({chart:{renderTo:"chart_container6"},title:{text:n.data[6].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[6].original_name+" condition datasheet"},colors:["#93FF93"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[6].original_name,data:n.data[6].original_data}]}),$scope.ExportChartDetailToExcel6=function(){g.downloadXLS()},h=new Highcharts.Chart({chart:{renderTo:"chart_container7"},title:{text:n.data[7].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[7].original_name+" condition datasheet"},colors:["#FF8040"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[7].original_name,data:n.data[7].original_data}]}),$scope.ExportChartDetailToExcel7=function(){h.downloadXLS()},i=new Highcharts.Chart({chart:{renderTo:"chart_container8"},title:{text:n.data[8].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[8].original_name+" condition datasheet"},colors:["#A8FF24"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[8].original_name,data:n.data[8].original_data}]}),$scope.ExportChartDetailToExcel8=function(){i.downloadXLS()},j=new Highcharts.Chart({chart:{renderTo:"chart_container9"},title:{text:n.data[9].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[9].original_name+" condition datasheet"},colors:["#AD5A5A"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[9].original_name,data:n.data[9].original_data}]}),$scope.ExportChartDetailToExcel9=function(){j.downloadXLS()},k=new Highcharts.Chart({chart:{renderTo:"chart_container10"},title:{text:n.data[10].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[10].original_name+" condition datasheet"},colors:["#8080C0"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[10].original_name,data:n.data[10].original_data}]}),$scope.ExportChartDetailToExcel10=function(){k.downloadXLS()},l=new Highcharts.Chart({chart:{renderTo:"chart_container11"},title:{text:n.data[11].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[11].original_name+" condition datasheet"},colors:["#A5A552"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[11].original_name,data:n.data[11].original_data}]}),$scope.ExportChartDetailToExcel11=function(){l.downloadXLS()},m=new Highcharts.Chart({chart:{renderTo:"chart_container12"},title:{text:n.data[12].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[12].original_name+" condition datasheet"},colors:["#424200"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[12].original_name,data:n.data[12].original_data}]}),$scope.ExportChartDetailToExcel12=function(){m.downloadXLS()},o=new Highcharts.Chart({chart:{renderTo:"chart_container13"},title:{text:n.data[13].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[13].original_name+" condition datasheet"},colors:["#642100"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[13].original_name,data:n.data[13].original_data}]}),$scope.ExportChartDetailToExcel13=function(){o.downloadXLS()}):toaster.pop({type:"error",title:"Error",body:"There is no data to display",timeout:POPTIMEOUT})}})}))}else toaster.pop({type:"error",title:"Error",body:b.message,timeout:POPTIMEOUT})})}var d,f;return 0==c.rows.length&&noDataDateDates.push(sqls[a].substring(54,64)),a+1!=newDate.length?$timeout(function(){selectFromTable(a+1)},1):(noDataDateDates&&noDataDateDates.length>0?($scope.delay=0,$scope.minDuration=0,$scope.message="0",$scope.backdrop=!1,$scope.promise=null,$scope.templateUrl="./pages/down-loading-template.html",$scope.vm={},$scope.vm.total=noDataDateDates.length,d=0,e(d)):noDataDateDates&&0!=noDataDateDates.length||(f={},dataBase.transaction(function(a){var b="SELECT * FROM sensorQuarterDataTable WHERE time BETWEEN'"+$scope.default_startTime+"' AND '"+$scope.default_endTime+"' AND device_guid = '"+$scope.device_guid+"' ORDER BY time";a.executeSql(b,[],function(a,b){var V,c=[],d=[],e={original_name:"Carbon_Dioxide(ppm)",name:"Carbon_Dioxide(ppm)"},g=[],h=[],i={original_name:"Substrate_PH(PH)",name:"Substrate_PH(PH)"},j=[],k=[],l={original_name:"Substrate_Conductivity(mS/cm)",name:"Substrate_Conductivity(mS/cm)"},m=[],n=[],o={original_name:"Substrate_Temperature(°C)",name:"Substrate_Temperature(°C)"},p=[],q=[],r={original_name:"Air_Temperature(°C)",name:"Air_Temperature(°C)"},s=[],t=[],u={original_name:"Ppfd(μmol㎡/s)",name:"Ppfd(100*μmol㎡/s)"},v=[],w=[],x={original_name:"Liquid_PH(PH)",name:"Liquid_PH(PH)"},y=[],z=[],A={original_name:"Substrate_Humidity(%)",name:"Substrate_Humidity(%)"},B=[],C=[],D={original_name:"Liquid_DOC(mg/l)",name:"Liquid_DOC(mg/l)"},E=[],F=[],G={original_name:"Liquid_Conductivity(mS/cm)",name:"Liquid_Conductivity(mS/cm)"},H=[],I=[],J={original_name:"Air_Humidity(%)",name:"Air_Humidity(%)"},K=[],L=[],M={original_name:"Substrate_DOC(mg/l)",name:"Substrate_DOC(mg/l)"},N=[],O=[],P={original_name:"Illuminance(lux)",name:"Illuminance(100*lux)"},Q=[],R=[],S={original_name:"Lai()",name:"Lai()"},T=[],U=[];if(b)for(V=0;V<b.rows.length;V++)c.push(b.rows[V].time),g.push(parseFloat(b.rows[V].Carbon_Dioxide_original)),h.push(parseFloat(b.rows[V].Carbon_Dioxide)),j.push(parseFloat(b.rows[V].Substrate_PH_original)),k.push(parseFloat(b.rows[V].Substrate_PH)),m.push(parseFloat(b.rows[V].Substrate_Conductivity_original)),n.push(parseFloat(b.rows[V].Substrate_Conductivity)),p.push(parseFloat(b.rows[V].Substrate_Temperature_original)),q.push(parseFloat(b.rows[V].Substrate_Temperature)),s.push(parseFloat(b.rows[V].Air_Temperature_original)),t.push(parseFloat(b.rows[V].Air_Temperature)),v.push(parseFloat(b.rows[V].Ppfd_original)),w.push(parseFloat(b.rows[V].Ppfd)),y.push(parseFloat(b.rows[V].Liquid_PH_original)),z.push(parseFloat(b.rows[V].Liquid_PH)),B.push(parseFloat(b.rows[V].Substrate_Humidity_original)),C.push(parseFloat(b.rows[V].Substrate_Humidity)),E.push(parseFloat(b.rows[V].Liquid_DOC_original)),F.push(parseFloat(b.rows[V].Liquid_DOC)),H.push(parseFloat(b.rows[V].Liquid_Conductivity_original)),I.push(parseFloat(b.rows[V].Liquid_Conductivity)),K.push(parseFloat(b.rows[V].Air_Humidity_original)),L.push(parseFloat(b.rows[V].Air_Humidity)),N.push(parseFloat(b.rows[V].Substrate_DOC_original)),O.push(parseFloat(b.rows[V].Substrate_DOC)),Q.push(parseFloat(b.rows[V].Illuminance_original)),R.push(parseFloat(b.rows[V].Illuminance)),T.push(parseFloat(b.rows[V].Lai_original)),U.push(parseFloat(b.rows[V].Lai));e.original_data=g,e.data=h,i.original_data=j,i.data=k,l.original_data=m,l.data=n,o.original_data=p,o.data=q,r.original_data=s,r.data=t,u.original_data=v,u.data=w,x.original_data=y,x.data=z,A.original_data=B,A.data=C,D.original_data=E,D.data=F,G.original_data=H,G.data=I,J.original_data=K,J.data=L,M.original_data=N,M.data=O,P.original_data=Q,P.data=R,S.original_data=T,S.data=U,d.push(r),d.push(J),d.push(o),d.push(A),d.push(i),d.push(e),d.push(P),d.push(l),d.push(u),d.push(x),d.push(S),d.push(G),d.push(D),d.push(M),f.data=d,f.time=c,new Highcharts.Chart({chart:{renderTo:"container",backgroundColor:"rgba(0,0,0,0)"},colors:["#000000","#CE0000","#FF79BC","#921AFF","#7D7DFF","#00CACA","#93FF93","#FF8040","#A8FF24","#AD5A5A","#8080C0","#A5A552","#424200","#642100"],title:{text:"Sensor History Data",x:-20},exporting:{enabled:!1,filename:"horticulture growing condition datasheet"},subtitle:{text:"Source Region: "+regionName,x:-20},marker:!1,noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",borderRadius:10,pointFormat:'<tr><td>{series.name}: </td><td style="text-align: right"><b>{point.y}</b></td></tr>',valueDecimals:3},legend:{align:"center",verticalAlign:"bottom"},series:f.data}),$scope.downLoad=function(){window.open("http://73.231.41.102:8080/sensor/history/export?user_id="+$cookieStore.get("user_id")+"&region_guid="+regionId+"&gateway_id="+gatewayId+"&start_time="+encodeURI(UTC_startTime)+"&end_time="+encodeURI(UTC_endTime))},$scope.toChartDetail=function(){var a,b,c,d,e,g,h,i,j,k,l,m,n,o;f.data||0!=f.data.length?($scope.chartDetailShow=!$scope.chartDetailShow,$scope.lastNextShow=!$scope.lastNextShow,$scope.chartShow=!$scope.chartShow,a=new Highcharts.Chart({chart:{renderTo:"chart_container"},title:{text:f.data[0].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[0].original_name+" condition datasheet"},colors:["#000000"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[0].original_name,data:f.data[0].original_data}]}),$scope.ExportChartDetailToExcel=function(){a.downloadXLS()},b=new Highcharts.Chart({chart:{renderTo:"chart_container1"},title:{text:f.data[1].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[1].original_name+" condition datasheet"},colors:["#CE0000"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[1].original_name,data:f.data[1].original_data}]}),$scope.ExportChartDetailToExcel1=function(){b.downloadXLS()},c=new Highcharts.Chart({chart:{renderTo:"chart_container2"},title:{text:f.data[2].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[2].original_name+" condition datasheet"},colors:["#FF79BC"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[2].original_name,data:f.data[2].original_data}]}),$scope.ExportChartDetailToExcel2=function(){c.downloadXLS()},d=new Highcharts.Chart({chart:{renderTo:"chart_container3"},title:{text:f.data[3].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[3].original_name+" condition datasheet"},colors:["#921AFF"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[3].original_name,data:f.data[3].original_data}]}),$scope.ExportChartDetailToExcel3=function(){d.downloadXLS()},e=new Highcharts.Chart({chart:{renderTo:"chart_container4"},title:{text:f.data[4].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[4].original_name+" condition datasheet"},colors:["#7D7DFF"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[4].original_name,data:f.data[4].original_data}]}),$scope.ExportChartDetailToExcel4=function(){e.downloadXLS()},g=new Highcharts.Chart({chart:{renderTo:"chart_container5"},title:{text:f.data[5].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[5].original_name+" condition datasheet"},colors:["#00CACA"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[5].original_name,data:f.data[5].original_data}]}),$scope.ExportChartDetailToExcel5=function(){g.downloadXLS()},h=new Highcharts.Chart({chart:{renderTo:"chart_container6"},title:{text:f.data[6].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[6].original_name+" condition datasheet"},colors:["#93FF93"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[6].original_name,data:f.data[6].original_data}]}),$scope.ExportChartDetailToExcel6=function(){h.downloadXLS()},i=new Highcharts.Chart({chart:{renderTo:"chart_container7"},title:{text:f.data[7].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[7].original_name+" condition datasheet"},colors:["#FF8040"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[7].original_name,data:f.data[7].original_data}]}),$scope.ExportChartDetailToExcel7=function(){i.downloadXLS()},j=new Highcharts.Chart({chart:{renderTo:"chart_container8"},title:{text:f.data[8].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[8].original_name+" condition datasheet"},colors:["#A8FF24"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[8].original_name,data:f.data[8].original_data}]}),$scope.ExportChartDetailToExcel8=function(){j.downloadXLS()
            },k=new Highcharts.Chart({chart:{renderTo:"chart_container9"},title:{text:f.data[9].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[9].original_name+" condition datasheet"},colors:["#AD5A5A"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[9].original_name,data:f.data[9].original_data}]}),$scope.ExportChartDetailToExcel9=function(){k.downloadXLS()},l=new Highcharts.Chart({chart:{renderTo:"chart_container10"},title:{text:f.data[10].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[10].original_name+" condition datasheet"},colors:["#8080C0"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[10].original_name,data:f.data[10].original_data}]}),$scope.ExportChartDetailToExcel10=function(){l.downloadXLS()},m=new Highcharts.Chart({chart:{renderTo:"chart_container11"},title:{text:f.data[11].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[11].original_name+" condition datasheet"},colors:["#A5A552"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[11].original_name,data:f.data[11].original_data}]}),$scope.ExportChartDetailToExcel11=function(){m.downloadXLS()},n=new Highcharts.Chart({chart:{renderTo:"chart_container12"},title:{text:f.data[12].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[12].original_name+" condition datasheet"},colors:["#424200"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[12].original_name,data:f.data[12].original_data}]}),$scope.ExportChartDetailToExcel12=function(){n.downloadXLS()},o=new Highcharts.Chart({chart:{renderTo:"chart_container13"},title:{text:f.data[13].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[13].original_name+" condition datasheet"},colors:["#642100"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[13].original_name,data:f.data[13].original_data}]}),$scope.ExportChartDetailToExcel13=function(){o.downloadXLS()}):toaster.pop({type:"error",title:"Error",body:"There is no data to display",timeout:POPTIMEOUT})}})})),void 0)})})}var time1,time2,dayDiff,newDate,i,sqls,y,noDataDateDates,x;for(toaster.pop({type:"success",title:"",body:"Please waiting ...",timeout:POPTIMEOUT}),$scope.default_endTime=new Date(new Date($scope.default_endTime.getTime()-864e5).Format("yyyy-MM-dd hh:mm:ss").substring(0,10)+" 23:59:59").Format("yyyy-MM-dd hh:mm:ss"),$scope.default_startTime=new Date(new Date($scope.default_endTime).getTime()-1e3*60*60*$scope.my.timeDiff).Format("yyyy-MM-dd hh:mm:ss"),UTC_startTime=$scope.format(new Date($scope.default_startTime).toUTCString(),"yyyy-MM-dd HH:mm:ss"),UTC_endTime=$scope.format(new Date($scope.default_endTime).toUTCString(),"yyyy-MM-dd HH:mm:ss"),time1=$scope.default_startTime.substring(0,10),time2=$scope.default_endTime.substring(0,10),dayDiff=DateDiff(time1,time2)+1,newDate=[],i=0;dayDiff>i;i++)newDate[i]=getNewDay(time1,i);for(sqls=[],y=0;y<newDate.length;y++)sqls[y]="SELECT * FROM sensorYearDataTable WHERE time BETWEEN '"+newDate[y]+" 00:00:00"+"' AND '"+newDate[y]+" 23:59:59"+"' AND device_guid = '"+$scope.device_guid+"'";noDataDateDates=[],x=0,selectFromTable(x);
        }else if($scope.my.standard == 'HalfYear'){
            function selectFromTable(a){dataBase.transaction(function(b){b.executeSql(sqls[a],[],function(b,c){function e(a){var b={table_device_guid:$scope.device_guid,device_name:"",gateway_id:gatewayId,start_time:$scope.format(new Date(noDataDateDates[a]+" 00:00:00").toUTCString(),"yyyy-MM-dd HH:mm:ss"),end_time:$scope.format(new Date(noDataDateDates[a]+" 23:59:59").toUTCString(),"yyyy-MM-dd HH:mm:ss")};$scope.getSensorDataProm=AuthService.myHttp(token,b,"GET","sensor/sensorOneDay").then(function(b){var c,d,f,g,h,i,j,k,l,m,n;if("0"==b.code){for($scope.message=Math.round(100*((a+1)/$scope.vm.total)),c=[],d=[],f=[],g=[],h=[],i=[],j=[],k=[],l=0;l<b.content.time.length;l++)d[l]=new Date(b.content.time[l]),c[l]=d[l].getTime(),c[l]-=1e3*60*(new Date).getTimezoneOffset(),c[l]=new Date(c[l]).Format("yyyy-MM-dd hh:mm:ss");for(m=0;m<b.content.quarterObject.time.length;m++)f[m]=new Date(b.content.quarterObject.time[m]),i[m]=f[m].getTime(),i[m]-=1e3*60*(new Date).getTimezoneOffset(),i[m]=new Date(i[m]).Format("yyyy-MM-dd hh:mm:ss");for(m=0;m<b.content.halfYearObject.time.length;m++)g[m]=new Date(b.content.halfYearObject.time[m]),j[m]=g[m].getTime(),j[m]-=1e3*60*(new Date).getTimezoneOffset(),j[m]=new Date(j[m]).Format("yyyy-MM-dd hh:mm:ss");for(m=0;m<b.content.yearObject.time.length;m++)h[m]=new Date(b.content.yearObject.time[m]),k[m]=h[m].getTime(),k[m]-=1e3*60*(new Date).getTimezoneOffset(),k[m]=new Date(k[m]).Format("yyyy-MM-dd hh:mm:ss");if(dataBase.transaction(function(a){var d,e,f,g,h,l,m,n;for(d=0;d<b.content.time.length;d++)e="INSERT INTO sensorDataTable(device_guid,time,Carbon_Dioxide_original,Carbon_Dioxide,Substrate_PH_original,Substrate_PH,Substrate_Conductivity_original,Substrate_Conductivity,Substrate_Temperature_original,Substrate_Temperature,Air_Temperature_original,Air_Temperature,Ppfd_original,Ppfd,Liquid_PH_original,Liquid_PH,Substrate_Humidity_original,Substrate_Humidity,Liquid_DOC_original,Liquid_DOC,Liquid_Conductivity_original,Liquid_Conductivity,Air_Humidity_original,Air_Humidity,Substrate_DOC_original,Substrate_DOC,Illuminance_original,Illuminance,Lai_original,Lai) values ('"+$scope.device_guid+"','"+c[d]+"','"+b.content.data[0].original_data[d]+"','"+b.content.data[0].data[d]+"'"+",'"+b.content.data[1].original_data[d]+"','"+b.content.data[1].data[d]+"','"+b.content.data[2].original_data[d]+"','"+b.content.data[2].data[d]+"','"+b.content.data[3].original_data[d]+"','"+b.content.data[3].data[d]+"'"+",'"+b.content.data[4].original_data[d]+"','"+b.content.data[4].data[d]+"','"+b.content.data[5].original_data[d]+"','"+b.content.data[5].data[d]+"','"+b.content.data[6].original_data[d]+"','"+b.content.data[6].data[d]+"'"+",'"+b.content.data[7].original_data[d]+"','"+b.content.data[7].data[d]+"','"+b.content.data[8].original_data[d]+"','"+b.content.data[8].data[d]+"','"+b.content.data[9].original_data[d]+"','"+b.content.data[9].data[d]+"'"+",'"+b.content.data[10].original_data[d]+"','"+b.content.data[10].data[d]+"','"+b.content.data[11].original_data[d]+"','"+b.content.data[11].data[d]+"','"+b.content.data[12].original_data[d]+"','"+b.content.data[12].data[d]+"'"+",'"+b.content.data[13].original_data[d]+"','"+b.content.data[13].data[d]+"')",a.executeSql(e);for(f=0;f<b.content.quarterObject.time.length;f++)g="INSERT INTO sensorQuarterDataTable(device_guid,time,Carbon_Dioxide_original,Carbon_Dioxide,Substrate_PH_original,Substrate_PH,Substrate_Conductivity_original,Substrate_Conductivity,Substrate_Temperature_original,Substrate_Temperature,Air_Temperature_original,Air_Temperature,Ppfd_original,Ppfd,Liquid_PH_original,Liquid_PH,Substrate_Humidity_original,Substrate_Humidity,Liquid_DOC_original,Liquid_DOC,Liquid_Conductivity_original,Liquid_Conductivity,Air_Humidity_original,Air_Humidity,Substrate_DOC_original,Substrate_DOC,Illuminance_original,Illuminance,Lai_original,Lai) values ('"+$scope.device_guid+"','"+i[f]+"','"+b.content.quarterObject.data[0].original_data[f]+"','"+b.content.quarterObject.data[0].data[f]+"'"+",'"+b.content.quarterObject.data[1].original_data[f]+"','"+b.content.quarterObject.data[1].data[f]+"','"+b.content.quarterObject.data[2].original_data[f]+"','"+b.content.quarterObject.data[2].data[f]+"','"+b.content.quarterObject.data[3].original_data[f]+"','"+b.content.quarterObject.data[3].data[f]+"'"+",'"+b.content.quarterObject.data[4].original_data[f]+"','"+b.content.quarterObject.data[4].data[f]+"','"+b.content.quarterObject.data[5].original_data[f]+"','"+b.content.quarterObject.data[5].data[f]+"','"+b.content.quarterObject.data[6].original_data[f]+"','"+b.content.quarterObject.data[6].data[f]+"'"+",'"+b.content.quarterObject.data[7].original_data[f]+"','"+b.content.quarterObject.data[7].data[f]+"','"+b.content.quarterObject.data[8].original_data[f]+"','"+b.content.quarterObject.data[8].data[f]+"','"+b.content.quarterObject.data[9].original_data[f]+"','"+b.content.quarterObject.data[9].data[f]+"'"+",'"+b.content.quarterObject.data[10].original_data[f]+"','"+b.content.quarterObject.data[10].data[f]+"','"+b.content.quarterObject.data[11].original_data[f]+"','"+b.content.quarterObject.data[11].data[f]+"','"+b.content.quarterObject.data[12].original_data[f]+"','"+b.content.quarterObject.data[12].data[f]+"'"+",'"+b.content.quarterObject.data[13].original_data[f]+"','"+b.content.quarterObject.data[13].data[f]+"')",a.executeSql(g);for(h=0;h<b.content.quarterObject.time.length;h++)l="INSERT INTO sensorHalfYearDataTable(device_guid,time,Carbon_Dioxide_original,Carbon_Dioxide,Substrate_PH_original,Substrate_PH,Substrate_Conductivity_original,Substrate_Conductivity,Substrate_Temperature_original,Substrate_Temperature,Air_Temperature_original,Air_Temperature,Ppfd_original,Ppfd,Liquid_PH_original,Liquid_PH,Substrate_Humidity_original,Substrate_Humidity,Liquid_DOC_original,Liquid_DOC,Liquid_Conductivity_original,Liquid_Conductivity,Air_Humidity_original,Air_Humidity,Substrate_DOC_original,Substrate_DOC,Illuminance_original,Illuminance,Lai_original,Lai) values ('"+$scope.device_guid+"','"+j[h]+"','"+b.content.halfYearObject.data[0].original_data[h]+"','"+b.content.halfYearObject.data[0].data[h]+"'"+",'"+b.content.halfYearObject.data[1].original_data[h]+"','"+b.content.halfYearObject.data[1].data[h]+"','"+b.content.halfYearObject.data[2].original_data[h]+"','"+b.content.halfYearObject.data[2].data[h]+"','"+b.content.halfYearObject.data[3].original_data[h]+"','"+b.content.halfYearObject.data[3].data[h]+"'"+",'"+b.content.halfYearObject.data[4].original_data[h]+"','"+b.content.halfYearObject.data[4].data[h]+"','"+b.content.halfYearObject.data[5].original_data[h]+"','"+b.content.halfYearObject.data[5].data[h]+"','"+b.content.halfYearObject.data[6].original_data[h]+"','"+b.content.halfYearObject.data[6].data[h]+"'"+",'"+b.content.halfYearObject.data[7].original_data[h]+"','"+b.content.halfYearObject.data[7].data[h]+"','"+b.content.halfYearObject.data[8].original_data[h]+"','"+b.content.halfYearObject.data[8].data[h]+"','"+b.content.halfYearObject.data[9].original_data[h]+"','"+b.content.halfYearObject.data[9].data[h]+"'"+",'"+b.content.halfYearObject.data[10].original_data[h]+"','"+b.content.halfYearObject.data[10].data[h]+"','"+b.content.halfYearObject.data[11].original_data[h]+"','"+b.content.halfYearObject.data[11].data[h]+"','"+b.content.halfYearObject.data[12].original_data[h]+"','"+b.content.halfYearObject.data[12].data[h]+"'"+",'"+b.content.halfYearObject.data[13].original_data[h]+"','"+b.content.halfYearObject.data[13].data[h]+"')",a.executeSql(l);for(m=0;m<b.content.yearObject.time.length;m++)n="INSERT INTO sensorYearDataTable(device_guid,time,Carbon_Dioxide_original,Carbon_Dioxide,Substrate_PH_original,Substrate_PH,Substrate_Conductivity_original,Substrate_Conductivity,Substrate_Temperature_original,Substrate_Temperature,Air_Temperature_original,Air_Temperature,Ppfd_original,Ppfd,Liquid_PH_original,Liquid_PH,Substrate_Humidity_original,Substrate_Humidity,Liquid_DOC_original,Liquid_DOC,Liquid_Conductivity_original,Liquid_Conductivity,Air_Humidity_original,Air_Humidity,Substrate_DOC_original,Substrate_DOC,Illuminance_original,Illuminance,Lai_original,Lai) values ('"+$scope.device_guid+"','"+k[m]+"','"+b.content.yearObject.data[0].original_data[m]+"','"+b.content.yearObject.data[0].data[m]+"'"+",'"+b.content.yearObject.data[1].original_data[m]+"','"+b.content.yearObject.data[1].data[m]+"','"+b.content.yearObject.data[2].original_data[m]+"','"+b.content.yearObject.data[2].data[m]+"','"+b.content.yearObject.data[3].original_data[m]+"','"+b.content.yearObject.data[3].data[m]+"'"+",'"+b.content.yearObject.data[4].original_data[m]+"','"+b.content.yearObject.data[4].data[m]+"','"+b.content.yearObject.data[5].original_data[m]+"','"+b.content.yearObject.data[5].data[m]+"','"+b.content.yearObject.data[6].original_data[m]+"','"+b.content.yearObject.data[6].data[m]+"'"+",'"+b.content.yearObject.data[7].original_data[m]+"','"+b.content.yearObject.data[7].data[m]+"','"+b.content.yearObject.data[8].original_data[m]+"','"+b.content.yearObject.data[8].data[m]+"','"+b.content.yearObject.data[9].original_data[m]+"','"+b.content.yearObject.data[9].data[m]+"'"+",'"+b.content.yearObject.data[10].original_data[m]+"','"+b.content.yearObject.data[10].data[m]+"','"+b.content.yearObject.data[11].original_data[m]+"','"+b.content.yearObject.data[11].data[m]+"','"+b.content.yearObject.data[12].original_data[m]+"','"+b.content.yearObject.data[12].data[m]+"'"+",'"+b.content.yearObject.data[13].original_data[m]+"','"+b.content.yearObject.data[13].data[m]+"')",a.executeSql(n)}),a+1!=noDataDateDates.length)return $timeout(function(){e(a+1)},1500);a+1==noDataDateDates.length&&(toaster.pop({type:"success",title:"Success",body:"Download successfully , please waiting...",timeout:POPTIMEOUT}),n={},dataBase.transaction(function(a){var b="SELECT * FROM sensorHalfYearDataTable WHERE time BETWEEN'"+$scope.default_startTime+"' AND '"+$scope.default_endTime+"' AND device_guid = '"+$scope.device_guid+"' ORDER BY time";a.executeSql(b,[],function(a,b){var V,c=[],d=[],e={original_name:"Carbon_Dioxide(ppm)",name:"Carbon_Dioxide(ppm)"},f=[],g=[],h={original_name:"Substrate_PH(PH)",name:"Substrate_PH(PH)"},i=[],j=[],k={original_name:"Substrate_Conductivity(mS/cm)",name:"Substrate_Conductivity(mS/cm)"},l=[],m=[],o={original_name:"Substrate_Temperature(°C)",name:"Substrate_Temperature(°C)"},p=[],q=[],r={original_name:"Air_Temperature(°C)",name:"Air_Temperature(°C)"},s=[],t=[],u={original_name:"Ppfd(μmol㎡/s)",name:"Ppfd(100*μmol㎡/s)"},v=[],w=[],x={original_name:"Liquid_PH(PH)",name:"Liquid_PH(PH)"},y=[],z=[],A={original_name:"Substrate_Humidity(%)",name:"Substrate_Humidity(%)"},B=[],C=[],D={original_name:"Liquid_DOC(mg/l)",name:"Liquid_DOC(mg/l)"},E=[],F=[],G={original_name:"Liquid_Conductivity(mS/cm)",name:"Liquid_Conductivity(mS/cm)"},H=[],I=[],J={original_name:"Air_Humidity(%)",name:"Air_Humidity(%)"},K=[],L=[],M={original_name:"Substrate_DOC(mg/l)",name:"Substrate_DOC(mg/l)"},N=[],O=[],P={original_name:"Illuminance(lux)",name:"Illuminance(100*lux)"},Q=[],R=[],S={original_name:"Lai()",name:"Lai()"},T=[],U=[];if(b)for(V=0;V<b.rows.length;V++)c.push(b.rows[V].time),f.push(parseFloat(b.rows[V].Carbon_Dioxide_original)),g.push(parseFloat(b.rows[V].Carbon_Dioxide)),i.push(parseFloat(b.rows[V].Substrate_PH_original)),j.push(parseFloat(b.rows[V].Substrate_PH)),l.push(parseFloat(b.rows[V].Substrate_Conductivity_original)),m.push(parseFloat(b.rows[V].Substrate_Conductivity)),p.push(parseFloat(b.rows[V].Substrate_Temperature_original)),q.push(parseFloat(b.rows[V].Substrate_Temperature)),s.push(parseFloat(b.rows[V].Air_Temperature_original)),t.push(parseFloat(b.rows[V].Air_Temperature)),v.push(parseFloat(b.rows[V].Ppfd_original)),w.push(parseFloat(b.rows[V].Ppfd)),y.push(parseFloat(b.rows[V].Liquid_PH_original)),z.push(parseFloat(b.rows[V].Liquid_PH)),B.push(parseFloat(b.rows[V].Substrate_Humidity_original)),C.push(parseFloat(b.rows[V].Substrate_Humidity)),E.push(parseFloat(b.rows[V].Liquid_DOC_original)),F.push(parseFloat(b.rows[V].Liquid_DOC)),H.push(parseFloat(b.rows[V].Liquid_Conductivity_original)),I.push(parseFloat(b.rows[V].Liquid_Conductivity)),K.push(parseFloat(b.rows[V].Air_Humidity_original)),L.push(parseFloat(b.rows[V].Air_Humidity)),N.push(parseFloat(b.rows[V].Substrate_DOC_original)),O.push(parseFloat(b.rows[V].Substrate_DOC)),Q.push(parseFloat(b.rows[V].Illuminance_original)),R.push(parseFloat(b.rows[V].Illuminance)),T.push(parseFloat(b.rows[V].Lai_original)),U.push(parseFloat(b.rows[V].Lai));e.original_data=f,e.data=g,h.original_data=i,h.data=j,k.original_data=l,k.data=m,o.original_data=p,o.data=q,r.original_data=s,r.data=t,u.original_data=v,u.data=w,x.original_data=y,x.data=z,A.original_data=B,A.data=C,D.original_data=E,D.data=F,G.original_data=H,G.data=I,J.original_data=K,J.data=L,M.original_data=N,M.data=O,P.original_data=Q,P.data=R,S.original_data=T,S.data=U,d.push(r),d.push(J),d.push(o),d.push(A),d.push(h),d.push(e),d.push(P),d.push(k),d.push(u),d.push(x),d.push(S),d.push(G),d.push(D),d.push(M),n.data=d,n.time=c,new Highcharts.Chart({chart:{renderTo:"container",backgroundColor:"rgba(0,0,0,0)"},colors:["#000000","#CE0000","#FF79BC","#921AFF","#7D7DFF","#00CACA","#93FF93","#FF8040","#A8FF24","#AD5A5A","#8080C0","#A5A552","#424200","#642100"],title:{text:"Sensor History Data",x:-20},exporting:{enabled:!1,filename:"horticulture growing condition datasheet"},subtitle:{text:"Source Region: "+regionName,x:-20},marker:!1,noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",borderRadius:10,pointFormat:'<tr><td>{series.name}: </td><td style="text-align: right"><b>{point.y}</b></td></tr>',valueDecimals:3},legend:{align:"center",verticalAlign:"bottom"},series:n.data}),$scope.downLoad=function(){window.open("http://73.231.41.102:8080/sensor/history/export?user_id="+$cookieStore.get("user_id")+"&region_guid="+regionId+"&gateway_id="+gatewayId+"&start_time="+encodeURI(UTC_startTime)+"&end_time="+encodeURI(UTC_endTime))},$scope.toChartDetail=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,o;n.data||0!=n.data.length?($scope.chartDetailShow=!$scope.chartDetailShow,$scope.lastNextShow=!$scope.lastNextShow,$scope.chartShow=!$scope.chartShow,a=new Highcharts.Chart({chart:{renderTo:"chart_container"},title:{text:n.data[0].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[0].original_name+" condition datasheet"},colors:["#000000"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[0].original_name,data:n.data[0].original_data}]}),$scope.ExportChartDetailToExcel=function(){a.downloadXLS()},b=new Highcharts.Chart({chart:{renderTo:"chart_container1"},title:{text:n.data[1].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[1].original_name+" condition datasheet"},colors:["#CE0000"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[1].original_name,data:n.data[1].original_data}]}),$scope.ExportChartDetailToExcel1=function(){b.downloadXLS()},c=new Highcharts.Chart({chart:{renderTo:"chart_container2"},title:{text:n.data[2].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[2].original_name+" condition datasheet"},colors:["#FF79BC"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[2].original_name,data:n.data[2].original_data}]}),$scope.ExportChartDetailToExcel2=function(){c.downloadXLS()},d=new Highcharts.Chart({chart:{renderTo:"chart_container3"},title:{text:n.data[3].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[3].original_name+" condition datasheet"},colors:["#921AFF"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[3].original_name,data:n.data[3].original_data}]}),$scope.ExportChartDetailToExcel3=function(){d.downloadXLS()},e=new Highcharts.Chart({chart:{renderTo:"chart_container4"},title:{text:n.data[4].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[4].original_name+" condition datasheet"},colors:["#7D7DFF"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[4].original_name,data:n.data[4].original_data}]}),$scope.ExportChartDetailToExcel4=function(){e.downloadXLS()},f=new Highcharts.Chart({chart:{renderTo:"chart_container5"},title:{text:n.data[5].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[5].original_name+" condition datasheet"},colors:["#00CACA"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[5].original_name,data:n.data[5].original_data}]}),$scope.ExportChartDetailToExcel5=function(){f.downloadXLS()},g=new Highcharts.Chart({chart:{renderTo:"chart_container6"},title:{text:n.data[6].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[6].original_name+" condition datasheet"},colors:["#93FF93"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[6].original_name,data:n.data[6].original_data}]}),$scope.ExportChartDetailToExcel6=function(){g.downloadXLS()},h=new Highcharts.Chart({chart:{renderTo:"chart_container7"},title:{text:n.data[7].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[7].original_name+" condition datasheet"},colors:["#FF8040"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[7].original_name,data:n.data[7].original_data}]}),$scope.ExportChartDetailToExcel7=function(){h.downloadXLS()},i=new Highcharts.Chart({chart:{renderTo:"chart_container8"},title:{text:n.data[8].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[8].original_name+" condition datasheet"},colors:["#A8FF24"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[8].original_name,data:n.data[8].original_data}]}),$scope.ExportChartDetailToExcel8=function(){i.downloadXLS()},j=new Highcharts.Chart({chart:{renderTo:"chart_container9"},title:{text:n.data[9].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[9].original_name+" condition datasheet"},colors:["#AD5A5A"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[9].original_name,data:n.data[9].original_data}]}),$scope.ExportChartDetailToExcel9=function(){j.downloadXLS()},k=new Highcharts.Chart({chart:{renderTo:"chart_container10"},title:{text:n.data[10].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[10].original_name+" condition datasheet"},colors:["#8080C0"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[10].original_name,data:n.data[10].original_data}]}),$scope.ExportChartDetailToExcel10=function(){k.downloadXLS()},l=new Highcharts.Chart({chart:{renderTo:"chart_container11"},title:{text:n.data[11].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[11].original_name+" condition datasheet"},colors:["#A5A552"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[11].original_name,data:n.data[11].original_data}]}),$scope.ExportChartDetailToExcel11=function(){l.downloadXLS()},m=new Highcharts.Chart({chart:{renderTo:"chart_container12"},title:{text:n.data[12].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[12].original_name+" condition datasheet"},colors:["#424200"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[12].original_name,data:n.data[12].original_data}]}),$scope.ExportChartDetailToExcel12=function(){m.downloadXLS()},o=new Highcharts.Chart({chart:{renderTo:"chart_container13"},title:{text:n.data[13].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[13].original_name+" condition datasheet"},colors:["#642100"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[13].original_name,data:n.data[13].original_data}]}),$scope.ExportChartDetailToExcel13=function(){o.downloadXLS()}):toaster.pop({type:"error",title:"Error",body:"There is no data to display",timeout:POPTIMEOUT})}})}))}else toaster.pop({type:"error",title:"Error",body:b.message,timeout:POPTIMEOUT})})}var d,f;return 0==c.rows.length&&noDataDateDates.push(sqls[a].substring(54,64)),a+1!=newDate.length?$timeout(function(){selectFromTable(a+1)},1):(noDataDateDates&&noDataDateDates.length>0?($scope.delay=0,$scope.minDuration=0,$scope.message="0",$scope.backdrop=!1,$scope.promise=null,$scope.templateUrl="./pages/down-loading-template.html",$scope.vm={},$scope.vm.total=noDataDateDates.length,d=0,e(d)):noDataDateDates&&0!=noDataDateDates.length||(f={},dataBase.transaction(function(a){var b="SELECT * FROM sensorHalfYearDataTable WHERE time BETWEEN'"+$scope.default_startTime+"' AND '"+$scope.default_endTime+"' AND device_guid = '"+$scope.device_guid+"' ORDER BY time";a.executeSql(b,[],function(a,b){var V,c=[],d=[],e={original_name:"Carbon_Dioxide(ppm)",name:"Carbon_Dioxide(ppm)"},g=[],h=[],i={original_name:"Substrate_PH(PH)",name:"Substrate_PH(PH)"},j=[],k=[],l={original_name:"Substrate_Conductivity(mS/cm)",name:"Substrate_Conductivity(mS/cm)"},m=[],n=[],o={original_name:"Substrate_Temperature(°C)",name:"Substrate_Temperature(°C)"},p=[],q=[],r={original_name:"Air_Temperature(°C)",name:"Air_Temperature(°C)"},s=[],t=[],u={original_name:"Ppfd(μmol㎡/s)",name:"Ppfd(100*μmol㎡/s)"},v=[],w=[],x={original_name:"Liquid_PH(PH)",name:"Liquid_PH(PH)"},y=[],z=[],A={original_name:"Substrate_Humidity(%)",name:"Substrate_Humidity(%)"},B=[],C=[],D={original_name:"Liquid_DOC(mg/l)",name:"Liquid_DOC(mg/l)"},E=[],F=[],G={original_name:"Liquid_Conductivity(mS/cm)",name:"Liquid_Conductivity(mS/cm)"},H=[],I=[],J={original_name:"Air_Humidity(%)",name:"Air_Humidity(%)"},K=[],L=[],M={original_name:"Substrate_DOC(mg/l)",name:"Substrate_DOC(mg/l)"},N=[],O=[],P={original_name:"Illuminance(lux)",name:"Illuminance(100*lux)"},Q=[],R=[],S={original_name:"Lai()",name:"Lai()"},T=[],U=[];if(b)for(V=0;V<b.rows.length;V++)c.push(b.rows[V].time),g.push(parseFloat(b.rows[V].Carbon_Dioxide_original)),h.push(parseFloat(b.rows[V].Carbon_Dioxide)),j.push(parseFloat(b.rows[V].Substrate_PH_original)),k.push(parseFloat(b.rows[V].Substrate_PH)),m.push(parseFloat(b.rows[V].Substrate_Conductivity_original)),n.push(parseFloat(b.rows[V].Substrate_Conductivity)),p.push(parseFloat(b.rows[V].Substrate_Temperature_original)),q.push(parseFloat(b.rows[V].Substrate_Temperature)),s.push(parseFloat(b.rows[V].Air_Temperature_original)),t.push(parseFloat(b.rows[V].Air_Temperature)),v.push(parseFloat(b.rows[V].Ppfd_original)),w.push(parseFloat(b.rows[V].Ppfd)),y.push(parseFloat(b.rows[V].Liquid_PH_original)),z.push(parseFloat(b.rows[V].Liquid_PH)),B.push(parseFloat(b.rows[V].Substrate_Humidity_original)),C.push(parseFloat(b.rows[V].Substrate_Humidity)),E.push(parseFloat(b.rows[V].Liquid_DOC_original)),F.push(parseFloat(b.rows[V].Liquid_DOC)),H.push(parseFloat(b.rows[V].Liquid_Conductivity_original)),I.push(parseFloat(b.rows[V].Liquid_Conductivity)),K.push(parseFloat(b.rows[V].Air_Humidity_original)),L.push(parseFloat(b.rows[V].Air_Humidity)),N.push(parseFloat(b.rows[V].Substrate_DOC_original)),O.push(parseFloat(b.rows[V].Substrate_DOC)),Q.push(parseFloat(b.rows[V].Illuminance_original)),R.push(parseFloat(b.rows[V].Illuminance)),T.push(parseFloat(b.rows[V].Lai_original)),U.push(parseFloat(b.rows[V].Lai));e.original_data=g,e.data=h,i.original_data=j,i.data=k,l.original_data=m,l.data=n,o.original_data=p,o.data=q,r.original_data=s,r.data=t,u.original_data=v,u.data=w,x.original_data=y,x.data=z,A.original_data=B,A.data=C,D.original_data=E,D.data=F,G.original_data=H,G.data=I,J.original_data=K,J.data=L,M.original_data=N,M.data=O,P.original_data=Q,P.data=R,S.original_data=T,S.data=U,d.push(r),d.push(J),d.push(o),d.push(A),d.push(i),d.push(e),d.push(P),d.push(l),d.push(u),d.push(x),d.push(S),d.push(G),d.push(D),d.push(M),f.data=d,f.time=c,new Highcharts.Chart({chart:{renderTo:"container",backgroundColor:"rgba(0,0,0,0)"},colors:["#000000","#CE0000","#FF79BC","#921AFF","#7D7DFF","#00CACA","#93FF93","#FF8040","#A8FF24","#AD5A5A","#8080C0","#A5A552","#424200","#642100"],title:{text:"Sensor History Data",x:-20},exporting:{enabled:!1,filename:"horticulture growing condition datasheet"},subtitle:{text:"Source Region: "+regionName,x:-20},marker:!1,noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",borderRadius:10,pointFormat:'<tr><td>{series.name}: </td><td style="text-align: right"><b>{point.y}</b></td></tr>',valueDecimals:3},legend:{align:"center",verticalAlign:"bottom"},series:f.data}),$scope.downLoad=function(){window.open("http://73.231.41.102:8080/sensor/history/export?user_id="+$cookieStore.get("user_id")+"&region_guid="+regionId+"&gateway_id="+gatewayId+"&start_time="+encodeURI(UTC_startTime)+"&end_time="+encodeURI(UTC_endTime))},$scope.toChartDetail=function(){var a,b,c,d,e,g,h,i,j,k,l,m,n,o;f.data||0!=f.data.length?($scope.chartDetailShow=!$scope.chartDetailShow,$scope.lastNextShow=!$scope.lastNextShow,$scope.chartShow=!$scope.chartShow,a=new Highcharts.Chart({chart:{renderTo:"chart_container"},title:{text:f.data[0].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[0].original_name+" condition datasheet"},colors:["#000000"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[0].original_name,data:f.data[0].original_data}]}),$scope.ExportChartDetailToExcel=function(){a.downloadXLS()},b=new Highcharts.Chart({chart:{renderTo:"chart_container1"},title:{text:f.data[1].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[1].original_name+" condition datasheet"},colors:["#CE0000"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[1].original_name,data:f.data[1].original_data}]}),$scope.ExportChartDetailToExcel1=function(){b.downloadXLS()},c=new Highcharts.Chart({chart:{renderTo:"chart_container2"},title:{text:f.data[2].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[2].original_name+" condition datasheet"},colors:["#FF79BC"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[2].original_name,data:f.data[2].original_data}]}),$scope.ExportChartDetailToExcel2=function(){c.downloadXLS()},d=new Highcharts.Chart({chart:{renderTo:"chart_container3"},title:{text:f.data[3].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[3].original_name+" condition datasheet"},colors:["#921AFF"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[3].original_name,data:f.data[3].original_data}]}),$scope.ExportChartDetailToExcel3=function(){d.downloadXLS()},e=new Highcharts.Chart({chart:{renderTo:"chart_container4"},title:{text:f.data[4].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[4].original_name+" condition datasheet"},colors:["#7D7DFF"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[4].original_name,data:f.data[4].original_data}]}),$scope.ExportChartDetailToExcel4=function(){e.downloadXLS()},g=new Highcharts.Chart({chart:{renderTo:"chart_container5"},title:{text:f.data[5].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[5].original_name+" condition datasheet"},colors:["#00CACA"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[5].original_name,data:f.data[5].original_data}]}),$scope.ExportChartDetailToExcel5=function(){g.downloadXLS()},h=new Highcharts.Chart({chart:{renderTo:"chart_container6"},title:{text:f.data[6].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[6].original_name+" condition datasheet"},colors:["#93FF93"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[6].original_name,data:f.data[6].original_data}]}),$scope.ExportChartDetailToExcel6=function(){h.downloadXLS()},i=new Highcharts.Chart({chart:{renderTo:"chart_container7"},title:{text:f.data[7].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[7].original_name+" condition datasheet"},colors:["#FF8040"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[7].original_name,data:f.data[7].original_data}]}),$scope.ExportChartDetailToExcel7=function(){i.downloadXLS()},j=new Highcharts.Chart({chart:{renderTo:"chart_container8"},title:{text:f.data[8].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[8].original_name+" condition datasheet"},colors:["#A8FF24"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[8].original_name,data:f.data[8].original_data}]}),$scope.ExportChartDetailToExcel8=function(){j.downloadXLS()
            },k=new Highcharts.Chart({chart:{renderTo:"chart_container9"},title:{text:f.data[9].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[9].original_name+" condition datasheet"},colors:["#AD5A5A"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[9].original_name,data:f.data[9].original_data}]}),$scope.ExportChartDetailToExcel9=function(){k.downloadXLS()},l=new Highcharts.Chart({chart:{renderTo:"chart_container10"},title:{text:f.data[10].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[10].original_name+" condition datasheet"},colors:["#8080C0"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[10].original_name,data:f.data[10].original_data}]}),$scope.ExportChartDetailToExcel10=function(){l.downloadXLS()},m=new Highcharts.Chart({chart:{renderTo:"chart_container11"},title:{text:f.data[11].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[11].original_name+" condition datasheet"},colors:["#A5A552"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[11].original_name,data:f.data[11].original_data}]}),$scope.ExportChartDetailToExcel11=function(){m.downloadXLS()},n=new Highcharts.Chart({chart:{renderTo:"chart_container12"},title:{text:f.data[12].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[12].original_name+" condition datasheet"},colors:["#424200"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[12].original_name,data:f.data[12].original_data}]}),$scope.ExportChartDetailToExcel12=function(){n.downloadXLS()},o=new Highcharts.Chart({chart:{renderTo:"chart_container13"},title:{text:f.data[13].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[13].original_name+" condition datasheet"},colors:["#642100"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[13].original_name,data:f.data[13].original_data}]}),$scope.ExportChartDetailToExcel13=function(){o.downloadXLS()}):toaster.pop({type:"error",title:"Error",body:"There is no data to display",timeout:POPTIMEOUT})}})})),void 0)})})}var time1,time2,dayDiff,newDate,i,sqls,y,noDataDateDates,x;for(toaster.pop({type:"success",title:"",body:"Please waiting ...",timeout:POPTIMEOUT}),$scope.default_endTime=new Date(new Date($scope.default_endTime.getTime()-864e5).Format("yyyy-MM-dd hh:mm:ss").substring(0,10)+" 23:59:59").Format("yyyy-MM-dd hh:mm:ss"),$scope.default_startTime=new Date(new Date($scope.default_endTime).getTime()-1e3*60*60*$scope.my.timeDiff).Format("yyyy-MM-dd hh:mm:ss"),UTC_startTime=$scope.format(new Date($scope.default_startTime).toUTCString(),"yyyy-MM-dd HH:mm:ss"),UTC_endTime=$scope.format(new Date($scope.default_endTime).toUTCString(),"yyyy-MM-dd HH:mm:ss"),time1=$scope.default_startTime.substring(0,10),time2=$scope.default_endTime.substring(0,10),dayDiff=DateDiff(time1,time2)+1,newDate=[],i=0;dayDiff>i;i++)newDate[i]=getNewDay(time1,i);for(sqls=[],y=0;y<newDate.length;y++)sqls[y]="SELECT * FROM sensorYearDataTable WHERE time BETWEEN '"+newDate[y]+" 00:00:00"+"' AND '"+newDate[y]+" 23:59:59"+"' AND device_guid = '"+$scope.device_guid+"'";noDataDateDates=[],x=0,selectFromTable(x);
        }else{
            function selectFromTable(a){dataBase.transaction(function(b){b.executeSql(sqls[a],[],function(b,c){function e(a){var b={table_device_guid:$scope.device_guid,device_name:"",gateway_id:gatewayId,start_time:$scope.format(new Date(noDataDateDates[a]+" 00:00:00").toUTCString(),"yyyy-MM-dd HH:mm:ss"),end_time:$scope.format(new Date(noDataDateDates[a]+" 23:59:59").toUTCString(),"yyyy-MM-dd HH:mm:ss")};$scope.getSensorDataProm=AuthService.myHttp(token,b,"GET","sensor/sensorOneDay").then(function(b){var c,d,f,g,h,i,j,k,l,m,n;if("0"==b.code){for($scope.message=Math.round(100*((a+1)/$scope.vm.total)),c=[],d=[],f=[],g=[],h=[],i=[],j=[],k=[],l=0;l<b.content.time.length;l++)d[l]=new Date(b.content.time[l]),c[l]=d[l].getTime(),c[l]-=1e3*60*(new Date).getTimezoneOffset(),c[l]=new Date(c[l]).Format("yyyy-MM-dd hh:mm:ss");for(m=0;m<b.content.quarterObject.time.length;m++)f[m]=new Date(b.content.quarterObject.time[m]),i[m]=f[m].getTime(),i[m]-=1e3*60*(new Date).getTimezoneOffset(),i[m]=new Date(i[m]).Format("yyyy-MM-dd hh:mm:ss");for(m=0;m<b.content.halfYearObject.time.length;m++)g[m]=new Date(b.content.halfYearObject.time[m]),j[m]=g[m].getTime(),j[m]-=1e3*60*(new Date).getTimezoneOffset(),j[m]=new Date(j[m]).Format("yyyy-MM-dd hh:mm:ss");for(m=0;m<b.content.yearObject.time.length;m++)h[m]=new Date(b.content.yearObject.time[m]),k[m]=h[m].getTime(),k[m]-=1e3*60*(new Date).getTimezoneOffset(),k[m]=new Date(k[m]).Format("yyyy-MM-dd hh:mm:ss");if(dataBase.transaction(function(a){var d,e,f,g,h,l,m,n;for(d=0;d<b.content.time.length;d++)e="INSERT INTO sensorDataTable(device_guid,time,Carbon_Dioxide_original,Carbon_Dioxide,Substrate_PH_original,Substrate_PH,Substrate_Conductivity_original,Substrate_Conductivity,Substrate_Temperature_original,Substrate_Temperature,Air_Temperature_original,Air_Temperature,Ppfd_original,Ppfd,Liquid_PH_original,Liquid_PH,Substrate_Humidity_original,Substrate_Humidity,Liquid_DOC_original,Liquid_DOC,Liquid_Conductivity_original,Liquid_Conductivity,Air_Humidity_original,Air_Humidity,Substrate_DOC_original,Substrate_DOC,Illuminance_original,Illuminance,Lai_original,Lai) values ('"+$scope.device_guid+"','"+c[d]+"','"+b.content.data[0].original_data[d]+"','"+b.content.data[0].data[d]+"'"+",'"+b.content.data[1].original_data[d]+"','"+b.content.data[1].data[d]+"','"+b.content.data[2].original_data[d]+"','"+b.content.data[2].data[d]+"','"+b.content.data[3].original_data[d]+"','"+b.content.data[3].data[d]+"'"+",'"+b.content.data[4].original_data[d]+"','"+b.content.data[4].data[d]+"','"+b.content.data[5].original_data[d]+"','"+b.content.data[5].data[d]+"','"+b.content.data[6].original_data[d]+"','"+b.content.data[6].data[d]+"'"+",'"+b.content.data[7].original_data[d]+"','"+b.content.data[7].data[d]+"','"+b.content.data[8].original_data[d]+"','"+b.content.data[8].data[d]+"','"+b.content.data[9].original_data[d]+"','"+b.content.data[9].data[d]+"'"+",'"+b.content.data[10].original_data[d]+"','"+b.content.data[10].data[d]+"','"+b.content.data[11].original_data[d]+"','"+b.content.data[11].data[d]+"','"+b.content.data[12].original_data[d]+"','"+b.content.data[12].data[d]+"'"+",'"+b.content.data[13].original_data[d]+"','"+b.content.data[13].data[d]+"')",a.executeSql(e);for(f=0;f<b.content.quarterObject.time.length;f++)g="INSERT INTO sensorQuarterDataTable(device_guid,time,Carbon_Dioxide_original,Carbon_Dioxide,Substrate_PH_original,Substrate_PH,Substrate_Conductivity_original,Substrate_Conductivity,Substrate_Temperature_original,Substrate_Temperature,Air_Temperature_original,Air_Temperature,Ppfd_original,Ppfd,Liquid_PH_original,Liquid_PH,Substrate_Humidity_original,Substrate_Humidity,Liquid_DOC_original,Liquid_DOC,Liquid_Conductivity_original,Liquid_Conductivity,Air_Humidity_original,Air_Humidity,Substrate_DOC_original,Substrate_DOC,Illuminance_original,Illuminance,Lai_original,Lai) values ('"+$scope.device_guid+"','"+i[f]+"','"+b.content.quarterObject.data[0].original_data[f]+"','"+b.content.quarterObject.data[0].data[f]+"'"+",'"+b.content.quarterObject.data[1].original_data[f]+"','"+b.content.quarterObject.data[1].data[f]+"','"+b.content.quarterObject.data[2].original_data[f]+"','"+b.content.quarterObject.data[2].data[f]+"','"+b.content.quarterObject.data[3].original_data[f]+"','"+b.content.quarterObject.data[3].data[f]+"'"+",'"+b.content.quarterObject.data[4].original_data[f]+"','"+b.content.quarterObject.data[4].data[f]+"','"+b.content.quarterObject.data[5].original_data[f]+"','"+b.content.quarterObject.data[5].data[f]+"','"+b.content.quarterObject.data[6].original_data[f]+"','"+b.content.quarterObject.data[6].data[f]+"'"+",'"+b.content.quarterObject.data[7].original_data[f]+"','"+b.content.quarterObject.data[7].data[f]+"','"+b.content.quarterObject.data[8].original_data[f]+"','"+b.content.quarterObject.data[8].data[f]+"','"+b.content.quarterObject.data[9].original_data[f]+"','"+b.content.quarterObject.data[9].data[f]+"'"+",'"+b.content.quarterObject.data[10].original_data[f]+"','"+b.content.quarterObject.data[10].data[f]+"','"+b.content.quarterObject.data[11].original_data[f]+"','"+b.content.quarterObject.data[11].data[f]+"','"+b.content.quarterObject.data[12].original_data[f]+"','"+b.content.quarterObject.data[12].data[f]+"'"+",'"+b.content.quarterObject.data[13].original_data[f]+"','"+b.content.quarterObject.data[13].data[f]+"')",a.executeSql(g);for(h=0;h<b.content.quarterObject.time.length;h++)l="INSERT INTO sensorHalfYearDataTable(device_guid,time,Carbon_Dioxide_original,Carbon_Dioxide,Substrate_PH_original,Substrate_PH,Substrate_Conductivity_original,Substrate_Conductivity,Substrate_Temperature_original,Substrate_Temperature,Air_Temperature_original,Air_Temperature,Ppfd_original,Ppfd,Liquid_PH_original,Liquid_PH,Substrate_Humidity_original,Substrate_Humidity,Liquid_DOC_original,Liquid_DOC,Liquid_Conductivity_original,Liquid_Conductivity,Air_Humidity_original,Air_Humidity,Substrate_DOC_original,Substrate_DOC,Illuminance_original,Illuminance,Lai_original,Lai) values ('"+$scope.device_guid+"','"+j[h]+"','"+b.content.halfYearObject.data[0].original_data[h]+"','"+b.content.halfYearObject.data[0].data[h]+"'"+",'"+b.content.halfYearObject.data[1].original_data[h]+"','"+b.content.halfYearObject.data[1].data[h]+"','"+b.content.halfYearObject.data[2].original_data[h]+"','"+b.content.halfYearObject.data[2].data[h]+"','"+b.content.halfYearObject.data[3].original_data[h]+"','"+b.content.halfYearObject.data[3].data[h]+"'"+",'"+b.content.halfYearObject.data[4].original_data[h]+"','"+b.content.halfYearObject.data[4].data[h]+"','"+b.content.halfYearObject.data[5].original_data[h]+"','"+b.content.halfYearObject.data[5].data[h]+"','"+b.content.halfYearObject.data[6].original_data[h]+"','"+b.content.halfYearObject.data[6].data[h]+"'"+",'"+b.content.halfYearObject.data[7].original_data[h]+"','"+b.content.halfYearObject.data[7].data[h]+"','"+b.content.halfYearObject.data[8].original_data[h]+"','"+b.content.halfYearObject.data[8].data[h]+"','"+b.content.halfYearObject.data[9].original_data[h]+"','"+b.content.halfYearObject.data[9].data[h]+"'"+",'"+b.content.halfYearObject.data[10].original_data[h]+"','"+b.content.halfYearObject.data[10].data[h]+"','"+b.content.halfYearObject.data[11].original_data[h]+"','"+b.content.halfYearObject.data[11].data[h]+"','"+b.content.halfYearObject.data[12].original_data[h]+"','"+b.content.halfYearObject.data[12].data[h]+"'"+",'"+b.content.halfYearObject.data[13].original_data[h]+"','"+b.content.halfYearObject.data[13].data[h]+"')",a.executeSql(l);for(m=0;m<b.content.yearObject.time.length;m++)n="INSERT INTO sensorYearDataTable(device_guid,time,Carbon_Dioxide_original,Carbon_Dioxide,Substrate_PH_original,Substrate_PH,Substrate_Conductivity_original,Substrate_Conductivity,Substrate_Temperature_original,Substrate_Temperature,Air_Temperature_original,Air_Temperature,Ppfd_original,Ppfd,Liquid_PH_original,Liquid_PH,Substrate_Humidity_original,Substrate_Humidity,Liquid_DOC_original,Liquid_DOC,Liquid_Conductivity_original,Liquid_Conductivity,Air_Humidity_original,Air_Humidity,Substrate_DOC_original,Substrate_DOC,Illuminance_original,Illuminance,Lai_original,Lai) values ('"+$scope.device_guid+"','"+k[m]+"','"+b.content.yearObject.data[0].original_data[m]+"','"+b.content.yearObject.data[0].data[m]+"'"+",'"+b.content.yearObject.data[1].original_data[m]+"','"+b.content.yearObject.data[1].data[m]+"','"+b.content.yearObject.data[2].original_data[m]+"','"+b.content.yearObject.data[2].data[m]+"','"+b.content.yearObject.data[3].original_data[m]+"','"+b.content.yearObject.data[3].data[m]+"'"+",'"+b.content.yearObject.data[4].original_data[m]+"','"+b.content.yearObject.data[4].data[m]+"','"+b.content.yearObject.data[5].original_data[m]+"','"+b.content.yearObject.data[5].data[m]+"','"+b.content.yearObject.data[6].original_data[m]+"','"+b.content.yearObject.data[6].data[m]+"'"+",'"+b.content.yearObject.data[7].original_data[m]+"','"+b.content.yearObject.data[7].data[m]+"','"+b.content.yearObject.data[8].original_data[m]+"','"+b.content.yearObject.data[8].data[m]+"','"+b.content.yearObject.data[9].original_data[m]+"','"+b.content.yearObject.data[9].data[m]+"'"+",'"+b.content.yearObject.data[10].original_data[m]+"','"+b.content.yearObject.data[10].data[m]+"','"+b.content.yearObject.data[11].original_data[m]+"','"+b.content.yearObject.data[11].data[m]+"','"+b.content.yearObject.data[12].original_data[m]+"','"+b.content.yearObject.data[12].data[m]+"'"+",'"+b.content.yearObject.data[13].original_data[m]+"','"+b.content.yearObject.data[13].data[m]+"')",a.executeSql(n)}),a+1!=noDataDateDates.length)return $timeout(function(){e(a+1)},1500);a+1==noDataDateDates.length&&(toaster.pop({type:"success",title:"Success",body:"Download successfully , please waiting...",timeout:POPTIMEOUT}),n={},dataBase.transaction(function(a){var b="SELECT * FROM sensorYearDataTable WHERE time BETWEEN'"+$scope.default_startTime+"' AND '"+$scope.default_endTime+"' AND device_guid = '"+$scope.device_guid+"' ORDER BY time";a.executeSql(b,[],function(a,b){var V,c=[],d=[],e={original_name:"Carbon_Dioxide(ppm)",name:"Carbon_Dioxide(ppm)"},f=[],g=[],h={original_name:"Substrate_PH(PH)",name:"Substrate_PH(PH)"},i=[],j=[],k={original_name:"Substrate_Conductivity(mS/cm)",name:"Substrate_Conductivity(mS/cm)"},l=[],m=[],o={original_name:"Substrate_Temperature(°C)",name:"Substrate_Temperature(°C)"},p=[],q=[],r={original_name:"Air_Temperature(°C)",name:"Air_Temperature(°C)"},s=[],t=[],u={original_name:"Ppfd(μmol㎡/s)",name:"Ppfd(100*μmol㎡/s)"},v=[],w=[],x={original_name:"Liquid_PH(PH)",name:"Liquid_PH(PH)"},y=[],z=[],A={original_name:"Substrate_Humidity(%)",name:"Substrate_Humidity(%)"},B=[],C=[],D={original_name:"Liquid_DOC(mg/l)",name:"Liquid_DOC(mg/l)"},E=[],F=[],G={original_name:"Liquid_Conductivity(mS/cm)",name:"Liquid_Conductivity(mS/cm)"},H=[],I=[],J={original_name:"Air_Humidity(%)",name:"Air_Humidity(%)"},K=[],L=[],M={original_name:"Substrate_DOC(mg/l)",name:"Substrate_DOC(mg/l)"},N=[],O=[],P={original_name:"Illuminance(lux)",name:"Illuminance(100*lux)"},Q=[],R=[],S={original_name:"Lai()",name:"Lai()"},T=[],U=[];if(b)for(V=0;V<b.rows.length;V++)c.push(b.rows[V].time),f.push(parseFloat(b.rows[V].Carbon_Dioxide_original)),g.push(parseFloat(b.rows[V].Carbon_Dioxide)),i.push(parseFloat(b.rows[V].Substrate_PH_original)),j.push(parseFloat(b.rows[V].Substrate_PH)),l.push(parseFloat(b.rows[V].Substrate_Conductivity_original)),m.push(parseFloat(b.rows[V].Substrate_Conductivity)),p.push(parseFloat(b.rows[V].Substrate_Temperature_original)),q.push(parseFloat(b.rows[V].Substrate_Temperature)),s.push(parseFloat(b.rows[V].Air_Temperature_original)),t.push(parseFloat(b.rows[V].Air_Temperature)),v.push(parseFloat(b.rows[V].Ppfd_original)),w.push(parseFloat(b.rows[V].Ppfd)),y.push(parseFloat(b.rows[V].Liquid_PH_original)),z.push(parseFloat(b.rows[V].Liquid_PH)),B.push(parseFloat(b.rows[V].Substrate_Humidity_original)),C.push(parseFloat(b.rows[V].Substrate_Humidity)),E.push(parseFloat(b.rows[V].Liquid_DOC_original)),F.push(parseFloat(b.rows[V].Liquid_DOC)),H.push(parseFloat(b.rows[V].Liquid_Conductivity_original)),I.push(parseFloat(b.rows[V].Liquid_Conductivity)),K.push(parseFloat(b.rows[V].Air_Humidity_original)),L.push(parseFloat(b.rows[V].Air_Humidity)),N.push(parseFloat(b.rows[V].Substrate_DOC_original)),O.push(parseFloat(b.rows[V].Substrate_DOC)),Q.push(parseFloat(b.rows[V].Illuminance_original)),R.push(parseFloat(b.rows[V].Illuminance)),T.push(parseFloat(b.rows[V].Lai_original)),U.push(parseFloat(b.rows[V].Lai));e.original_data=f,e.data=g,h.original_data=i,h.data=j,k.original_data=l,k.data=m,o.original_data=p,o.data=q,r.original_data=s,r.data=t,u.original_data=v,u.data=w,x.original_data=y,x.data=z,A.original_data=B,A.data=C,D.original_data=E,D.data=F,G.original_data=H,G.data=I,J.original_data=K,J.data=L,M.original_data=N,M.data=O,P.original_data=Q,P.data=R,S.original_data=T,S.data=U,d.push(r),d.push(J),d.push(o),d.push(A),d.push(h),d.push(e),d.push(P),d.push(k),d.push(u),d.push(x),d.push(S),d.push(G),d.push(D),d.push(M),n.data=d,n.time=c,new Highcharts.Chart({chart:{renderTo:"container",backgroundColor:"rgba(0,0,0,0)"},colors:["#000000","#CE0000","#FF79BC","#921AFF","#7D7DFF","#00CACA","#93FF93","#FF8040","#A8FF24","#AD5A5A","#8080C0","#A5A552","#424200","#642100"],title:{text:"Sensor History Data",x:-20},exporting:{enabled:!1,filename:"horticulture growing condition datasheet"},subtitle:{text:"Source Region: "+regionName,x:-20},marker:!1,noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",borderRadius:10,pointFormat:'<tr><td>{series.name}: </td><td style="text-align: right"><b>{point.y}</b></td></tr>',valueDecimals:3},legend:{align:"center",verticalAlign:"bottom"},series:n.data}),$scope.downLoad=function(){window.open("http://73.231.41.102:8080/sensor/history/export?user_id="+$cookieStore.get("user_id")+"&region_guid="+regionId+"&gateway_id="+gatewayId+"&start_time="+encodeURI(UTC_startTime)+"&end_time="+encodeURI(UTC_endTime))},$scope.toChartDetail=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,o;n.data||0!=n.data.length?($scope.chartDetailShow=!$scope.chartDetailShow,$scope.lastNextShow=!$scope.lastNextShow,$scope.chartShow=!$scope.chartShow,a=new Highcharts.Chart({chart:{renderTo:"chart_container"},title:{text:n.data[0].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[0].original_name+" condition datasheet"},colors:["#000000"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[0].original_name,data:n.data[0].original_data}]}),$scope.ExportChartDetailToExcel=function(){a.downloadXLS()},b=new Highcharts.Chart({chart:{renderTo:"chart_container1"},title:{text:n.data[1].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[1].original_name+" condition datasheet"},colors:["#CE0000"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[1].original_name,data:n.data[1].original_data}]}),$scope.ExportChartDetailToExcel1=function(){b.downloadXLS()},c=new Highcharts.Chart({chart:{renderTo:"chart_container2"},title:{text:n.data[2].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[2].original_name+" condition datasheet"},colors:["#FF79BC"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[2].original_name,data:n.data[2].original_data}]}),$scope.ExportChartDetailToExcel2=function(){c.downloadXLS()},d=new Highcharts.Chart({chart:{renderTo:"chart_container3"},title:{text:n.data[3].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[3].original_name+" condition datasheet"},colors:["#921AFF"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[3].original_name,data:n.data[3].original_data}]}),$scope.ExportChartDetailToExcel3=function(){d.downloadXLS()},e=new Highcharts.Chart({chart:{renderTo:"chart_container4"},title:{text:n.data[4].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[4].original_name+" condition datasheet"},colors:["#7D7DFF"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[4].original_name,data:n.data[4].original_data}]}),$scope.ExportChartDetailToExcel4=function(){e.downloadXLS()},f=new Highcharts.Chart({chart:{renderTo:"chart_container5"},title:{text:n.data[5].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[5].original_name+" condition datasheet"},colors:["#00CACA"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[5].original_name,data:n.data[5].original_data}]}),$scope.ExportChartDetailToExcel5=function(){f.downloadXLS()},g=new Highcharts.Chart({chart:{renderTo:"chart_container6"},title:{text:n.data[6].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[6].original_name+" condition datasheet"},colors:["#93FF93"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[6].original_name,data:n.data[6].original_data}]}),$scope.ExportChartDetailToExcel6=function(){g.downloadXLS()},h=new Highcharts.Chart({chart:{renderTo:"chart_container7"},title:{text:n.data[7].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[7].original_name+" condition datasheet"},colors:["#FF8040"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[7].original_name,data:n.data[7].original_data}]}),$scope.ExportChartDetailToExcel7=function(){h.downloadXLS()},i=new Highcharts.Chart({chart:{renderTo:"chart_container8"},title:{text:n.data[8].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[8].original_name+" condition datasheet"},colors:["#A8FF24"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[8].original_name,data:n.data[8].original_data}]}),$scope.ExportChartDetailToExcel8=function(){i.downloadXLS()},j=new Highcharts.Chart({chart:{renderTo:"chart_container9"},title:{text:n.data[9].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[9].original_name+" condition datasheet"},colors:["#AD5A5A"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[9].original_name,data:n.data[9].original_data}]}),$scope.ExportChartDetailToExcel9=function(){j.downloadXLS()},k=new Highcharts.Chart({chart:{renderTo:"chart_container10"},title:{text:n.data[10].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[10].original_name+" condition datasheet"},colors:["#8080C0"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[10].original_name,data:n.data[10].original_data}]}),$scope.ExportChartDetailToExcel10=function(){k.downloadXLS()},l=new Highcharts.Chart({chart:{renderTo:"chart_container11"},title:{text:n.data[11].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[11].original_name+" condition datasheet"},colors:["#A5A552"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[11].original_name,data:n.data[11].original_data}]}),$scope.ExportChartDetailToExcel11=function(){l.downloadXLS()},m=new Highcharts.Chart({chart:{renderTo:"chart_container12"},title:{text:n.data[12].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[12].original_name+" condition datasheet"},colors:["#424200"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[12].original_name,data:n.data[12].original_data}]}),$scope.ExportChartDetailToExcel12=function(){m.downloadXLS()},o=new Highcharts.Chart({chart:{renderTo:"chart_container13"},title:{text:n.data[13].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[13].original_name+" condition datasheet"},colors:["#642100"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[13].original_name,data:n.data[13].original_data}]}),$scope.ExportChartDetailToExcel13=function(){o.downloadXLS()}):toaster.pop({type:"error",title:"Error",body:"There is no data to display",timeout:POPTIMEOUT})}})}))}else toaster.pop({type:"error",title:"Error",body:b.message,timeout:POPTIMEOUT})})}var d,f;return 0==c.rows.length&&noDataDateDates.push(sqls[a].substring(54,64)),a+1!=newDate.length?$timeout(function(){selectFromTable(a+1)},1):(noDataDateDates&&noDataDateDates.length>0?($scope.delay=0,$scope.minDuration=0,$scope.message="0",$scope.backdrop=!1,$scope.promise=null,$scope.templateUrl="./pages/down-loading-template.html",$scope.vm={},$scope.vm.total=noDataDateDates.length,d=0,e(d)):noDataDateDates&&0!=noDataDateDates.length||(f={},dataBase.transaction(function(a){var b="SELECT * FROM sensorDataTable WHERE time BETWEEN'"+$scope.default_startTime+"' AND '"+$scope.default_endTime+"' AND device_guid = '"+$scope.device_guid+"' ORDER BY time";a.executeSql(b,[],function(a,b){var V,c=[],d=[],e={original_name:"Carbon_Dioxide(ppm)",name:"Carbon_Dioxide(ppm)"},g=[],h=[],i={original_name:"Substrate_PH(PH)",name:"Substrate_PH(PH)"},j=[],k=[],l={original_name:"Substrate_Conductivity(mS/cm)",name:"Substrate_Conductivity(mS/cm)"},m=[],n=[],o={original_name:"Substrate_Temperature(°C)",name:"Substrate_Temperature(°C)"},p=[],q=[],r={original_name:"Air_Temperature(°C)",name:"Air_Temperature(°C)"},s=[],t=[],u={original_name:"Ppfd(μmol㎡/s)",name:"Ppfd(100*μmol㎡/s)"},v=[],w=[],x={original_name:"Liquid_PH(PH)",name:"Liquid_PH(PH)"},y=[],z=[],A={original_name:"Substrate_Humidity(%)",name:"Substrate_Humidity(%)"},B=[],C=[],D={original_name:"Liquid_DOC(mg/l)",name:"Liquid_DOC(mg/l)"},E=[],F=[],G={original_name:"Liquid_Conductivity(mS/cm)",name:"Liquid_Conductivity(mS/cm)"},H=[],I=[],J={original_name:"Air_Humidity(%)",name:"Air_Humidity(%)"},K=[],L=[],M={original_name:"Substrate_DOC(mg/l)",name:"Substrate_DOC(mg/l)"},N=[],O=[],P={original_name:"Illuminance(lux)",name:"Illuminance(100*lux)"},Q=[],R=[],S={original_name:"Lai()",name:"Lai()"},T=[],U=[];if(b)for(V=0;V<b.rows.length;V++)c.push(b.rows[V].time),g.push(parseFloat(b.rows[V].Carbon_Dioxide_original)),h.push(parseFloat(b.rows[V].Carbon_Dioxide)),j.push(parseFloat(b.rows[V].Substrate_PH_original)),k.push(parseFloat(b.rows[V].Substrate_PH)),m.push(parseFloat(b.rows[V].Substrate_Conductivity_original)),n.push(parseFloat(b.rows[V].Substrate_Conductivity)),p.push(parseFloat(b.rows[V].Substrate_Temperature_original)),q.push(parseFloat(b.rows[V].Substrate_Temperature)),s.push(parseFloat(b.rows[V].Air_Temperature_original)),t.push(parseFloat(b.rows[V].Air_Temperature)),v.push(parseFloat(b.rows[V].Ppfd_original)),w.push(parseFloat(b.rows[V].Ppfd)),y.push(parseFloat(b.rows[V].Liquid_PH_original)),z.push(parseFloat(b.rows[V].Liquid_PH)),B.push(parseFloat(b.rows[V].Substrate_Humidity_original)),C.push(parseFloat(b.rows[V].Substrate_Humidity)),E.push(parseFloat(b.rows[V].Liquid_DOC_original)),F.push(parseFloat(b.rows[V].Liquid_DOC)),H.push(parseFloat(b.rows[V].Liquid_Conductivity_original)),I.push(parseFloat(b.rows[V].Liquid_Conductivity)),K.push(parseFloat(b.rows[V].Air_Humidity_original)),L.push(parseFloat(b.rows[V].Air_Humidity)),N.push(parseFloat(b.rows[V].Substrate_DOC_original)),O.push(parseFloat(b.rows[V].Substrate_DOC)),Q.push(parseFloat(b.rows[V].Illuminance_original)),R.push(parseFloat(b.rows[V].Illuminance)),T.push(parseFloat(b.rows[V].Lai_original)),U.push(parseFloat(b.rows[V].Lai));e.original_data=g,e.data=h,i.original_data=j,i.data=k,l.original_data=m,l.data=n,o.original_data=p,o.data=q,r.original_data=s,r.data=t,u.original_data=v,u.data=w,x.original_data=y,x.data=z,A.original_data=B,A.data=C,D.original_data=E,D.data=F,G.original_data=H,G.data=I,J.original_data=K,J.data=L,M.original_data=N,M.data=O,P.original_data=Q,P.data=R,S.original_data=T,S.data=U,d.push(r),d.push(J),d.push(o),d.push(A),d.push(i),d.push(e),d.push(P),d.push(l),d.push(u),d.push(x),d.push(S),d.push(G),d.push(D),d.push(M),f.data=d,f.time=c,new Highcharts.Chart({chart:{renderTo:"container",backgroundColor:"rgba(0,0,0,0)"},colors:["#000000","#CE0000","#FF79BC","#921AFF","#7D7DFF","#00CACA","#93FF93","#FF8040","#A8FF24","#AD5A5A","#8080C0","#A5A552","#424200","#642100"],title:{text:"Sensor History Data",x:-20},exporting:{enabled:!1,filename:"horticulture growing condition datasheet"},subtitle:{text:"Source Region: "+regionName,x:-20},marker:!1,noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",borderRadius:10,pointFormat:'<tr><td>{series.name}: </td><td style="text-align: right"><b>{point.y}</b></td></tr>',valueDecimals:3},legend:{align:"center",verticalAlign:"bottom"},series:f.data}),$scope.downLoad=function(){window.open("http://73.231.41.102:8080/sensor/history/export?user_id="+$cookieStore.get("user_id")+"&region_guid="+regionId+"&gateway_id="+gatewayId+"&start_time="+encodeURI(UTC_startTime)+"&end_time="+encodeURI(UTC_endTime))},$scope.toChartDetail=function(){var a,b,c,d,e,g,h,i,j,k,l,m,n,o;f.data||0!=f.data.length?($scope.chartDetailShow=!$scope.chartDetailShow,$scope.lastNextShow=!$scope.lastNextShow,$scope.chartShow=!$scope.chartShow,a=new Highcharts.Chart({chart:{renderTo:"chart_container"},title:{text:f.data[0].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[0].original_name+" condition datasheet"},colors:["#000000"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[0].original_name,data:f.data[0].original_data}]}),$scope.ExportChartDetailToExcel=function(){a.downloadXLS()},b=new Highcharts.Chart({chart:{renderTo:"chart_container1"},title:{text:f.data[1].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[1].original_name+" condition datasheet"},colors:["#CE0000"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[1].original_name,data:f.data[1].original_data}]}),$scope.ExportChartDetailToExcel1=function(){b.downloadXLS()},c=new Highcharts.Chart({chart:{renderTo:"chart_container2"},title:{text:f.data[2].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[2].original_name+" condition datasheet"},colors:["#FF79BC"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[2].original_name,data:f.data[2].original_data}]}),$scope.ExportChartDetailToExcel2=function(){c.downloadXLS()},d=new Highcharts.Chart({chart:{renderTo:"chart_container3"},title:{text:f.data[3].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[3].original_name+" condition datasheet"},colors:["#921AFF"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[3].original_name,data:f.data[3].original_data}]}),$scope.ExportChartDetailToExcel3=function(){d.downloadXLS()},e=new Highcharts.Chart({chart:{renderTo:"chart_container4"},title:{text:f.data[4].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[4].original_name+" condition datasheet"},colors:["#7D7DFF"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[4].original_name,data:f.data[4].original_data}]}),$scope.ExportChartDetailToExcel4=function(){e.downloadXLS()},g=new Highcharts.Chart({chart:{renderTo:"chart_container5"},title:{text:f.data[5].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[5].original_name+" condition datasheet"},colors:["#00CACA"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[5].original_name,data:f.data[5].original_data}]}),$scope.ExportChartDetailToExcel5=function(){g.downloadXLS()},h=new Highcharts.Chart({chart:{renderTo:"chart_container6"},title:{text:f.data[6].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[6].original_name+" condition datasheet"},colors:["#93FF93"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[6].original_name,data:f.data[6].original_data}]}),$scope.ExportChartDetailToExcel6=function(){h.downloadXLS()},i=new Highcharts.Chart({chart:{renderTo:"chart_container7"},title:{text:f.data[7].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[7].original_name+" condition datasheet"},colors:["#FF8040"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[7].original_name,data:f.data[7].original_data}]}),$scope.ExportChartDetailToExcel7=function(){i.downloadXLS()},j=new Highcharts.Chart({chart:{renderTo:"chart_container8"},title:{text:f.data[8].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[8].original_name+" condition datasheet"},colors:["#A8FF24"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[8].original_name,data:f.data[8].original_data}]}),$scope.ExportChartDetailToExcel8=function(){j.downloadXLS()
            },k=new Highcharts.Chart({chart:{renderTo:"chart_container9"},title:{text:f.data[9].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[9].original_name+" condition datasheet"},colors:["#AD5A5A"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[9].original_name,data:f.data[9].original_data}]}),$scope.ExportChartDetailToExcel9=function(){k.downloadXLS()},l=new Highcharts.Chart({chart:{renderTo:"chart_container10"},title:{text:f.data[10].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[10].original_name+" condition datasheet"},colors:["#8080C0"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[10].original_name,data:f.data[10].original_data}]}),$scope.ExportChartDetailToExcel10=function(){l.downloadXLS()},m=new Highcharts.Chart({chart:{renderTo:"chart_container11"},title:{text:f.data[11].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[11].original_name+" condition datasheet"},colors:["#A5A552"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[11].original_name,data:f.data[11].original_data}]}),$scope.ExportChartDetailToExcel11=function(){m.downloadXLS()},n=new Highcharts.Chart({chart:{renderTo:"chart_container12"},title:{text:f.data[12].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[12].original_name+" condition datasheet"},colors:["#424200"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[12].original_name,data:f.data[12].original_data}]}),$scope.ExportChartDetailToExcel12=function(){n.downloadXLS()},o=new Highcharts.Chart({chart:{renderTo:"chart_container13"},title:{text:f.data[13].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[13].original_name+" condition datasheet"},colors:["#642100"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[13].original_name,data:f.data[13].original_data}]}),$scope.ExportChartDetailToExcel13=function(){o.downloadXLS()}):toaster.pop({type:"error",title:"Error",body:"There is no data to display",timeout:POPTIMEOUT})}})})),void 0)})})}var time1,time2,dayDiff,newDate,i,sqls,y,noDataDateDates,x;for(toaster.pop({type:"success",title:"",body:"Please waiting ...",timeout:POPTIMEOUT}),$scope.default_endTime=new Date(new Date($scope.default_endTime.getTime()-864e5).Format("yyyy-MM-dd hh:mm:ss").substring(0,10)+" 23:59:59").Format("yyyy-MM-dd hh:mm:ss"),$scope.default_startTime=new Date(new Date($scope.default_endTime).getTime()-1e3*60*60*$scope.my.timeDiff).Format("yyyy-MM-dd hh:mm:ss"),UTC_startTime=$scope.format(new Date($scope.default_startTime).toUTCString(),"yyyy-MM-dd HH:mm:ss"),UTC_endTime=$scope.format(new Date($scope.default_endTime).toUTCString(),"yyyy-MM-dd HH:mm:ss"),time1=$scope.default_startTime.substring(0,10),time2=$scope.default_endTime.substring(0,10),dayDiff=DateDiff(time1,time2)+1,newDate=[],i=0;dayDiff>i;i++)newDate[i]=getNewDay(time1,i);for(sqls=[],y=0;y<newDate.length;y++)sqls[y]="SELECT * FROM sensorYearDataTable WHERE time BETWEEN '"+newDate[y]+" 00:00:00"+"' AND '"+newDate[y]+" 23:59:59"+"' AND device_guid = '"+$scope.device_guid+"'";noDataDateDates=[],x=0,selectFromTable(x);
        }
        //上一单位
        $scope.last = function () {
            var UTC_startTime = '';var UTC_endTime = '';
            if($scope.default_startTime <= $scope.sensor_first_dataTime){
                toaster.pop({type: 'error', title: 'Error', body: 'There is no earlier data !', timeout: POPTIMEOUT});
            }else if($scope.my.timeDiff == '1' || $scope.my.timeDiff == '24'){
                $scope.default_endTime=new Date(new Date($scope.default_startTime).getTime()).Format("yyyy-MM-dd hh:mm:ss"),$scope.default_startTime=new Date(new Date($scope.default_startTime).getTime()-1e3*60*60*$scope.my.timeDiff).Format("yyyy-MM-dd hh:mm:ss"),UTC_startTime=$scope.format(new Date($scope.default_startTime).toUTCString(),"yyyy-MM-dd HH:mm:ss"),UTC_endTime=$scope.format(new Date($scope.default_endTime).toUTCString(),"yyyy-MM-dd HH:mm:ss");var data={gateway_id:gatewayId,region_guid:regionId,start_time:encodeURI(UTC_startTime),end_time:encodeURI(UTC_endTime),type:"history",size:""};$scope.delay=0,$scope.minDuration=0,$scope.message="",$scope.backdrop=!1,$scope.promise=null,$scope.templateUrl="./pages/custom-loading-template.html",$scope.getSensorDataProm=AuthService.myHttp(token,data,"GET","sensor").then(function(a){var b,c,d,e;if("0"==a.code&&a.content.time&&a.content.data){for(b=[],c=[],d=0;d<a.content.time.length;d++)c[d]=new Date(a.content.time[d]),b[d]=c[d].getTime(),b[d]-=1e3*60*(new Date).getTimezoneOffset(),b[d]=new Date(b[d]).Format("yyyy-MM-dd hh:mm:ss");e=a.content,new Highcharts.Chart({chart:{renderTo:"container",backgroundColor:"rgba(0,0,0,0)"},colors:["#000000","#CE0000","#FF79BC","#921AFF","#7D7DFF","#00CACA","#93FF93","#FF8040","#A8FF24","#AD5A5A","#8080C0","#A5A552","#424200","#642100"],title:{text:"Sensor History Data",x:-20},exporting:{enabled:!1,filename:"horticulture growing condition datasheet"},subtitle:{text:"Source Region: "+regionName,x:-20},marker:!1,noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",borderRadius:10,pointFormat:'<tr><td>{series.name}: </td><td style="text-align: right"><b>{point.y}</b></td></tr>',valueDecimals:3},legend:{align:"center",verticalAlign:"bottom"},series:e.data}),$scope.downLoad=function(){window.open("http://73.231.41.102:8080/sensor/history/export?user_id="+$cookieStore.get("user_id")+"&region_guid="+regionId+"&gateway_id="+gatewayId+"&start_time="+encodeURI(UTC_startTime)+"&end_time="+encodeURI(UTC_endTime))},$scope.toChartDetail=function(){var a,c,d,f,g,h,i,j,k,l,m,n,o,p;e.data||0!=e.data.length?($scope.chartDetailShow=!$scope.chartDetailShow,$scope.lastNextShow=!$scope.lastNextShow,$scope.chartShow=!$scope.chartShow,a=new Highcharts.Chart({chart:{renderTo:"chart_container"},title:{text:e.data[0].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[0].original_name+" condition datasheet"},colors:["#000000"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[0].original_name,data:e.data[0].original_data}]}),$scope.ExportChartDetailToExcel=function(){a.downloadXLS()},c=new Highcharts.Chart({chart:{renderTo:"chart_container1"},title:{text:e.data[1].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[1].original_name+" condition datasheet"},colors:["#CE0000"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[1].original_name,data:e.data[1].original_data}]}),$scope.ExportChartDetailToExcel1=function(){c.downloadXLS()},d=new Highcharts.Chart({chart:{renderTo:"chart_container2"},title:{text:e.data[2].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[2].original_name+" condition datasheet"},colors:["#FF79BC"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[2].original_name,data:e.data[2].original_data}]}),$scope.ExportChartDetailToExcel2=function(){d.downloadXLS()},f=new Highcharts.Chart({chart:{renderTo:"chart_container3"},title:{text:e.data[3].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[3].original_name+" condition datasheet"},colors:["#921AFF"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[3].original_name,data:e.data[3].original_data}]}),$scope.ExportChartDetailToExcel3=function(){f.downloadXLS()},g=new Highcharts.Chart({chart:{renderTo:"chart_container4"},title:{text:e.data[4].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[4].original_name+" condition datasheet"},colors:["#7D7DFF"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[4].original_name,data:e.data[4].original_data}]}),$scope.ExportChartDetailToExcel4=function(){g.downloadXLS()},h=new Highcharts.Chart({chart:{renderTo:"chart_container5"},title:{text:e.data[5].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[5].original_name+" condition datasheet"},colors:["#00CACA"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[5].original_name,data:e.data[5].original_data}]}),$scope.ExportChartDetailToExcel5=function(){h.downloadXLS()},i=new Highcharts.Chart({chart:{renderTo:"chart_container6"},title:{text:e.data[6].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[6].original_name+" condition datasheet"},colors:["#93FF93"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[6].original_name,data:e.data[6].original_data}]}),$scope.ExportChartDetailToExcel6=function(){i.downloadXLS()},j=new Highcharts.Chart({chart:{renderTo:"chart_container7"},title:{text:e.data[7].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[7].original_name+" condition datasheet"},colors:["#FF8040"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[7].original_name,data:e.data[7].original_data}]}),$scope.ExportChartDetailToExcel7=function(){j.downloadXLS()},k=new Highcharts.Chart({chart:{renderTo:"chart_container8"},title:{text:e.data[8].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[8].original_name+" condition datasheet"},colors:["#A8FF24"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[8].original_name,data:e.data[8].original_data}]}),$scope.ExportChartDetailToExcel8=function(){k.downloadXLS()},l=new Highcharts.Chart({chart:{renderTo:"chart_container9"},title:{text:e.data[9].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[9].original_name+" condition datasheet"},colors:["#AD5A5A"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[9].original_name,data:e.data[9].original_data}]}),$scope.ExportChartDetailToExcel9=function(){l.downloadXLS()},m=new Highcharts.Chart({chart:{renderTo:"chart_container10"},title:{text:e.data[10].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[10].original_name+" condition datasheet"},colors:["#8080C0"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[10].original_name,data:e.data[10].original_data}]}),$scope.ExportChartDetailToExcel10=function(){m.downloadXLS()},n=new Highcharts.Chart({chart:{renderTo:"chart_container11"},title:{text:e.data[11].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[11].original_name+" condition datasheet"},colors:["#A5A552"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[11].original_name,data:e.data[11].original_data}]}),$scope.ExportChartDetailToExcel11=function(){n.downloadXLS()},o=new Highcharts.Chart({chart:{renderTo:"chart_container12"},title:{text:e.data[12].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[12].original_name+" condition datasheet"},colors:["#424200"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[12].original_name,data:e.data[12].original_data}]}),$scope.ExportChartDetailToExcel12=function(){o.downloadXLS()},p=new Highcharts.Chart({chart:{renderTo:"chart_container13"},title:{text:e.data[13].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[13].original_name+" condition datasheet"},colors:["#642100"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[13].original_name,data:e.data[13].original_data}]}),$scope.ExportChartDetailToExcel13=function(){p.downloadXLS()}):toaster.pop({type:"error",title:"Error",body:"There is no data to display",timeout:POPTIMEOUT})}}else $scope.dataContent="noData"});
            }else if($scope.my.timeDiff == '168' || $scope.my.timeDiff == '720'){
                function selectFromTable(a){dataBase.transaction(function(b){b.executeSql(sqls[a],[],function(b,c){function e(a){var b={table_device_guid:$scope.device_guid,device_name:"",gateway_id:gatewayId,start_time:$scope.format(new Date(noDataDateDates[a]+" 00:00:00").toUTCString(),"yyyy-MM-dd HH:mm:ss"),end_time:$scope.format(new Date(noDataDateDates[a]+" 23:59:59").toUTCString(),"yyyy-MM-dd HH:mm:ss")};$scope.getSensorDataProm=AuthService.myHttp(token,b,"GET","sensor/sensorOneDay").then(function(b){var c,d,f,g,h,i,j,k,l,m,n;if("0"==b.code){for($scope.message=Math.round(100*((a+1)/$scope.vm.total)),c=[],d=[],f=[],g=[],h=[],i=[],j=[],k=[],l=0;l<b.content.time.length;l++)d[l]=new Date(b.content.time[l]),c[l]=d[l].getTime(),c[l]-=1e3*60*(new Date).getTimezoneOffset(),c[l]=new Date(c[l]).Format("yyyy-MM-dd hh:mm:ss");for(m=0;m<b.content.quarterObject.time.length;m++)f[m]=new Date(b.content.quarterObject.time[m]),i[m]=f[m].getTime(),i[m]-=1e3*60*(new Date).getTimezoneOffset(),i[m]=new Date(i[m]).Format("yyyy-MM-dd hh:mm:ss");for(m=0;m<b.content.halfYearObject.time.length;m++)g[m]=new Date(b.content.halfYearObject.time[m]),j[m]=g[m].getTime(),j[m]-=1e3*60*(new Date).getTimezoneOffset(),j[m]=new Date(j[m]).Format("yyyy-MM-dd hh:mm:ss");for(m=0;m<b.content.yearObject.time.length;m++)h[m]=new Date(b.content.yearObject.time[m]),k[m]=h[m].getTime(),k[m]-=1e3*60*(new Date).getTimezoneOffset(),k[m]=new Date(k[m]).Format("yyyy-MM-dd hh:mm:ss");if(dataBase.transaction(function(a){var d,e,f,g,h,l,m,n;for(d=0;d<b.content.time.length;d++)e="INSERT INTO sensorDataTable(device_guid,time,Carbon_Dioxide_original,Carbon_Dioxide,Substrate_PH_original,Substrate_PH,Substrate_Conductivity_original,Substrate_Conductivity,Substrate_Temperature_original,Substrate_Temperature,Air_Temperature_original,Air_Temperature,Ppfd_original,Ppfd,Liquid_PH_original,Liquid_PH,Substrate_Humidity_original,Substrate_Humidity,Liquid_DOC_original,Liquid_DOC,Liquid_Conductivity_original,Liquid_Conductivity,Air_Humidity_original,Air_Humidity,Substrate_DOC_original,Substrate_DOC,Illuminance_original,Illuminance,Lai_original,Lai) values ('"+$scope.device_guid+"','"+c[d]+"','"+b.content.data[0].original_data[d]+"','"+b.content.data[0].data[d]+"'"+",'"+b.content.data[1].original_data[d]+"','"+b.content.data[1].data[d]+"','"+b.content.data[2].original_data[d]+"','"+b.content.data[2].data[d]+"','"+b.content.data[3].original_data[d]+"','"+b.content.data[3].data[d]+"'"+",'"+b.content.data[4].original_data[d]+"','"+b.content.data[4].data[d]+"','"+b.content.data[5].original_data[d]+"','"+b.content.data[5].data[d]+"','"+b.content.data[6].original_data[d]+"','"+b.content.data[6].data[d]+"'"+",'"+b.content.data[7].original_data[d]+"','"+b.content.data[7].data[d]+"','"+b.content.data[8].original_data[d]+"','"+b.content.data[8].data[d]+"','"+b.content.data[9].original_data[d]+"','"+b.content.data[9].data[d]+"'"+",'"+b.content.data[10].original_data[d]+"','"+b.content.data[10].data[d]+"','"+b.content.data[11].original_data[d]+"','"+b.content.data[11].data[d]+"','"+b.content.data[12].original_data[d]+"','"+b.content.data[12].data[d]+"'"+",'"+b.content.data[13].original_data[d]+"','"+b.content.data[13].data[d]+"')",a.executeSql(e);for(f=0;f<b.content.quarterObject.time.length;f++)g="INSERT INTO sensorQuarterDataTable(device_guid,time,Carbon_Dioxide_original,Carbon_Dioxide,Substrate_PH_original,Substrate_PH,Substrate_Conductivity_original,Substrate_Conductivity,Substrate_Temperature_original,Substrate_Temperature,Air_Temperature_original,Air_Temperature,Ppfd_original,Ppfd,Liquid_PH_original,Liquid_PH,Substrate_Humidity_original,Substrate_Humidity,Liquid_DOC_original,Liquid_DOC,Liquid_Conductivity_original,Liquid_Conductivity,Air_Humidity_original,Air_Humidity,Substrate_DOC_original,Substrate_DOC,Illuminance_original,Illuminance,Lai_original,Lai) values ('"+$scope.device_guid+"','"+i[f]+"','"+b.content.quarterObject.data[0].original_data[f]+"','"+b.content.quarterObject.data[0].data[f]+"'"+",'"+b.content.quarterObject.data[1].original_data[f]+"','"+b.content.quarterObject.data[1].data[f]+"','"+b.content.quarterObject.data[2].original_data[f]+"','"+b.content.quarterObject.data[2].data[f]+"','"+b.content.quarterObject.data[3].original_data[f]+"','"+b.content.quarterObject.data[3].data[f]+"'"+",'"+b.content.quarterObject.data[4].original_data[f]+"','"+b.content.quarterObject.data[4].data[f]+"','"+b.content.quarterObject.data[5].original_data[f]+"','"+b.content.quarterObject.data[5].data[f]+"','"+b.content.quarterObject.data[6].original_data[f]+"','"+b.content.quarterObject.data[6].data[f]+"'"+",'"+b.content.quarterObject.data[7].original_data[f]+"','"+b.content.quarterObject.data[7].data[f]+"','"+b.content.quarterObject.data[8].original_data[f]+"','"+b.content.quarterObject.data[8].data[f]+"','"+b.content.quarterObject.data[9].original_data[f]+"','"+b.content.quarterObject.data[9].data[f]+"'"+",'"+b.content.quarterObject.data[10].original_data[f]+"','"+b.content.quarterObject.data[10].data[f]+"','"+b.content.quarterObject.data[11].original_data[f]+"','"+b.content.quarterObject.data[11].data[f]+"','"+b.content.quarterObject.data[12].original_data[f]+"','"+b.content.quarterObject.data[12].data[f]+"'"+",'"+b.content.quarterObject.data[13].original_data[f]+"','"+b.content.quarterObject.data[13].data[f]+"')",a.executeSql(g);for(h=0;h<b.content.quarterObject.time.length;h++)l="INSERT INTO sensorHalfYearDataTable(device_guid,time,Carbon_Dioxide_original,Carbon_Dioxide,Substrate_PH_original,Substrate_PH,Substrate_Conductivity_original,Substrate_Conductivity,Substrate_Temperature_original,Substrate_Temperature,Air_Temperature_original,Air_Temperature,Ppfd_original,Ppfd,Liquid_PH_original,Liquid_PH,Substrate_Humidity_original,Substrate_Humidity,Liquid_DOC_original,Liquid_DOC,Liquid_Conductivity_original,Liquid_Conductivity,Air_Humidity_original,Air_Humidity,Substrate_DOC_original,Substrate_DOC,Illuminance_original,Illuminance,Lai_original,Lai) values ('"+$scope.device_guid+"','"+j[h]+"','"+b.content.halfYearObject.data[0].original_data[h]+"','"+b.content.halfYearObject.data[0].data[h]+"'"+",'"+b.content.halfYearObject.data[1].original_data[h]+"','"+b.content.halfYearObject.data[1].data[h]+"','"+b.content.halfYearObject.data[2].original_data[h]+"','"+b.content.halfYearObject.data[2].data[h]+"','"+b.content.halfYearObject.data[3].original_data[h]+"','"+b.content.halfYearObject.data[3].data[h]+"'"+",'"+b.content.halfYearObject.data[4].original_data[h]+"','"+b.content.halfYearObject.data[4].data[h]+"','"+b.content.halfYearObject.data[5].original_data[h]+"','"+b.content.halfYearObject.data[5].data[h]+"','"+b.content.halfYearObject.data[6].original_data[h]+"','"+b.content.halfYearObject.data[6].data[h]+"'"+",'"+b.content.halfYearObject.data[7].original_data[h]+"','"+b.content.halfYearObject.data[7].data[h]+"','"+b.content.halfYearObject.data[8].original_data[h]+"','"+b.content.halfYearObject.data[8].data[h]+"','"+b.content.halfYearObject.data[9].original_data[h]+"','"+b.content.halfYearObject.data[9].data[h]+"'"+",'"+b.content.halfYearObject.data[10].original_data[h]+"','"+b.content.halfYearObject.data[10].data[h]+"','"+b.content.halfYearObject.data[11].original_data[h]+"','"+b.content.halfYearObject.data[11].data[h]+"','"+b.content.halfYearObject.data[12].original_data[h]+"','"+b.content.halfYearObject.data[12].data[h]+"'"+",'"+b.content.halfYearObject.data[13].original_data[h]+"','"+b.content.halfYearObject.data[13].data[h]+"')",a.executeSql(l);for(m=0;m<b.content.yearObject.time.length;m++)n="INSERT INTO sensorYearDataTable(device_guid,time,Carbon_Dioxide_original,Carbon_Dioxide,Substrate_PH_original,Substrate_PH,Substrate_Conductivity_original,Substrate_Conductivity,Substrate_Temperature_original,Substrate_Temperature,Air_Temperature_original,Air_Temperature,Ppfd_original,Ppfd,Liquid_PH_original,Liquid_PH,Substrate_Humidity_original,Substrate_Humidity,Liquid_DOC_original,Liquid_DOC,Liquid_Conductivity_original,Liquid_Conductivity,Air_Humidity_original,Air_Humidity,Substrate_DOC_original,Substrate_DOC,Illuminance_original,Illuminance,Lai_original,Lai) values ('"+$scope.device_guid+"','"+k[m]+"','"+b.content.yearObject.data[0].original_data[m]+"','"+b.content.yearObject.data[0].data[m]+"'"+",'"+b.content.yearObject.data[1].original_data[m]+"','"+b.content.yearObject.data[1].data[m]+"','"+b.content.yearObject.data[2].original_data[m]+"','"+b.content.yearObject.data[2].data[m]+"','"+b.content.yearObject.data[3].original_data[m]+"','"+b.content.yearObject.data[3].data[m]+"'"+",'"+b.content.yearObject.data[4].original_data[m]+"','"+b.content.yearObject.data[4].data[m]+"','"+b.content.yearObject.data[5].original_data[m]+"','"+b.content.yearObject.data[5].data[m]+"','"+b.content.yearObject.data[6].original_data[m]+"','"+b.content.yearObject.data[6].data[m]+"'"+",'"+b.content.yearObject.data[7].original_data[m]+"','"+b.content.yearObject.data[7].data[m]+"','"+b.content.yearObject.data[8].original_data[m]+"','"+b.content.yearObject.data[8].data[m]+"','"+b.content.yearObject.data[9].original_data[m]+"','"+b.content.yearObject.data[9].data[m]+"'"+",'"+b.content.yearObject.data[10].original_data[m]+"','"+b.content.yearObject.data[10].data[m]+"','"+b.content.yearObject.data[11].original_data[m]+"','"+b.content.yearObject.data[11].data[m]+"','"+b.content.yearObject.data[12].original_data[m]+"','"+b.content.yearObject.data[12].data[m]+"'"+",'"+b.content.yearObject.data[13].original_data[m]+"','"+b.content.yearObject.data[13].data[m]+"')",a.executeSql(n)}),a+1!=noDataDateDates.length)return $timeout(function(){e(a+1)},1500);a+1==noDataDateDates.length&&(toaster.pop({type:"success",title:"Success",body:"Download successfully , please waiting...",timeout:POPTIMEOUT}),n={},dataBase.transaction(function(a){var b="SELECT * FROM sensorDataTable WHERE time BETWEEN'"+$scope.default_startTime+"' AND '"+$scope.default_endTime+"' AND device_guid = '"+$scope.device_guid+"' ORDER BY time";a.executeSql(b,[],function(a,b){var V,c=[],d=[],e={original_name:"Carbon_Dioxide(ppm)",name:"Carbon_Dioxide(ppm)"},f=[],g=[],h={original_name:"Substrate_PH(PH)",name:"Substrate_PH(PH)"},i=[],j=[],k={original_name:"Substrate_Conductivity(mS/cm)",name:"Substrate_Conductivity(mS/cm)"},l=[],m=[],o={original_name:"Substrate_Temperature(°C)",name:"Substrate_Temperature(°C)"},p=[],q=[],r={original_name:"Air_Temperature(°C)",name:"Air_Temperature(°C)"},s=[],t=[],u={original_name:"Ppfd(μmol㎡/s)",name:"Ppfd(100*μmol㎡/s)"},v=[],w=[],x={original_name:"Liquid_PH(PH)",name:"Liquid_PH(PH)"},y=[],z=[],A={original_name:"Substrate_Humidity(%)",name:"Substrate_Humidity(%)"},B=[],C=[],D={original_name:"Liquid_DOC(mg/l)",name:"Liquid_DOC(mg/l)"},E=[],F=[],G={original_name:"Liquid_Conductivity(mS/cm)",name:"Liquid_Conductivity(mS/cm)"},H=[],I=[],J={original_name:"Air_Humidity(%)",name:"Air_Humidity(%)"},K=[],L=[],M={original_name:"Substrate_DOC(mg/l)",name:"Substrate_DOC(mg/l)"},N=[],O=[],P={original_name:"Illuminance(lux)",name:"Illuminance(100*lux)"},Q=[],R=[],S={original_name:"Lai()",name:"Lai()"},T=[],U=[];if(b)for(V=0;V<b.rows.length;V++)c.push(b.rows[V].time),f.push(parseFloat(b.rows[V].Carbon_Dioxide_original)),g.push(parseFloat(b.rows[V].Carbon_Dioxide)),i.push(parseFloat(b.rows[V].Substrate_PH_original)),j.push(parseFloat(b.rows[V].Substrate_PH)),l.push(parseFloat(b.rows[V].Substrate_Conductivity_original)),m.push(parseFloat(b.rows[V].Substrate_Conductivity)),p.push(parseFloat(b.rows[V].Substrate_Temperature_original)),q.push(parseFloat(b.rows[V].Substrate_Temperature)),s.push(parseFloat(b.rows[V].Air_Temperature_original)),t.push(parseFloat(b.rows[V].Air_Temperature)),v.push(parseFloat(b.rows[V].Ppfd_original)),w.push(parseFloat(b.rows[V].Ppfd)),y.push(parseFloat(b.rows[V].Liquid_PH_original)),z.push(parseFloat(b.rows[V].Liquid_PH)),B.push(parseFloat(b.rows[V].Substrate_Humidity_original)),C.push(parseFloat(b.rows[V].Substrate_Humidity)),E.push(parseFloat(b.rows[V].Liquid_DOC_original)),F.push(parseFloat(b.rows[V].Liquid_DOC)),H.push(parseFloat(b.rows[V].Liquid_Conductivity_original)),I.push(parseFloat(b.rows[V].Liquid_Conductivity)),K.push(parseFloat(b.rows[V].Air_Humidity_original)),L.push(parseFloat(b.rows[V].Air_Humidity)),N.push(parseFloat(b.rows[V].Substrate_DOC_original)),O.push(parseFloat(b.rows[V].Substrate_DOC)),Q.push(parseFloat(b.rows[V].Illuminance_original)),R.push(parseFloat(b.rows[V].Illuminance)),T.push(parseFloat(b.rows[V].Lai_original)),U.push(parseFloat(b.rows[V].Lai));e.original_data=f,e.data=g,h.original_data=i,h.data=j,k.original_data=l,k.data=m,o.original_data=p,o.data=q,r.original_data=s,r.data=t,u.original_data=v,u.data=w,x.original_data=y,x.data=z,A.original_data=B,A.data=C,D.original_data=E,D.data=F,G.original_data=H,G.data=I,J.original_data=K,J.data=L,M.original_data=N,M.data=O,P.original_data=Q,P.data=R,S.original_data=T,S.data=U,d.push(r),d.push(J),d.push(o),d.push(A),d.push(h),d.push(e),d.push(P),d.push(k),d.push(u),d.push(x),d.push(S),d.push(G),d.push(D),d.push(M),n.data=d,n.time=c,new Highcharts.Chart({chart:{renderTo:"container",backgroundColor:"rgba(0,0,0,0)"},colors:["#000000","#CE0000","#FF79BC","#921AFF","#7D7DFF","#00CACA","#93FF93","#FF8040","#A8FF24","#AD5A5A","#8080C0","#A5A552","#424200","#642100"],title:{text:"Sensor History Data",x:-20},exporting:{enabled:!1,filename:"horticulture growing condition datasheet"},subtitle:{text:"Source Region: "+regionName,x:-20},marker:!1,noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",borderRadius:10,pointFormat:'<tr><td>{series.name}: </td><td style="text-align: right"><b>{point.y}</b></td></tr>',valueDecimals:3},legend:{align:"center",verticalAlign:"bottom"},series:n.data}),$scope.downLoad=function(){window.open("http://73.231.41.102:8080/sensor/history/export?user_id="+$cookieStore.get("user_id")+"&region_guid="+regionId+"&gateway_id="+gatewayId+"&start_time="+encodeURI(UTC_startTime)+"&end_time="+encodeURI(UTC_endTime))},$scope.toChartDetail=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,o;n.data||0!=n.data.length?($scope.chartDetailShow=!$scope.chartDetailShow,$scope.lastNextShow=!$scope.lastNextShow,$scope.chartShow=!$scope.chartShow,a=new Highcharts.Chart({chart:{renderTo:"chart_container"},title:{text:n.data[0].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[0].original_name+" condition datasheet"},colors:["#000000"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[0].original_name,data:n.data[0].original_data}]}),$scope.ExportChartDetailToExcel=function(){a.downloadXLS()},b=new Highcharts.Chart({chart:{renderTo:"chart_container1"},title:{text:n.data[1].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[1].original_name+" condition datasheet"},colors:["#CE0000"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[1].original_name,data:n.data[1].original_data}]}),$scope.ExportChartDetailToExcel1=function(){b.downloadXLS()},c=new Highcharts.Chart({chart:{renderTo:"chart_container2"},title:{text:n.data[2].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[2].original_name+" condition datasheet"},colors:["#FF79BC"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[2].original_name,data:n.data[2].original_data}]}),$scope.ExportChartDetailToExcel2=function(){c.downloadXLS()},d=new Highcharts.Chart({chart:{renderTo:"chart_container3"},title:{text:n.data[3].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[3].original_name+" condition datasheet"},colors:["#921AFF"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[3].original_name,data:n.data[3].original_data}]}),$scope.ExportChartDetailToExcel3=function(){d.downloadXLS()},e=new Highcharts.Chart({chart:{renderTo:"chart_container4"},title:{text:n.data[4].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[4].original_name+" condition datasheet"},colors:["#7D7DFF"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[4].original_name,data:n.data[4].original_data}]}),$scope.ExportChartDetailToExcel4=function(){e.downloadXLS()},f=new Highcharts.Chart({chart:{renderTo:"chart_container5"},title:{text:n.data[5].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[5].original_name+" condition datasheet"},colors:["#00CACA"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[5].original_name,data:n.data[5].original_data}]}),$scope.ExportChartDetailToExcel5=function(){f.downloadXLS()},g=new Highcharts.Chart({chart:{renderTo:"chart_container6"},title:{text:n.data[6].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[6].original_name+" condition datasheet"},colors:["#93FF93"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[6].original_name,data:n.data[6].original_data}]}),$scope.ExportChartDetailToExcel6=function(){g.downloadXLS()},h=new Highcharts.Chart({chart:{renderTo:"chart_container7"},title:{text:n.data[7].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[7].original_name+" condition datasheet"},colors:["#FF8040"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[7].original_name,data:n.data[7].original_data}]}),$scope.ExportChartDetailToExcel7=function(){h.downloadXLS()},i=new Highcharts.Chart({chart:{renderTo:"chart_container8"},title:{text:n.data[8].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[8].original_name+" condition datasheet"},colors:["#A8FF24"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[8].original_name,data:n.data[8].original_data}]}),$scope.ExportChartDetailToExcel8=function(){i.downloadXLS()},j=new Highcharts.Chart({chart:{renderTo:"chart_container9"},title:{text:n.data[9].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[9].original_name+" condition datasheet"},colors:["#AD5A5A"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[9].original_name,data:n.data[9].original_data}]}),$scope.ExportChartDetailToExcel9=function(){j.downloadXLS()},k=new Highcharts.Chart({chart:{renderTo:"chart_container10"},title:{text:n.data[10].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[10].original_name+" condition datasheet"},colors:["#8080C0"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[10].original_name,data:n.data[10].original_data}]}),$scope.ExportChartDetailToExcel10=function(){k.downloadXLS()},l=new Highcharts.Chart({chart:{renderTo:"chart_container11"},title:{text:n.data[11].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[11].original_name+" condition datasheet"},colors:["#A5A552"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[11].original_name,data:n.data[11].original_data}]}),$scope.ExportChartDetailToExcel11=function(){l.downloadXLS()},m=new Highcharts.Chart({chart:{renderTo:"chart_container12"},title:{text:n.data[12].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[12].original_name+" condition datasheet"},colors:["#424200"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[12].original_name,data:n.data[12].original_data}]}),$scope.ExportChartDetailToExcel12=function(){m.downloadXLS()},o=new Highcharts.Chart({chart:{renderTo:"chart_container13"},title:{text:n.data[13].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[13].original_name+" condition datasheet"},colors:["#642100"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[13].original_name,data:n.data[13].original_data}]}),$scope.ExportChartDetailToExcel13=function(){o.downloadXLS()}):toaster.pop({type:"error",title:"Error",body:"There is no data to display",timeout:POPTIMEOUT})}})}))}})}var d,f;return 0==c.rows.length&&noDataDateDates.push(sqls[a].substring(54,64)),a+1!=newDate.length?$timeout(function(){selectFromTable(a+1)},1):(noDataDateDates&&noDataDateDates.length>0?($scope.delay=0,$scope.minDuration=0,$scope.message="0",$scope.backdrop=!1,$scope.promise=null,$scope.templateUrl="./pages/down-loading-template.html",$scope.vm={},$scope.vm.total=noDataDateDates.length,d=0,e(d)):noDataDateDates&&0!=noDataDateDates.length||(f={},dataBase.transaction(function(a){var b="SELECT * FROM sensorDataTable WHERE time BETWEEN'"+$scope.default_startTime+"' AND '"+$scope.default_endTime+"' AND device_guid = '"+$scope.device_guid+"' ORDER BY time";a.executeSql(b,[],function(a,b){var V,c=[],d=[],e={original_name:"Carbon_Dioxide(ppm)",name:"Carbon_Dioxide(ppm)"},g=[],h=[],i={original_name:"Substrate_PH(PH)",name:"Substrate_PH(PH)"},j=[],k=[],l={original_name:"Substrate_Conductivity(mS/cm)",name:"Substrate_Conductivity(mS/cm)"},m=[],n=[],o={original_name:"Substrate_Temperature(°C)",name:"Substrate_Temperature(°C)"},p=[],q=[],r={original_name:"Air_Temperature(°C)",name:"Air_Temperature(°C)"},s=[],t=[],u={original_name:"Ppfd(μmol㎡/s)",name:"Ppfd(100*μmol㎡/s)"},v=[],w=[],x={original_name:"Liquid_PH(PH)",name:"Liquid_PH(PH)"},y=[],z=[],A={original_name:"Substrate_Humidity(%)",name:"Substrate_Humidity(%)"},B=[],C=[],D={original_name:"Liquid_DOC(mg/l)",name:"Liquid_DOC(mg/l)"},E=[],F=[],G={original_name:"Liquid_Conductivity(mS/cm)",name:"Liquid_Conductivity(mS/cm)"},H=[],I=[],J={original_name:"Air_Humidity(%)",name:"Air_Humidity(%)"},K=[],L=[],M={original_name:"Substrate_DOC(mg/l)",name:"Substrate_DOC(mg/l)"},N=[],O=[],P={original_name:"Illuminance(lux)",name:"Illuminance(100*lux)"},Q=[],R=[],S={original_name:"Lai()",name:"Lai()"},T=[],U=[];if(b)for(V=0;V<b.rows.length;V++)c.push(b.rows[V].time),g.push(parseFloat(b.rows[V].Carbon_Dioxide_original)),h.push(parseFloat(b.rows[V].Carbon_Dioxide)),j.push(parseFloat(b.rows[V].Substrate_PH_original)),k.push(parseFloat(b.rows[V].Substrate_PH)),m.push(parseFloat(b.rows[V].Substrate_Conductivity_original)),n.push(parseFloat(b.rows[V].Substrate_Conductivity)),p.push(parseFloat(b.rows[V].Substrate_Temperature_original)),q.push(parseFloat(b.rows[V].Substrate_Temperature)),s.push(parseFloat(b.rows[V].Air_Temperature_original)),t.push(parseFloat(b.rows[V].Air_Temperature)),v.push(parseFloat(b.rows[V].Ppfd_original)),w.push(parseFloat(b.rows[V].Ppfd)),y.push(parseFloat(b.rows[V].Liquid_PH_original)),z.push(parseFloat(b.rows[V].Liquid_PH)),B.push(parseFloat(b.rows[V].Substrate_Humidity_original)),C.push(parseFloat(b.rows[V].Substrate_Humidity)),E.push(parseFloat(b.rows[V].Liquid_DOC_original)),F.push(parseFloat(b.rows[V].Liquid_DOC)),H.push(parseFloat(b.rows[V].Liquid_Conductivity_original)),I.push(parseFloat(b.rows[V].Liquid_Conductivity)),K.push(parseFloat(b.rows[V].Air_Humidity_original)),L.push(parseFloat(b.rows[V].Air_Humidity)),N.push(parseFloat(b.rows[V].Substrate_DOC_original)),O.push(parseFloat(b.rows[V].Substrate_DOC)),Q.push(parseFloat(b.rows[V].Illuminance_original)),R.push(parseFloat(b.rows[V].Illuminance)),T.push(parseFloat(b.rows[V].Lai_original)),U.push(parseFloat(b.rows[V].Lai));e.original_data=g,e.data=h,i.original_data=j,i.data=k,l.original_data=m,l.data=n,o.original_data=p,o.data=q,r.original_data=s,r.data=t,u.original_data=v,u.data=w,x.original_data=y,x.data=z,A.original_data=B,A.data=C,D.original_data=E,D.data=F,G.original_data=H,G.data=I,J.original_data=K,J.data=L,M.original_data=N,M.data=O,P.original_data=Q,P.data=R,S.original_data=T,S.data=U,d.push(r),d.push(J),d.push(o),d.push(A),d.push(i),d.push(e),d.push(P),d.push(l),d.push(u),d.push(x),d.push(S),d.push(G),d.push(D),d.push(M),f.data=d,f.time=c,new Highcharts.Chart({chart:{renderTo:"container",backgroundColor:"rgba(0,0,0,0)"},colors:["#000000","#CE0000","#FF79BC","#921AFF","#7D7DFF","#00CACA","#93FF93","#FF8040","#A8FF24","#AD5A5A","#8080C0","#A5A552","#424200","#642100"],title:{text:"Sensor History Data",x:-20},exporting:{enabled:!1,filename:"horticulture growing condition datasheet"},subtitle:{text:"Source Region: "+regionName,x:-20},marker:!1,noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",borderRadius:10,pointFormat:'<tr><td>{series.name}: </td><td style="text-align: right"><b>{point.y}</b></td></tr>',valueDecimals:3},legend:{align:"center",verticalAlign:"bottom"},series:f.data}),$scope.downLoad=function(){window.open("http://73.231.41.102:8080/sensor/history/export?user_id="+$cookieStore.get("user_id")+"&region_guid="+regionId+"&gateway_id="+gatewayId+"&start_time="+encodeURI(UTC_startTime)+"&end_time="+encodeURI(UTC_endTime))},$scope.toChartDetail=function(){var a,b,c,d,e,g,h,i,j,k,l,m,n,o;f.data||0!=f.data.length?($scope.chartDetailShow=!$scope.chartDetailShow,$scope.lastNextShow=!$scope.lastNextShow,$scope.chartShow=!$scope.chartShow,a=new Highcharts.Chart({chart:{renderTo:"chart_container"},title:{text:f.data[0].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[0].original_name+" condition datasheet"},colors:["#000000"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[0].original_name,data:f.data[0].original_data}]}),$scope.ExportChartDetailToExcel=function(){a.downloadXLS()},b=new Highcharts.Chart({chart:{renderTo:"chart_container1"},title:{text:f.data[1].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[1].original_name+" condition datasheet"},colors:["#CE0000"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[1].original_name,data:f.data[1].original_data}]}),$scope.ExportChartDetailToExcel1=function(){b.downloadXLS()},c=new Highcharts.Chart({chart:{renderTo:"chart_container2"},title:{text:f.data[2].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[2].original_name+" condition datasheet"},colors:["#FF79BC"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[2].original_name,data:f.data[2].original_data}]}),$scope.ExportChartDetailToExcel2=function(){c.downloadXLS()},d=new Highcharts.Chart({chart:{renderTo:"chart_container3"},title:{text:f.data[3].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[3].original_name+" condition datasheet"},colors:["#921AFF"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[3].original_name,data:f.data[3].original_data}]}),$scope.ExportChartDetailToExcel3=function(){d.downloadXLS()},e=new Highcharts.Chart({chart:{renderTo:"chart_container4"},title:{text:f.data[4].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[4].original_name+" condition datasheet"},colors:["#7D7DFF"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[4].original_name,data:f.data[4].original_data}]}),$scope.ExportChartDetailToExcel4=function(){e.downloadXLS()},g=new Highcharts.Chart({chart:{renderTo:"chart_container5"},title:{text:f.data[5].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[5].original_name+" condition datasheet"},colors:["#00CACA"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[5].original_name,data:f.data[5].original_data}]}),$scope.ExportChartDetailToExcel5=function(){g.downloadXLS()},h=new Highcharts.Chart({chart:{renderTo:"chart_container6"},title:{text:f.data[6].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[6].original_name+" condition datasheet"},colors:["#93FF93"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[6].original_name,data:f.data[6].original_data}]}),$scope.ExportChartDetailToExcel6=function(){h.downloadXLS()},i=new Highcharts.Chart({chart:{renderTo:"chart_container7"},title:{text:f.data[7].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[7].original_name+" condition datasheet"},colors:["#FF8040"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[7].original_name,data:f.data[7].original_data}]}),$scope.ExportChartDetailToExcel7=function(){i.downloadXLS()},j=new Highcharts.Chart({chart:{renderTo:"chart_container8"},title:{text:f.data[8].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[8].original_name+" condition datasheet"},colors:["#A8FF24"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[8].original_name,data:f.data[8].original_data}]}),$scope.ExportChartDetailToExcel8=function(){j.downloadXLS()
                },k=new Highcharts.Chart({chart:{renderTo:"chart_container9"},title:{text:f.data[9].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[9].original_name+" condition datasheet"},colors:["#AD5A5A"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[9].original_name,data:f.data[9].original_data}]}),$scope.ExportChartDetailToExcel9=function(){k.downloadXLS()},l=new Highcharts.Chart({chart:{renderTo:"chart_container10"},title:{text:f.data[10].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[10].original_name+" condition datasheet"},colors:["#8080C0"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[10].original_name,data:f.data[10].original_data}]}),$scope.ExportChartDetailToExcel10=function(){l.downloadXLS()},m=new Highcharts.Chart({chart:{renderTo:"chart_container11"},title:{text:f.data[11].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[11].original_name+" condition datasheet"},colors:["#A5A552"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[11].original_name,data:f.data[11].original_data}]}),$scope.ExportChartDetailToExcel11=function(){m.downloadXLS()},n=new Highcharts.Chart({chart:{renderTo:"chart_container12"},title:{text:f.data[12].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[12].original_name+" condition datasheet"},colors:["#424200"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[12].original_name,data:f.data[12].original_data}]}),$scope.ExportChartDetailToExcel12=function(){n.downloadXLS()},o=new Highcharts.Chart({chart:{renderTo:"chart_container13"},title:{text:f.data[13].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[13].original_name+" condition datasheet"},colors:["#642100"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[13].original_name,data:f.data[13].original_data}]}),$scope.ExportChartDetailToExcel13=function(){o.downloadXLS()}):toaster.pop({type:"error",title:"Error",body:"There is no data to display",timeout:POPTIMEOUT})}})})),void 0)})})}var time1,time2,dayDiff,newDate,i,sqls,y,noDataDateDates,x;for(toaster.pop({type:"success",title:"",body:"Please waiting ...",timeout:POPTIMEOUT}),$scope.default_endTime=new Date(new Date($scope.default_startTime).getTime()).Format("yyyy-MM-dd hh:mm:ss"),$scope.default_startTime=new Date(new Date($scope.default_startTime).getTime()-1e3*60*60*$scope.my.timeDiff).Format("yyyy-MM-dd hh:mm:ss"),UTC_startTime=$scope.format(new Date($scope.default_startTime).toUTCString(),"yyyy-MM-dd HH:mm:ss"),UTC_endTime=$scope.format(new Date($scope.default_endTime).toUTCString(),"yyyy-MM-dd HH:mm:ss"),time1=$scope.default_startTime.substring(0,10),time2=$scope.default_endTime.substring(0,10),dayDiff=DateDiff(time1,time2)+1,newDate=[],i=0;dayDiff>i;i++)newDate[i]=getNewDay(time1,i);for(sqls=[],y=0;y<newDate.length;y++)sqls[y]="SELECT * FROM sensorYearDataTable WHERE time BETWEEN '"+newDate[y]+" 00:00:00"+"' AND '"+newDate[y]+" 23:59:59"+"' AND device_guid = '"+$scope.device_guid+"'";noDataDateDates=[],x=0,selectFromTable(x);
            }else if($scope.my.timeDiff == '2160') {
                function selectFromTable(a){dataBase.transaction(function(b){b.executeSql(sqls[a],[],function(b,c){function e(a){var b={table_device_guid:$scope.device_guid,device_name:"",gateway_id:gatewayId,start_time:$scope.format(new Date(noDataDateDates[a]+" 00:00:00").toUTCString(),"yyyy-MM-dd HH:mm:ss"),end_time:$scope.format(new Date(noDataDateDates[a]+" 23:59:59").toUTCString(),"yyyy-MM-dd HH:mm:ss")};$scope.getSensorDataProm=AuthService.myHttp(token,b,"GET","sensor/sensorOneDay").then(function(b){var c,d,f,g,h,i,j,k,l,m,n;if("0"==b.code){for($scope.message=Math.round(100*((a+1)/$scope.vm.total)),c=[],d=[],f=[],g=[],h=[],i=[],j=[],k=[],l=0;l<b.content.time.length;l++)d[l]=new Date(b.content.time[l]),c[l]=d[l].getTime(),c[l]-=1e3*60*(new Date).getTimezoneOffset(),c[l]=new Date(c[l]).Format("yyyy-MM-dd hh:mm:ss");for(m=0;m<b.content.quarterObject.time.length;m++)f[m]=new Date(b.content.quarterObject.time[m]),i[m]=f[m].getTime(),i[m]-=1e3*60*(new Date).getTimezoneOffset(),i[m]=new Date(i[m]).Format("yyyy-MM-dd hh:mm:ss");for(m=0;m<b.content.halfYearObject.time.length;m++)g[m]=new Date(b.content.halfYearObject.time[m]),j[m]=g[m].getTime(),j[m]-=1e3*60*(new Date).getTimezoneOffset(),j[m]=new Date(j[m]).Format("yyyy-MM-dd hh:mm:ss");for(m=0;m<b.content.yearObject.time.length;m++)h[m]=new Date(b.content.yearObject.time[m]),k[m]=h[m].getTime(),k[m]-=1e3*60*(new Date).getTimezoneOffset(),k[m]=new Date(k[m]).Format("yyyy-MM-dd hh:mm:ss");if(dataBase.transaction(function(a){var d,e,f,g,h,l,m,n;for(d=0;d<b.content.time.length;d++)e="INSERT INTO sensorDataTable(device_guid,time,Carbon_Dioxide_original,Carbon_Dioxide,Substrate_PH_original,Substrate_PH,Substrate_Conductivity_original,Substrate_Conductivity,Substrate_Temperature_original,Substrate_Temperature,Air_Temperature_original,Air_Temperature,Ppfd_original,Ppfd,Liquid_PH_original,Liquid_PH,Substrate_Humidity_original,Substrate_Humidity,Liquid_DOC_original,Liquid_DOC,Liquid_Conductivity_original,Liquid_Conductivity,Air_Humidity_original,Air_Humidity,Substrate_DOC_original,Substrate_DOC,Illuminance_original,Illuminance,Lai_original,Lai) values ('"+$scope.device_guid+"','"+c[d]+"','"+b.content.data[0].original_data[d]+"','"+b.content.data[0].data[d]+"'"+",'"+b.content.data[1].original_data[d]+"','"+b.content.data[1].data[d]+"','"+b.content.data[2].original_data[d]+"','"+b.content.data[2].data[d]+"','"+b.content.data[3].original_data[d]+"','"+b.content.data[3].data[d]+"'"+",'"+b.content.data[4].original_data[d]+"','"+b.content.data[4].data[d]+"','"+b.content.data[5].original_data[d]+"','"+b.content.data[5].data[d]+"','"+b.content.data[6].original_data[d]+"','"+b.content.data[6].data[d]+"'"+",'"+b.content.data[7].original_data[d]+"','"+b.content.data[7].data[d]+"','"+b.content.data[8].original_data[d]+"','"+b.content.data[8].data[d]+"','"+b.content.data[9].original_data[d]+"','"+b.content.data[9].data[d]+"'"+",'"+b.content.data[10].original_data[d]+"','"+b.content.data[10].data[d]+"','"+b.content.data[11].original_data[d]+"','"+b.content.data[11].data[d]+"','"+b.content.data[12].original_data[d]+"','"+b.content.data[12].data[d]+"'"+",'"+b.content.data[13].original_data[d]+"','"+b.content.data[13].data[d]+"')",a.executeSql(e);for(f=0;f<b.content.quarterObject.time.length;f++)g="INSERT INTO sensorQuarterDataTable(device_guid,time,Carbon_Dioxide_original,Carbon_Dioxide,Substrate_PH_original,Substrate_PH,Substrate_Conductivity_original,Substrate_Conductivity,Substrate_Temperature_original,Substrate_Temperature,Air_Temperature_original,Air_Temperature,Ppfd_original,Ppfd,Liquid_PH_original,Liquid_PH,Substrate_Humidity_original,Substrate_Humidity,Liquid_DOC_original,Liquid_DOC,Liquid_Conductivity_original,Liquid_Conductivity,Air_Humidity_original,Air_Humidity,Substrate_DOC_original,Substrate_DOC,Illuminance_original,Illuminance,Lai_original,Lai) values ('"+$scope.device_guid+"','"+i[f]+"','"+b.content.quarterObject.data[0].original_data[f]+"','"+b.content.quarterObject.data[0].data[f]+"'"+",'"+b.content.quarterObject.data[1].original_data[f]+"','"+b.content.quarterObject.data[1].data[f]+"','"+b.content.quarterObject.data[2].original_data[f]+"','"+b.content.quarterObject.data[2].data[f]+"','"+b.content.quarterObject.data[3].original_data[f]+"','"+b.content.quarterObject.data[3].data[f]+"'"+",'"+b.content.quarterObject.data[4].original_data[f]+"','"+b.content.quarterObject.data[4].data[f]+"','"+b.content.quarterObject.data[5].original_data[f]+"','"+b.content.quarterObject.data[5].data[f]+"','"+b.content.quarterObject.data[6].original_data[f]+"','"+b.content.quarterObject.data[6].data[f]+"'"+",'"+b.content.quarterObject.data[7].original_data[f]+"','"+b.content.quarterObject.data[7].data[f]+"','"+b.content.quarterObject.data[8].original_data[f]+"','"+b.content.quarterObject.data[8].data[f]+"','"+b.content.quarterObject.data[9].original_data[f]+"','"+b.content.quarterObject.data[9].data[f]+"'"+",'"+b.content.quarterObject.data[10].original_data[f]+"','"+b.content.quarterObject.data[10].data[f]+"','"+b.content.quarterObject.data[11].original_data[f]+"','"+b.content.quarterObject.data[11].data[f]+"','"+b.content.quarterObject.data[12].original_data[f]+"','"+b.content.quarterObject.data[12].data[f]+"'"+",'"+b.content.quarterObject.data[13].original_data[f]+"','"+b.content.quarterObject.data[13].data[f]+"')",a.executeSql(g);for(h=0;h<b.content.quarterObject.time.length;h++)l="INSERT INTO sensorHalfYearDataTable(device_guid,time,Carbon_Dioxide_original,Carbon_Dioxide,Substrate_PH_original,Substrate_PH,Substrate_Conductivity_original,Substrate_Conductivity,Substrate_Temperature_original,Substrate_Temperature,Air_Temperature_original,Air_Temperature,Ppfd_original,Ppfd,Liquid_PH_original,Liquid_PH,Substrate_Humidity_original,Substrate_Humidity,Liquid_DOC_original,Liquid_DOC,Liquid_Conductivity_original,Liquid_Conductivity,Air_Humidity_original,Air_Humidity,Substrate_DOC_original,Substrate_DOC,Illuminance_original,Illuminance,Lai_original,Lai) values ('"+$scope.device_guid+"','"+j[h]+"','"+b.content.halfYearObject.data[0].original_data[h]+"','"+b.content.halfYearObject.data[0].data[h]+"'"+",'"+b.content.halfYearObject.data[1].original_data[h]+"','"+b.content.halfYearObject.data[1].data[h]+"','"+b.content.halfYearObject.data[2].original_data[h]+"','"+b.content.halfYearObject.data[2].data[h]+"','"+b.content.halfYearObject.data[3].original_data[h]+"','"+b.content.halfYearObject.data[3].data[h]+"'"+",'"+b.content.halfYearObject.data[4].original_data[h]+"','"+b.content.halfYearObject.data[4].data[h]+"','"+b.content.halfYearObject.data[5].original_data[h]+"','"+b.content.halfYearObject.data[5].data[h]+"','"+b.content.halfYearObject.data[6].original_data[h]+"','"+b.content.halfYearObject.data[6].data[h]+"'"+",'"+b.content.halfYearObject.data[7].original_data[h]+"','"+b.content.halfYearObject.data[7].data[h]+"','"+b.content.halfYearObject.data[8].original_data[h]+"','"+b.content.halfYearObject.data[8].data[h]+"','"+b.content.halfYearObject.data[9].original_data[h]+"','"+b.content.halfYearObject.data[9].data[h]+"'"+",'"+b.content.halfYearObject.data[10].original_data[h]+"','"+b.content.halfYearObject.data[10].data[h]+"','"+b.content.halfYearObject.data[11].original_data[h]+"','"+b.content.halfYearObject.data[11].data[h]+"','"+b.content.halfYearObject.data[12].original_data[h]+"','"+b.content.halfYearObject.data[12].data[h]+"'"+",'"+b.content.halfYearObject.data[13].original_data[h]+"','"+b.content.halfYearObject.data[13].data[h]+"')",a.executeSql(l);for(m=0;m<b.content.yearObject.time.length;m++)n="INSERT INTO sensorYearDataTable(device_guid,time,Carbon_Dioxide_original,Carbon_Dioxide,Substrate_PH_original,Substrate_PH,Substrate_Conductivity_original,Substrate_Conductivity,Substrate_Temperature_original,Substrate_Temperature,Air_Temperature_original,Air_Temperature,Ppfd_original,Ppfd,Liquid_PH_original,Liquid_PH,Substrate_Humidity_original,Substrate_Humidity,Liquid_DOC_original,Liquid_DOC,Liquid_Conductivity_original,Liquid_Conductivity,Air_Humidity_original,Air_Humidity,Substrate_DOC_original,Substrate_DOC,Illuminance_original,Illuminance,Lai_original,Lai) values ('"+$scope.device_guid+"','"+k[m]+"','"+b.content.yearObject.data[0].original_data[m]+"','"+b.content.yearObject.data[0].data[m]+"'"+",'"+b.content.yearObject.data[1].original_data[m]+"','"+b.content.yearObject.data[1].data[m]+"','"+b.content.yearObject.data[2].original_data[m]+"','"+b.content.yearObject.data[2].data[m]+"','"+b.content.yearObject.data[3].original_data[m]+"','"+b.content.yearObject.data[3].data[m]+"'"+",'"+b.content.yearObject.data[4].original_data[m]+"','"+b.content.yearObject.data[4].data[m]+"','"+b.content.yearObject.data[5].original_data[m]+"','"+b.content.yearObject.data[5].data[m]+"','"+b.content.yearObject.data[6].original_data[m]+"','"+b.content.yearObject.data[6].data[m]+"'"+",'"+b.content.yearObject.data[7].original_data[m]+"','"+b.content.yearObject.data[7].data[m]+"','"+b.content.yearObject.data[8].original_data[m]+"','"+b.content.yearObject.data[8].data[m]+"','"+b.content.yearObject.data[9].original_data[m]+"','"+b.content.yearObject.data[9].data[m]+"'"+",'"+b.content.yearObject.data[10].original_data[m]+"','"+b.content.yearObject.data[10].data[m]+"','"+b.content.yearObject.data[11].original_data[m]+"','"+b.content.yearObject.data[11].data[m]+"','"+b.content.yearObject.data[12].original_data[m]+"','"+b.content.yearObject.data[12].data[m]+"'"+",'"+b.content.yearObject.data[13].original_data[m]+"','"+b.content.yearObject.data[13].data[m]+"')",a.executeSql(n)}),a+1!=noDataDateDates.length)return $timeout(function(){e(a+1)},1500);a+1==noDataDateDates.length&&(toaster.pop({type:"success",title:"Success",body:"Download successfully , please waiting...",timeout:POPTIMEOUT}),n={},dataBase.transaction(function(a){var b="SELECT * FROM sensorQuarterDataTable WHERE time BETWEEN'"+$scope.default_startTime+"' AND '"+$scope.default_endTime+"' AND device_guid = '"+$scope.device_guid+"' ORDER BY time";a.executeSql(b,[],function(a,b){var V,c=[],d=[],e={original_name:"Carbon_Dioxide(ppm)",name:"Carbon_Dioxide(ppm)"},f=[],g=[],h={original_name:"Substrate_PH(PH)",name:"Substrate_PH(PH)"},i=[],j=[],k={original_name:"Substrate_Conductivity(mS/cm)",name:"Substrate_Conductivity(mS/cm)"},l=[],m=[],o={original_name:"Substrate_Temperature(°C)",name:"Substrate_Temperature(°C)"},p=[],q=[],r={original_name:"Air_Temperature(°C)",name:"Air_Temperature(°C)"},s=[],t=[],u={original_name:"Ppfd(μmol㎡/s)",name:"Ppfd(100*μmol㎡/s)"},v=[],w=[],x={original_name:"Liquid_PH(PH)",name:"Liquid_PH(PH)"},y=[],z=[],A={original_name:"Substrate_Humidity(%)",name:"Substrate_Humidity(%)"},B=[],C=[],D={original_name:"Liquid_DOC(mg/l)",name:"Liquid_DOC(mg/l)"},E=[],F=[],G={original_name:"Liquid_Conductivity(mS/cm)",name:"Liquid_Conductivity(mS/cm)"},H=[],I=[],J={original_name:"Air_Humidity(%)",name:"Air_Humidity(%)"},K=[],L=[],M={original_name:"Substrate_DOC(mg/l)",name:"Substrate_DOC(mg/l)"},N=[],O=[],P={original_name:"Illuminance(lux)",name:"Illuminance(100*lux)"},Q=[],R=[],S={original_name:"Lai()",name:"Lai()"},T=[],U=[];if(b)for(V=0;V<b.rows.length;V++)c.push(b.rows[V].time),f.push(parseFloat(b.rows[V].Carbon_Dioxide_original)),g.push(parseFloat(b.rows[V].Carbon_Dioxide)),i.push(parseFloat(b.rows[V].Substrate_PH_original)),j.push(parseFloat(b.rows[V].Substrate_PH)),l.push(parseFloat(b.rows[V].Substrate_Conductivity_original)),m.push(parseFloat(b.rows[V].Substrate_Conductivity)),p.push(parseFloat(b.rows[V].Substrate_Temperature_original)),q.push(parseFloat(b.rows[V].Substrate_Temperature)),s.push(parseFloat(b.rows[V].Air_Temperature_original)),t.push(parseFloat(b.rows[V].Air_Temperature)),v.push(parseFloat(b.rows[V].Ppfd_original)),w.push(parseFloat(b.rows[V].Ppfd)),y.push(parseFloat(b.rows[V].Liquid_PH_original)),z.push(parseFloat(b.rows[V].Liquid_PH)),B.push(parseFloat(b.rows[V].Substrate_Humidity_original)),C.push(parseFloat(b.rows[V].Substrate_Humidity)),E.push(parseFloat(b.rows[V].Liquid_DOC_original)),F.push(parseFloat(b.rows[V].Liquid_DOC)),H.push(parseFloat(b.rows[V].Liquid_Conductivity_original)),I.push(parseFloat(b.rows[V].Liquid_Conductivity)),K.push(parseFloat(b.rows[V].Air_Humidity_original)),L.push(parseFloat(b.rows[V].Air_Humidity)),N.push(parseFloat(b.rows[V].Substrate_DOC_original)),O.push(parseFloat(b.rows[V].Substrate_DOC)),Q.push(parseFloat(b.rows[V].Illuminance_original)),R.push(parseFloat(b.rows[V].Illuminance)),T.push(parseFloat(b.rows[V].Lai_original)),U.push(parseFloat(b.rows[V].Lai));e.original_data=f,e.data=g,h.original_data=i,h.data=j,k.original_data=l,k.data=m,o.original_data=p,o.data=q,r.original_data=s,r.data=t,u.original_data=v,u.data=w,x.original_data=y,x.data=z,A.original_data=B,A.data=C,D.original_data=E,D.data=F,G.original_data=H,G.data=I,J.original_data=K,J.data=L,M.original_data=N,M.data=O,P.original_data=Q,P.data=R,S.original_data=T,S.data=U,d.push(r),d.push(J),d.push(o),d.push(A),d.push(h),d.push(e),d.push(P),d.push(k),d.push(u),d.push(x),d.push(S),d.push(G),d.push(D),d.push(M),n.data=d,n.time=c,new Highcharts.Chart({chart:{renderTo:"container",backgroundColor:"rgba(0,0,0,0)"},colors:["#000000","#CE0000","#FF79BC","#921AFF","#7D7DFF","#00CACA","#93FF93","#FF8040","#A8FF24","#AD5A5A","#8080C0","#A5A552","#424200","#642100"],title:{text:"Sensor History Data",x:-20},exporting:{enabled:!1,filename:"horticulture growing condition datasheet"},subtitle:{text:"Source Region: "+regionName,x:-20},marker:!1,noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",borderRadius:10,pointFormat:'<tr><td>{series.name}: </td><td style="text-align: right"><b>{point.y}</b></td></tr>',valueDecimals:3},legend:{align:"center",verticalAlign:"bottom"},series:n.data}),$scope.downLoad=function(){window.open("http://73.231.41.102:8080/sensor/history/export?user_id="+$cookieStore.get("user_id")+"&region_guid="+regionId+"&gateway_id="+gatewayId+"&start_time="+encodeURI(UTC_startTime)+"&end_time="+encodeURI(UTC_endTime))},$scope.toChartDetail=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,o;n.data||0!=n.data.length?($scope.chartDetailShow=!$scope.chartDetailShow,$scope.lastNextShow=!$scope.lastNextShow,$scope.chartShow=!$scope.chartShow,a=new Highcharts.Chart({chart:{renderTo:"chart_container"},title:{text:n.data[0].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[0].original_name+" condition datasheet"},colors:["#000000"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[0].original_name,data:n.data[0].original_data}]}),$scope.ExportChartDetailToExcel=function(){a.downloadXLS()},b=new Highcharts.Chart({chart:{renderTo:"chart_container1"},title:{text:n.data[1].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[1].original_name+" condition datasheet"},colors:["#CE0000"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[1].original_name,data:n.data[1].original_data}]}),$scope.ExportChartDetailToExcel1=function(){b.downloadXLS()},c=new Highcharts.Chart({chart:{renderTo:"chart_container2"},title:{text:n.data[2].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[2].original_name+" condition datasheet"},colors:["#FF79BC"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[2].original_name,data:n.data[2].original_data}]}),$scope.ExportChartDetailToExcel2=function(){c.downloadXLS()},d=new Highcharts.Chart({chart:{renderTo:"chart_container3"},title:{text:n.data[3].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[3].original_name+" condition datasheet"},colors:["#921AFF"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[3].original_name,data:n.data[3].original_data}]}),$scope.ExportChartDetailToExcel3=function(){d.downloadXLS()},e=new Highcharts.Chart({chart:{renderTo:"chart_container4"},title:{text:n.data[4].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[4].original_name+" condition datasheet"},colors:["#7D7DFF"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[4].original_name,data:n.data[4].original_data}]}),$scope.ExportChartDetailToExcel4=function(){e.downloadXLS()},f=new Highcharts.Chart({chart:{renderTo:"chart_container5"},title:{text:n.data[5].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[5].original_name+" condition datasheet"},colors:["#00CACA"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[5].original_name,data:n.data[5].original_data}]}),$scope.ExportChartDetailToExcel5=function(){f.downloadXLS()},g=new Highcharts.Chart({chart:{renderTo:"chart_container6"},title:{text:n.data[6].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[6].original_name+" condition datasheet"},colors:["#93FF93"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[6].original_name,data:n.data[6].original_data}]}),$scope.ExportChartDetailToExcel6=function(){g.downloadXLS()},h=new Highcharts.Chart({chart:{renderTo:"chart_container7"},title:{text:n.data[7].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[7].original_name+" condition datasheet"},colors:["#FF8040"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[7].original_name,data:n.data[7].original_data}]}),$scope.ExportChartDetailToExcel7=function(){h.downloadXLS()},i=new Highcharts.Chart({chart:{renderTo:"chart_container8"},title:{text:n.data[8].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[8].original_name+" condition datasheet"},colors:["#A8FF24"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[8].original_name,data:n.data[8].original_data}]}),$scope.ExportChartDetailToExcel8=function(){i.downloadXLS()},j=new Highcharts.Chart({chart:{renderTo:"chart_container9"},title:{text:n.data[9].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[9].original_name+" condition datasheet"},colors:["#AD5A5A"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[9].original_name,data:n.data[9].original_data}]}),$scope.ExportChartDetailToExcel9=function(){j.downloadXLS()},k=new Highcharts.Chart({chart:{renderTo:"chart_container10"},title:{text:n.data[10].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[10].original_name+" condition datasheet"},colors:["#8080C0"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[10].original_name,data:n.data[10].original_data}]}),$scope.ExportChartDetailToExcel10=function(){k.downloadXLS()},l=new Highcharts.Chart({chart:{renderTo:"chart_container11"},title:{text:n.data[11].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[11].original_name+" condition datasheet"},colors:["#A5A552"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[11].original_name,data:n.data[11].original_data}]}),$scope.ExportChartDetailToExcel11=function(){l.downloadXLS()},m=new Highcharts.Chart({chart:{renderTo:"chart_container12"},title:{text:n.data[12].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[12].original_name+" condition datasheet"},colors:["#424200"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[12].original_name,data:n.data[12].original_data}]}),$scope.ExportChartDetailToExcel12=function(){m.downloadXLS()},o=new Highcharts.Chart({chart:{renderTo:"chart_container13"},title:{text:n.data[13].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[13].original_name+" condition datasheet"},colors:["#642100"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[13].original_name,data:n.data[13].original_data}]}),$scope.ExportChartDetailToExcel13=function(){o.downloadXLS()}):toaster.pop({type:"error",title:"Error",body:"There is no data to display",timeout:POPTIMEOUT})}})}))}else toaster.pop({type:"error",title:"Error",body:b.message,timeout:POPTIMEOUT})})}var d,f;return 0==c.rows.length&&noDataDateDates.push(sqls[a].substring(54,64)),a+1!=newDate.length?$timeout(function(){selectFromTable(a+1)},1):(noDataDateDates&&noDataDateDates.length>0?($scope.delay=0,$scope.minDuration=0,$scope.message="0",$scope.backdrop=!1,$scope.promise=null,$scope.templateUrl="./pages/down-loading-template.html",$scope.vm={},$scope.vm.total=noDataDateDates.length,d=0,e(d)):noDataDateDates&&0!=noDataDateDates.length||(f={},dataBase.transaction(function(a){var b="SELECT * FROM sensorQuarterDataTable WHERE time BETWEEN'"+$scope.default_startTime+"' AND '"+$scope.default_endTime+"' AND device_guid = '"+$scope.device_guid+"' ORDER BY time";a.executeSql(b,[],function(a,b){var V,c=[],d=[],e={original_name:"Carbon_Dioxide(ppm)",name:"Carbon_Dioxide(ppm)"},g=[],h=[],i={original_name:"Substrate_PH(PH)",name:"Substrate_PH(PH)"},j=[],k=[],l={original_name:"Substrate_Conductivity(mS/cm)",name:"Substrate_Conductivity(mS/cm)"},m=[],n=[],o={original_name:"Substrate_Temperature(°C)",name:"Substrate_Temperature(°C)"},p=[],q=[],r={original_name:"Air_Temperature(°C)",name:"Air_Temperature(°C)"},s=[],t=[],u={original_name:"Ppfd(μmol㎡/s)",name:"Ppfd(100*μmol㎡/s)"},v=[],w=[],x={original_name:"Liquid_PH(PH)",name:"Liquid_PH(PH)"},y=[],z=[],A={original_name:"Substrate_Humidity(%)",name:"Substrate_Humidity(%)"},B=[],C=[],D={original_name:"Liquid_DOC(mg/l)",name:"Liquid_DOC(mg/l)"},E=[],F=[],G={original_name:"Liquid_Conductivity(mS/cm)",name:"Liquid_Conductivity(mS/cm)"},H=[],I=[],J={original_name:"Air_Humidity(%)",name:"Air_Humidity(%)"},K=[],L=[],M={original_name:"Substrate_DOC(mg/l)",name:"Substrate_DOC(mg/l)"},N=[],O=[],P={original_name:"Illuminance(lux)",name:"Illuminance(100*lux)"},Q=[],R=[],S={original_name:"Lai()",name:"Lai()"},T=[],U=[];if(b)for(V=0;V<b.rows.length;V++)c.push(b.rows[V].time),g.push(parseFloat(b.rows[V].Carbon_Dioxide_original)),h.push(parseFloat(b.rows[V].Carbon_Dioxide)),j.push(parseFloat(b.rows[V].Substrate_PH_original)),k.push(parseFloat(b.rows[V].Substrate_PH)),m.push(parseFloat(b.rows[V].Substrate_Conductivity_original)),n.push(parseFloat(b.rows[V].Substrate_Conductivity)),p.push(parseFloat(b.rows[V].Substrate_Temperature_original)),q.push(parseFloat(b.rows[V].Substrate_Temperature)),s.push(parseFloat(b.rows[V].Air_Temperature_original)),t.push(parseFloat(b.rows[V].Air_Temperature)),v.push(parseFloat(b.rows[V].Ppfd_original)),w.push(parseFloat(b.rows[V].Ppfd)),y.push(parseFloat(b.rows[V].Liquid_PH_original)),z.push(parseFloat(b.rows[V].Liquid_PH)),B.push(parseFloat(b.rows[V].Substrate_Humidity_original)),C.push(parseFloat(b.rows[V].Substrate_Humidity)),E.push(parseFloat(b.rows[V].Liquid_DOC_original)),F.push(parseFloat(b.rows[V].Liquid_DOC)),H.push(parseFloat(b.rows[V].Liquid_Conductivity_original)),I.push(parseFloat(b.rows[V].Liquid_Conductivity)),K.push(parseFloat(b.rows[V].Air_Humidity_original)),L.push(parseFloat(b.rows[V].Air_Humidity)),N.push(parseFloat(b.rows[V].Substrate_DOC_original)),O.push(parseFloat(b.rows[V].Substrate_DOC)),Q.push(parseFloat(b.rows[V].Illuminance_original)),R.push(parseFloat(b.rows[V].Illuminance)),T.push(parseFloat(b.rows[V].Lai_original)),U.push(parseFloat(b.rows[V].Lai));e.original_data=g,e.data=h,i.original_data=j,i.data=k,l.original_data=m,l.data=n,o.original_data=p,o.data=q,r.original_data=s,r.data=t,u.original_data=v,u.data=w,x.original_data=y,x.data=z,A.original_data=B,A.data=C,D.original_data=E,D.data=F,G.original_data=H,G.data=I,J.original_data=K,J.data=L,M.original_data=N,M.data=O,P.original_data=Q,P.data=R,S.original_data=T,S.data=U,d.push(r),d.push(J),d.push(o),d.push(A),d.push(i),d.push(e),d.push(P),d.push(l),d.push(u),d.push(x),d.push(S),d.push(G),d.push(D),d.push(M),f.data=d,f.time=c,new Highcharts.Chart({chart:{renderTo:"container",backgroundColor:"rgba(0,0,0,0)"},colors:["#000000","#CE0000","#FF79BC","#921AFF","#7D7DFF","#00CACA","#93FF93","#FF8040","#A8FF24","#AD5A5A","#8080C0","#A5A552","#424200","#642100"],title:{text:"Sensor History Data",x:-20},exporting:{enabled:!1,filename:"horticulture growing condition datasheet"},subtitle:{text:"Source Region: "+regionName,x:-20},marker:!1,noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",borderRadius:10,pointFormat:'<tr><td>{series.name}: </td><td style="text-align: right"><b>{point.y}</b></td></tr>',valueDecimals:3},legend:{align:"center",verticalAlign:"bottom"},series:f.data}),$scope.downLoad=function(){window.open("http://73.231.41.102:8080/sensor/history/export?user_id="+$cookieStore.get("user_id")+"&region_guid="+regionId+"&gateway_id="+gatewayId+"&start_time="+encodeURI(UTC_startTime)+"&end_time="+encodeURI(UTC_endTime))},$scope.toChartDetail=function(){var a,b,c,d,e,g,h,i,j,k,l,m,n,o;f.data||0!=f.data.length?($scope.chartDetailShow=!$scope.chartDetailShow,$scope.lastNextShow=!$scope.lastNextShow,$scope.chartShow=!$scope.chartShow,a=new Highcharts.Chart({chart:{renderTo:"chart_container"},title:{text:f.data[0].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[0].original_name+" condition datasheet"},colors:["#000000"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[0].original_name,data:f.data[0].original_data}]}),$scope.ExportChartDetailToExcel=function(){a.downloadXLS()},b=new Highcharts.Chart({chart:{renderTo:"chart_container1"},title:{text:f.data[1].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[1].original_name+" condition datasheet"},colors:["#CE0000"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[1].original_name,data:f.data[1].original_data}]}),$scope.ExportChartDetailToExcel1=function(){b.downloadXLS()},c=new Highcharts.Chart({chart:{renderTo:"chart_container2"},title:{text:f.data[2].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[2].original_name+" condition datasheet"},colors:["#FF79BC"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[2].original_name,data:f.data[2].original_data}]}),$scope.ExportChartDetailToExcel2=function(){c.downloadXLS()},d=new Highcharts.Chart({chart:{renderTo:"chart_container3"},title:{text:f.data[3].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[3].original_name+" condition datasheet"},colors:["#921AFF"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[3].original_name,data:f.data[3].original_data}]}),$scope.ExportChartDetailToExcel3=function(){d.downloadXLS()},e=new Highcharts.Chart({chart:{renderTo:"chart_container4"},title:{text:f.data[4].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[4].original_name+" condition datasheet"},colors:["#7D7DFF"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[4].original_name,data:f.data[4].original_data}]}),$scope.ExportChartDetailToExcel4=function(){e.downloadXLS()},g=new Highcharts.Chart({chart:{renderTo:"chart_container5"},title:{text:f.data[5].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[5].original_name+" condition datasheet"},colors:["#00CACA"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[5].original_name,data:f.data[5].original_data}]}),$scope.ExportChartDetailToExcel5=function(){g.downloadXLS()},h=new Highcharts.Chart({chart:{renderTo:"chart_container6"},title:{text:f.data[6].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[6].original_name+" condition datasheet"},colors:["#93FF93"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[6].original_name,data:f.data[6].original_data}]}),$scope.ExportChartDetailToExcel6=function(){h.downloadXLS()},i=new Highcharts.Chart({chart:{renderTo:"chart_container7"},title:{text:f.data[7].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[7].original_name+" condition datasheet"},colors:["#FF8040"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[7].original_name,data:f.data[7].original_data}]}),$scope.ExportChartDetailToExcel7=function(){i.downloadXLS()},j=new Highcharts.Chart({chart:{renderTo:"chart_container8"},title:{text:f.data[8].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[8].original_name+" condition datasheet"},colors:["#A8FF24"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[8].original_name,data:f.data[8].original_data}]}),$scope.ExportChartDetailToExcel8=function(){j.downloadXLS()
                },k=new Highcharts.Chart({chart:{renderTo:"chart_container9"},title:{text:f.data[9].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[9].original_name+" condition datasheet"},colors:["#AD5A5A"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[9].original_name,data:f.data[9].original_data}]}),$scope.ExportChartDetailToExcel9=function(){k.downloadXLS()},l=new Highcharts.Chart({chart:{renderTo:"chart_container10"},title:{text:f.data[10].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[10].original_name+" condition datasheet"},colors:["#8080C0"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[10].original_name,data:f.data[10].original_data}]}),$scope.ExportChartDetailToExcel10=function(){l.downloadXLS()},m=new Highcharts.Chart({chart:{renderTo:"chart_container11"},title:{text:f.data[11].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[11].original_name+" condition datasheet"},colors:["#A5A552"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[11].original_name,data:f.data[11].original_data}]}),$scope.ExportChartDetailToExcel11=function(){m.downloadXLS()},n=new Highcharts.Chart({chart:{renderTo:"chart_container12"},title:{text:f.data[12].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[12].original_name+" condition datasheet"},colors:["#424200"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[12].original_name,data:f.data[12].original_data}]}),$scope.ExportChartDetailToExcel12=function(){n.downloadXLS()},o=new Highcharts.Chart({chart:{renderTo:"chart_container13"},title:{text:f.data[13].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[13].original_name+" condition datasheet"},colors:["#642100"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[13].original_name,data:f.data[13].original_data}]}),$scope.ExportChartDetailToExcel13=function(){o.downloadXLS()}):toaster.pop({type:"error",title:"Error",body:"There is no data to display",timeout:POPTIMEOUT})}})})),void 0)})})}var time1,time2,dayDiff,newDate,i,sqls,y,noDataDateDates,x;for(toaster.pop({type:"success",title:"",body:"Please waiting ...",timeout:POPTIMEOUT}),$scope.default_endTime=new Date(new Date($scope.default_startTime).getTime()).Format("yyyy-MM-dd hh:mm:ss"),$scope.default_startTime=new Date(new Date($scope.default_startTime).getTime()-1e3*60*60*$scope.my.timeDiff).Format("yyyy-MM-dd hh:mm:ss"),UTC_startTime=$scope.format(new Date($scope.default_startTime).toUTCString(),"yyyy-MM-dd HH:mm:ss"),UTC_endTime=$scope.format(new Date($scope.default_endTime).toUTCString(),"yyyy-MM-dd HH:mm:ss"),time1=$scope.default_startTime.substring(0,10),time2=$scope.default_endTime.substring(0,10),dayDiff=DateDiff(time1,time2)+1,newDate=[],i=0;dayDiff>i;i++)newDate[i]=getNewDay(time1,i);for(sqls=[],y=0;y<newDate.length;y++)sqls[y]="SELECT * FROM sensorYearDataTable WHERE time BETWEEN '"+newDate[y]+" 00:00:00"+"' AND '"+newDate[y]+" 23:59:59"+"' AND device_guid = '"+$scope.device_guid+"'";noDataDateDates=[],x=0,selectFromTable(x);
            }else if($scope.my.timeDiff == '4320') {
                function selectFromTable(a){dataBase.transaction(function(b){b.executeSql(sqls[a],[],function(b,c){function e(a){var b={table_device_guid:$scope.device_guid,device_name:"",gateway_id:gatewayId,start_time:$scope.format(new Date(noDataDateDates[a]+" 00:00:00").toUTCString(),"yyyy-MM-dd HH:mm:ss"),end_time:$scope.format(new Date(noDataDateDates[a]+" 23:59:59").toUTCString(),"yyyy-MM-dd HH:mm:ss")};$scope.getSensorDataProm=AuthService.myHttp(token,b,"GET","sensor/sensorOneDay").then(function(b){var c,d,f,g,h,i,j,k,l,m,n;if("0"==b.code){for($scope.message=Math.round(100*((a+1)/$scope.vm.total)),c=[],d=[],f=[],g=[],h=[],i=[],j=[],k=[],l=0;l<b.content.time.length;l++)d[l]=new Date(b.content.time[l]),c[l]=d[l].getTime(),c[l]-=1e3*60*(new Date).getTimezoneOffset(),c[l]=new Date(c[l]).Format("yyyy-MM-dd hh:mm:ss");for(m=0;m<b.content.quarterObject.time.length;m++)f[m]=new Date(b.content.quarterObject.time[m]),i[m]=f[m].getTime(),i[m]-=1e3*60*(new Date).getTimezoneOffset(),i[m]=new Date(i[m]).Format("yyyy-MM-dd hh:mm:ss");for(m=0;m<b.content.halfYearObject.time.length;m++)g[m]=new Date(b.content.halfYearObject.time[m]),j[m]=g[m].getTime(),j[m]-=1e3*60*(new Date).getTimezoneOffset(),j[m]=new Date(j[m]).Format("yyyy-MM-dd hh:mm:ss");for(m=0;m<b.content.yearObject.time.length;m++)h[m]=new Date(b.content.yearObject.time[m]),k[m]=h[m].getTime(),k[m]-=1e3*60*(new Date).getTimezoneOffset(),k[m]=new Date(k[m]).Format("yyyy-MM-dd hh:mm:ss");if(dataBase.transaction(function(a){var d,e,f,g,h,l,m,n;for(d=0;d<b.content.time.length;d++)e="INSERT INTO sensorDataTable(device_guid,time,Carbon_Dioxide_original,Carbon_Dioxide,Substrate_PH_original,Substrate_PH,Substrate_Conductivity_original,Substrate_Conductivity,Substrate_Temperature_original,Substrate_Temperature,Air_Temperature_original,Air_Temperature,Ppfd_original,Ppfd,Liquid_PH_original,Liquid_PH,Substrate_Humidity_original,Substrate_Humidity,Liquid_DOC_original,Liquid_DOC,Liquid_Conductivity_original,Liquid_Conductivity,Air_Humidity_original,Air_Humidity,Substrate_DOC_original,Substrate_DOC,Illuminance_original,Illuminance,Lai_original,Lai) values ('"+$scope.device_guid+"','"+c[d]+"','"+b.content.data[0].original_data[d]+"','"+b.content.data[0].data[d]+"'"+",'"+b.content.data[1].original_data[d]+"','"+b.content.data[1].data[d]+"','"+b.content.data[2].original_data[d]+"','"+b.content.data[2].data[d]+"','"+b.content.data[3].original_data[d]+"','"+b.content.data[3].data[d]+"'"+",'"+b.content.data[4].original_data[d]+"','"+b.content.data[4].data[d]+"','"+b.content.data[5].original_data[d]+"','"+b.content.data[5].data[d]+"','"+b.content.data[6].original_data[d]+"','"+b.content.data[6].data[d]+"'"+",'"+b.content.data[7].original_data[d]+"','"+b.content.data[7].data[d]+"','"+b.content.data[8].original_data[d]+"','"+b.content.data[8].data[d]+"','"+b.content.data[9].original_data[d]+"','"+b.content.data[9].data[d]+"'"+",'"+b.content.data[10].original_data[d]+"','"+b.content.data[10].data[d]+"','"+b.content.data[11].original_data[d]+"','"+b.content.data[11].data[d]+"','"+b.content.data[12].original_data[d]+"','"+b.content.data[12].data[d]+"'"+",'"+b.content.data[13].original_data[d]+"','"+b.content.data[13].data[d]+"')",a.executeSql(e);for(f=0;f<b.content.quarterObject.time.length;f++)g="INSERT INTO sensorQuarterDataTable(device_guid,time,Carbon_Dioxide_original,Carbon_Dioxide,Substrate_PH_original,Substrate_PH,Substrate_Conductivity_original,Substrate_Conductivity,Substrate_Temperature_original,Substrate_Temperature,Air_Temperature_original,Air_Temperature,Ppfd_original,Ppfd,Liquid_PH_original,Liquid_PH,Substrate_Humidity_original,Substrate_Humidity,Liquid_DOC_original,Liquid_DOC,Liquid_Conductivity_original,Liquid_Conductivity,Air_Humidity_original,Air_Humidity,Substrate_DOC_original,Substrate_DOC,Illuminance_original,Illuminance,Lai_original,Lai) values ('"+$scope.device_guid+"','"+i[f]+"','"+b.content.quarterObject.data[0].original_data[f]+"','"+b.content.quarterObject.data[0].data[f]+"'"+",'"+b.content.quarterObject.data[1].original_data[f]+"','"+b.content.quarterObject.data[1].data[f]+"','"+b.content.quarterObject.data[2].original_data[f]+"','"+b.content.quarterObject.data[2].data[f]+"','"+b.content.quarterObject.data[3].original_data[f]+"','"+b.content.quarterObject.data[3].data[f]+"'"+",'"+b.content.quarterObject.data[4].original_data[f]+"','"+b.content.quarterObject.data[4].data[f]+"','"+b.content.quarterObject.data[5].original_data[f]+"','"+b.content.quarterObject.data[5].data[f]+"','"+b.content.quarterObject.data[6].original_data[f]+"','"+b.content.quarterObject.data[6].data[f]+"'"+",'"+b.content.quarterObject.data[7].original_data[f]+"','"+b.content.quarterObject.data[7].data[f]+"','"+b.content.quarterObject.data[8].original_data[f]+"','"+b.content.quarterObject.data[8].data[f]+"','"+b.content.quarterObject.data[9].original_data[f]+"','"+b.content.quarterObject.data[9].data[f]+"'"+",'"+b.content.quarterObject.data[10].original_data[f]+"','"+b.content.quarterObject.data[10].data[f]+"','"+b.content.quarterObject.data[11].original_data[f]+"','"+b.content.quarterObject.data[11].data[f]+"','"+b.content.quarterObject.data[12].original_data[f]+"','"+b.content.quarterObject.data[12].data[f]+"'"+",'"+b.content.quarterObject.data[13].original_data[f]+"','"+b.content.quarterObject.data[13].data[f]+"')",a.executeSql(g);for(h=0;h<b.content.quarterObject.time.length;h++)l="INSERT INTO sensorHalfYearDataTable(device_guid,time,Carbon_Dioxide_original,Carbon_Dioxide,Substrate_PH_original,Substrate_PH,Substrate_Conductivity_original,Substrate_Conductivity,Substrate_Temperature_original,Substrate_Temperature,Air_Temperature_original,Air_Temperature,Ppfd_original,Ppfd,Liquid_PH_original,Liquid_PH,Substrate_Humidity_original,Substrate_Humidity,Liquid_DOC_original,Liquid_DOC,Liquid_Conductivity_original,Liquid_Conductivity,Air_Humidity_original,Air_Humidity,Substrate_DOC_original,Substrate_DOC,Illuminance_original,Illuminance,Lai_original,Lai) values ('"+$scope.device_guid+"','"+j[h]+"','"+b.content.halfYearObject.data[0].original_data[h]+"','"+b.content.halfYearObject.data[0].data[h]+"'"+",'"+b.content.halfYearObject.data[1].original_data[h]+"','"+b.content.halfYearObject.data[1].data[h]+"','"+b.content.halfYearObject.data[2].original_data[h]+"','"+b.content.halfYearObject.data[2].data[h]+"','"+b.content.halfYearObject.data[3].original_data[h]+"','"+b.content.halfYearObject.data[3].data[h]+"'"+",'"+b.content.halfYearObject.data[4].original_data[h]+"','"+b.content.halfYearObject.data[4].data[h]+"','"+b.content.halfYearObject.data[5].original_data[h]+"','"+b.content.halfYearObject.data[5].data[h]+"','"+b.content.halfYearObject.data[6].original_data[h]+"','"+b.content.halfYearObject.data[6].data[h]+"'"+",'"+b.content.halfYearObject.data[7].original_data[h]+"','"+b.content.halfYearObject.data[7].data[h]+"','"+b.content.halfYearObject.data[8].original_data[h]+"','"+b.content.halfYearObject.data[8].data[h]+"','"+b.content.halfYearObject.data[9].original_data[h]+"','"+b.content.halfYearObject.data[9].data[h]+"'"+",'"+b.content.halfYearObject.data[10].original_data[h]+"','"+b.content.halfYearObject.data[10].data[h]+"','"+b.content.halfYearObject.data[11].original_data[h]+"','"+b.content.halfYearObject.data[11].data[h]+"','"+b.content.halfYearObject.data[12].original_data[h]+"','"+b.content.halfYearObject.data[12].data[h]+"'"+",'"+b.content.halfYearObject.data[13].original_data[h]+"','"+b.content.halfYearObject.data[13].data[h]+"')",a.executeSql(l);for(m=0;m<b.content.yearObject.time.length;m++)n="INSERT INTO sensorYearDataTable(device_guid,time,Carbon_Dioxide_original,Carbon_Dioxide,Substrate_PH_original,Substrate_PH,Substrate_Conductivity_original,Substrate_Conductivity,Substrate_Temperature_original,Substrate_Temperature,Air_Temperature_original,Air_Temperature,Ppfd_original,Ppfd,Liquid_PH_original,Liquid_PH,Substrate_Humidity_original,Substrate_Humidity,Liquid_DOC_original,Liquid_DOC,Liquid_Conductivity_original,Liquid_Conductivity,Air_Humidity_original,Air_Humidity,Substrate_DOC_original,Substrate_DOC,Illuminance_original,Illuminance,Lai_original,Lai) values ('"+$scope.device_guid+"','"+k[m]+"','"+b.content.yearObject.data[0].original_data[m]+"','"+b.content.yearObject.data[0].data[m]+"'"+",'"+b.content.yearObject.data[1].original_data[m]+"','"+b.content.yearObject.data[1].data[m]+"','"+b.content.yearObject.data[2].original_data[m]+"','"+b.content.yearObject.data[2].data[m]+"','"+b.content.yearObject.data[3].original_data[m]+"','"+b.content.yearObject.data[3].data[m]+"'"+",'"+b.content.yearObject.data[4].original_data[m]+"','"+b.content.yearObject.data[4].data[m]+"','"+b.content.yearObject.data[5].original_data[m]+"','"+b.content.yearObject.data[5].data[m]+"','"+b.content.yearObject.data[6].original_data[m]+"','"+b.content.yearObject.data[6].data[m]+"'"+",'"+b.content.yearObject.data[7].original_data[m]+"','"+b.content.yearObject.data[7].data[m]+"','"+b.content.yearObject.data[8].original_data[m]+"','"+b.content.yearObject.data[8].data[m]+"','"+b.content.yearObject.data[9].original_data[m]+"','"+b.content.yearObject.data[9].data[m]+"'"+",'"+b.content.yearObject.data[10].original_data[m]+"','"+b.content.yearObject.data[10].data[m]+"','"+b.content.yearObject.data[11].original_data[m]+"','"+b.content.yearObject.data[11].data[m]+"','"+b.content.yearObject.data[12].original_data[m]+"','"+b.content.yearObject.data[12].data[m]+"'"+",'"+b.content.yearObject.data[13].original_data[m]+"','"+b.content.yearObject.data[13].data[m]+"')",a.executeSql(n)}),a+1!=noDataDateDates.length)return $timeout(function(){e(a+1)},1500);a+1==noDataDateDates.length&&(toaster.pop({type:"success",title:"Success",body:"Download successfully , please waiting...",timeout:POPTIMEOUT}),n={},dataBase.transaction(function(a){var b="SELECT * FROM sensorHalfYearDataTable WHERE time BETWEEN'"+$scope.default_startTime+"' AND '"+$scope.default_endTime+"' AND device_guid = '"+$scope.device_guid+"' ORDER BY time";a.executeSql(b,[],function(a,b){var V,c=[],d=[],e={original_name:"Carbon_Dioxide(ppm)",name:"Carbon_Dioxide(ppm)"},f=[],g=[],h={original_name:"Substrate_PH(PH)",name:"Substrate_PH(PH)"},i=[],j=[],k={original_name:"Substrate_Conductivity(mS/cm)",name:"Substrate_Conductivity(mS/cm)"},l=[],m=[],o={original_name:"Substrate_Temperature(°C)",name:"Substrate_Temperature(°C)"},p=[],q=[],r={original_name:"Air_Temperature(°C)",name:"Air_Temperature(°C)"},s=[],t=[],u={original_name:"Ppfd(μmol㎡/s)",name:"Ppfd(100*μmol㎡/s)"},v=[],w=[],x={original_name:"Liquid_PH(PH)",name:"Liquid_PH(PH)"},y=[],z=[],A={original_name:"Substrate_Humidity(%)",name:"Substrate_Humidity(%)"},B=[],C=[],D={original_name:"Liquid_DOC(mg/l)",name:"Liquid_DOC(mg/l)"},E=[],F=[],G={original_name:"Liquid_Conductivity(mS/cm)",name:"Liquid_Conductivity(mS/cm)"},H=[],I=[],J={original_name:"Air_Humidity(%)",name:"Air_Humidity(%)"},K=[],L=[],M={original_name:"Substrate_DOC(mg/l)",name:"Substrate_DOC(mg/l)"},N=[],O=[],P={original_name:"Illuminance(lux)",name:"Illuminance(100*lux)"},Q=[],R=[],S={original_name:"Lai()",name:"Lai()"},T=[],U=[];if(b)for(V=0;V<b.rows.length;V++)c.push(b.rows[V].time),f.push(parseFloat(b.rows[V].Carbon_Dioxide_original)),g.push(parseFloat(b.rows[V].Carbon_Dioxide)),i.push(parseFloat(b.rows[V].Substrate_PH_original)),j.push(parseFloat(b.rows[V].Substrate_PH)),l.push(parseFloat(b.rows[V].Substrate_Conductivity_original)),m.push(parseFloat(b.rows[V].Substrate_Conductivity)),p.push(parseFloat(b.rows[V].Substrate_Temperature_original)),q.push(parseFloat(b.rows[V].Substrate_Temperature)),s.push(parseFloat(b.rows[V].Air_Temperature_original)),t.push(parseFloat(b.rows[V].Air_Temperature)),v.push(parseFloat(b.rows[V].Ppfd_original)),w.push(parseFloat(b.rows[V].Ppfd)),y.push(parseFloat(b.rows[V].Liquid_PH_original)),z.push(parseFloat(b.rows[V].Liquid_PH)),B.push(parseFloat(b.rows[V].Substrate_Humidity_original)),C.push(parseFloat(b.rows[V].Substrate_Humidity)),E.push(parseFloat(b.rows[V].Liquid_DOC_original)),F.push(parseFloat(b.rows[V].Liquid_DOC)),H.push(parseFloat(b.rows[V].Liquid_Conductivity_original)),I.push(parseFloat(b.rows[V].Liquid_Conductivity)),K.push(parseFloat(b.rows[V].Air_Humidity_original)),L.push(parseFloat(b.rows[V].Air_Humidity)),N.push(parseFloat(b.rows[V].Substrate_DOC_original)),O.push(parseFloat(b.rows[V].Substrate_DOC)),Q.push(parseFloat(b.rows[V].Illuminance_original)),R.push(parseFloat(b.rows[V].Illuminance)),T.push(parseFloat(b.rows[V].Lai_original)),U.push(parseFloat(b.rows[V].Lai));e.original_data=f,e.data=g,h.original_data=i,h.data=j,k.original_data=l,k.data=m,o.original_data=p,o.data=q,r.original_data=s,r.data=t,u.original_data=v,u.data=w,x.original_data=y,x.data=z,A.original_data=B,A.data=C,D.original_data=E,D.data=F,G.original_data=H,G.data=I,J.original_data=K,J.data=L,M.original_data=N,M.data=O,P.original_data=Q,P.data=R,S.original_data=T,S.data=U,d.push(r),d.push(J),d.push(o),d.push(A),d.push(h),d.push(e),d.push(P),d.push(k),d.push(u),d.push(x),d.push(S),d.push(G),d.push(D),d.push(M),n.data=d,n.time=c,new Highcharts.Chart({chart:{renderTo:"container",backgroundColor:"rgba(0,0,0,0)"},colors:["#000000","#CE0000","#FF79BC","#921AFF","#7D7DFF","#00CACA","#93FF93","#FF8040","#A8FF24","#AD5A5A","#8080C0","#A5A552","#424200","#642100"],title:{text:"Sensor History Data",x:-20},exporting:{enabled:!1,filename:"horticulture growing condition datasheet"},subtitle:{text:"Source Region: "+regionName,x:-20},marker:!1,noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",borderRadius:10,pointFormat:'<tr><td>{series.name}: </td><td style="text-align: right"><b>{point.y}</b></td></tr>',valueDecimals:3},legend:{align:"center",verticalAlign:"bottom"},series:n.data}),$scope.downLoad=function(){window.open("http://73.231.41.102:8080/sensor/history/export?user_id="+$cookieStore.get("user_id")+"&region_guid="+regionId+"&gateway_id="+gatewayId+"&start_time="+encodeURI(UTC_startTime)+"&end_time="+encodeURI(UTC_endTime))},$scope.toChartDetail=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,o;n.data||0!=n.data.length?($scope.chartDetailShow=!$scope.chartDetailShow,$scope.lastNextShow=!$scope.lastNextShow,$scope.chartShow=!$scope.chartShow,a=new Highcharts.Chart({chart:{renderTo:"chart_container"},title:{text:n.data[0].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[0].original_name+" condition datasheet"},colors:["#000000"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[0].original_name,data:n.data[0].original_data}]}),$scope.ExportChartDetailToExcel=function(){a.downloadXLS()},b=new Highcharts.Chart({chart:{renderTo:"chart_container1"},title:{text:n.data[1].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[1].original_name+" condition datasheet"},colors:["#CE0000"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[1].original_name,data:n.data[1].original_data}]}),$scope.ExportChartDetailToExcel1=function(){b.downloadXLS()},c=new Highcharts.Chart({chart:{renderTo:"chart_container2"},title:{text:n.data[2].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[2].original_name+" condition datasheet"},colors:["#FF79BC"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[2].original_name,data:n.data[2].original_data}]}),$scope.ExportChartDetailToExcel2=function(){c.downloadXLS()},d=new Highcharts.Chart({chart:{renderTo:"chart_container3"},title:{text:n.data[3].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[3].original_name+" condition datasheet"},colors:["#921AFF"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[3].original_name,data:n.data[3].original_data}]}),$scope.ExportChartDetailToExcel3=function(){d.downloadXLS()},e=new Highcharts.Chart({chart:{renderTo:"chart_container4"},title:{text:n.data[4].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[4].original_name+" condition datasheet"},colors:["#7D7DFF"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[4].original_name,data:n.data[4].original_data}]}),$scope.ExportChartDetailToExcel4=function(){e.downloadXLS()},f=new Highcharts.Chart({chart:{renderTo:"chart_container5"},title:{text:n.data[5].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[5].original_name+" condition datasheet"},colors:["#00CACA"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[5].original_name,data:n.data[5].original_data}]}),$scope.ExportChartDetailToExcel5=function(){f.downloadXLS()},g=new Highcharts.Chart({chart:{renderTo:"chart_container6"},title:{text:n.data[6].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[6].original_name+" condition datasheet"},colors:["#93FF93"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[6].original_name,data:n.data[6].original_data}]}),$scope.ExportChartDetailToExcel6=function(){g.downloadXLS()},h=new Highcharts.Chart({chart:{renderTo:"chart_container7"},title:{text:n.data[7].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[7].original_name+" condition datasheet"},colors:["#FF8040"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[7].original_name,data:n.data[7].original_data}]}),$scope.ExportChartDetailToExcel7=function(){h.downloadXLS()},i=new Highcharts.Chart({chart:{renderTo:"chart_container8"},title:{text:n.data[8].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[8].original_name+" condition datasheet"},colors:["#A8FF24"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[8].original_name,data:n.data[8].original_data}]}),$scope.ExportChartDetailToExcel8=function(){i.downloadXLS()},j=new Highcharts.Chart({chart:{renderTo:"chart_container9"},title:{text:n.data[9].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[9].original_name+" condition datasheet"},colors:["#AD5A5A"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[9].original_name,data:n.data[9].original_data}]}),$scope.ExportChartDetailToExcel9=function(){j.downloadXLS()},k=new Highcharts.Chart({chart:{renderTo:"chart_container10"},title:{text:n.data[10].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[10].original_name+" condition datasheet"},colors:["#8080C0"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[10].original_name,data:n.data[10].original_data}]}),$scope.ExportChartDetailToExcel10=function(){k.downloadXLS()},l=new Highcharts.Chart({chart:{renderTo:"chart_container11"},title:{text:n.data[11].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[11].original_name+" condition datasheet"},colors:["#A5A552"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[11].original_name,data:n.data[11].original_data}]}),$scope.ExportChartDetailToExcel11=function(){l.downloadXLS()},m=new Highcharts.Chart({chart:{renderTo:"chart_container12"},title:{text:n.data[12].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[12].original_name+" condition datasheet"},colors:["#424200"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[12].original_name,data:n.data[12].original_data}]}),$scope.ExportChartDetailToExcel12=function(){m.downloadXLS()},o=new Highcharts.Chart({chart:{renderTo:"chart_container13"},title:{text:n.data[13].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[13].original_name+" condition datasheet"},colors:["#642100"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[13].original_name,data:n.data[13].original_data}]}),$scope.ExportChartDetailToExcel13=function(){o.downloadXLS()}):toaster.pop({type:"error",title:"Error",body:"There is no data to display",timeout:POPTIMEOUT})}})}))}else toaster.pop({type:"error",title:"Error",body:b.message,timeout:POPTIMEOUT})})}var d,f;return 0==c.rows.length&&noDataDateDates.push(sqls[a].substring(54,64)),a+1!=newDate.length?$timeout(function(){selectFromTable(a+1)},1):(noDataDateDates&&noDataDateDates.length>0?($scope.delay=0,$scope.minDuration=0,$scope.message="0",$scope.backdrop=!1,$scope.promise=null,$scope.templateUrl="./pages/down-loading-template.html",$scope.vm={},$scope.vm.total=noDataDateDates.length,d=0,e(d)):noDataDateDates&&0!=noDataDateDates.length||(f={},dataBase.transaction(function(a){var b="SELECT * FROM sensorHalfYearDataTable WHERE time BETWEEN'"+$scope.default_startTime+"' AND '"+$scope.default_endTime+"' AND device_guid = '"+$scope.device_guid+"' ORDER BY time";a.executeSql(b,[],function(a,b){var V,c=[],d=[],e={original_name:"Carbon_Dioxide(ppm)",name:"Carbon_Dioxide(ppm)"},g=[],h=[],i={original_name:"Substrate_PH(PH)",name:"Substrate_PH(PH)"},j=[],k=[],l={original_name:"Substrate_Conductivity(mS/cm)",name:"Substrate_Conductivity(mS/cm)"},m=[],n=[],o={original_name:"Substrate_Temperature(°C)",name:"Substrate_Temperature(°C)"},p=[],q=[],r={original_name:"Air_Temperature(°C)",name:"Air_Temperature(°C)"},s=[],t=[],u={original_name:"Ppfd(μmol㎡/s)",name:"Ppfd(100*μmol㎡/s)"},v=[],w=[],x={original_name:"Liquid_PH(PH)",name:"Liquid_PH(PH)"},y=[],z=[],A={original_name:"Substrate_Humidity(%)",name:"Substrate_Humidity(%)"},B=[],C=[],D={original_name:"Liquid_DOC(mg/l)",name:"Liquid_DOC(mg/l)"},E=[],F=[],G={original_name:"Liquid_Conductivity(mS/cm)",name:"Liquid_Conductivity(mS/cm)"},H=[],I=[],J={original_name:"Air_Humidity(%)",name:"Air_Humidity(%)"},K=[],L=[],M={original_name:"Substrate_DOC(mg/l)",name:"Substrate_DOC(mg/l)"},N=[],O=[],P={original_name:"Illuminance(lux)",name:"Illuminance(100*lux)"},Q=[],R=[],S={original_name:"Lai()",name:"Lai()"},T=[],U=[];if(b)for(V=0;V<b.rows.length;V++)c.push(b.rows[V].time),g.push(parseFloat(b.rows[V].Carbon_Dioxide_original)),h.push(parseFloat(b.rows[V].Carbon_Dioxide)),j.push(parseFloat(b.rows[V].Substrate_PH_original)),k.push(parseFloat(b.rows[V].Substrate_PH)),m.push(parseFloat(b.rows[V].Substrate_Conductivity_original)),n.push(parseFloat(b.rows[V].Substrate_Conductivity)),p.push(parseFloat(b.rows[V].Substrate_Temperature_original)),q.push(parseFloat(b.rows[V].Substrate_Temperature)),s.push(parseFloat(b.rows[V].Air_Temperature_original)),t.push(parseFloat(b.rows[V].Air_Temperature)),v.push(parseFloat(b.rows[V].Ppfd_original)),w.push(parseFloat(b.rows[V].Ppfd)),y.push(parseFloat(b.rows[V].Liquid_PH_original)),z.push(parseFloat(b.rows[V].Liquid_PH)),B.push(parseFloat(b.rows[V].Substrate_Humidity_original)),C.push(parseFloat(b.rows[V].Substrate_Humidity)),E.push(parseFloat(b.rows[V].Liquid_DOC_original)),F.push(parseFloat(b.rows[V].Liquid_DOC)),H.push(parseFloat(b.rows[V].Liquid_Conductivity_original)),I.push(parseFloat(b.rows[V].Liquid_Conductivity)),K.push(parseFloat(b.rows[V].Air_Humidity_original)),L.push(parseFloat(b.rows[V].Air_Humidity)),N.push(parseFloat(b.rows[V].Substrate_DOC_original)),O.push(parseFloat(b.rows[V].Substrate_DOC)),Q.push(parseFloat(b.rows[V].Illuminance_original)),R.push(parseFloat(b.rows[V].Illuminance)),T.push(parseFloat(b.rows[V].Lai_original)),U.push(parseFloat(b.rows[V].Lai));e.original_data=g,e.data=h,i.original_data=j,i.data=k,l.original_data=m,l.data=n,o.original_data=p,o.data=q,r.original_data=s,r.data=t,u.original_data=v,u.data=w,x.original_data=y,x.data=z,A.original_data=B,A.data=C,D.original_data=E,D.data=F,G.original_data=H,G.data=I,J.original_data=K,J.data=L,M.original_data=N,M.data=O,P.original_data=Q,P.data=R,S.original_data=T,S.data=U,d.push(r),d.push(J),d.push(o),d.push(A),d.push(i),d.push(e),d.push(P),d.push(l),d.push(u),d.push(x),d.push(S),d.push(G),d.push(D),d.push(M),f.data=d,f.time=c,new Highcharts.Chart({chart:{renderTo:"container",backgroundColor:"rgba(0,0,0,0)"},colors:["#000000","#CE0000","#FF79BC","#921AFF","#7D7DFF","#00CACA","#93FF93","#FF8040","#A8FF24","#AD5A5A","#8080C0","#A5A552","#424200","#642100"],title:{text:"Sensor History Data",x:-20},exporting:{enabled:!1,filename:"horticulture growing condition datasheet"},subtitle:{text:"Source Region: "+regionName,x:-20},marker:!1,noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",borderRadius:10,pointFormat:'<tr><td>{series.name}: </td><td style="text-align: right"><b>{point.y}</b></td></tr>',valueDecimals:3},legend:{align:"center",verticalAlign:"bottom"},series:f.data}),$scope.downLoad=function(){window.open("http://73.231.41.102:8080/sensor/history/export?user_id="+$cookieStore.get("user_id")+"&region_guid="+regionId+"&gateway_id="+gatewayId+"&start_time="+encodeURI(UTC_startTime)+"&end_time="+encodeURI(UTC_endTime))},$scope.toChartDetail=function(){var a,b,c,d,e,g,h,i,j,k,l,m,n,o;f.data||0!=f.data.length?($scope.chartDetailShow=!$scope.chartDetailShow,$scope.lastNextShow=!$scope.lastNextShow,$scope.chartShow=!$scope.chartShow,a=new Highcharts.Chart({chart:{renderTo:"chart_container"},title:{text:f.data[0].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[0].original_name+" condition datasheet"},colors:["#000000"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[0].original_name,data:f.data[0].original_data}]}),$scope.ExportChartDetailToExcel=function(){a.downloadXLS()},b=new Highcharts.Chart({chart:{renderTo:"chart_container1"},title:{text:f.data[1].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[1].original_name+" condition datasheet"},colors:["#CE0000"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[1].original_name,data:f.data[1].original_data}]}),$scope.ExportChartDetailToExcel1=function(){b.downloadXLS()},c=new Highcharts.Chart({chart:{renderTo:"chart_container2"},title:{text:f.data[2].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[2].original_name+" condition datasheet"},colors:["#FF79BC"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[2].original_name,data:f.data[2].original_data}]}),$scope.ExportChartDetailToExcel2=function(){c.downloadXLS()},d=new Highcharts.Chart({chart:{renderTo:"chart_container3"},title:{text:f.data[3].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[3].original_name+" condition datasheet"},colors:["#921AFF"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[3].original_name,data:f.data[3].original_data}]}),$scope.ExportChartDetailToExcel3=function(){d.downloadXLS()},e=new Highcharts.Chart({chart:{renderTo:"chart_container4"},title:{text:f.data[4].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[4].original_name+" condition datasheet"},colors:["#7D7DFF"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[4].original_name,data:f.data[4].original_data}]}),$scope.ExportChartDetailToExcel4=function(){e.downloadXLS()},g=new Highcharts.Chart({chart:{renderTo:"chart_container5"},title:{text:f.data[5].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[5].original_name+" condition datasheet"},colors:["#00CACA"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[5].original_name,data:f.data[5].original_data}]}),$scope.ExportChartDetailToExcel5=function(){g.downloadXLS()},h=new Highcharts.Chart({chart:{renderTo:"chart_container6"},title:{text:f.data[6].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[6].original_name+" condition datasheet"},colors:["#93FF93"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[6].original_name,data:f.data[6].original_data}]}),$scope.ExportChartDetailToExcel6=function(){h.downloadXLS()},i=new Highcharts.Chart({chart:{renderTo:"chart_container7"},title:{text:f.data[7].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[7].original_name+" condition datasheet"},colors:["#FF8040"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[7].original_name,data:f.data[7].original_data}]}),$scope.ExportChartDetailToExcel7=function(){i.downloadXLS()},j=new Highcharts.Chart({chart:{renderTo:"chart_container8"},title:{text:f.data[8].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[8].original_name+" condition datasheet"},colors:["#A8FF24"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[8].original_name,data:f.data[8].original_data}]}),$scope.ExportChartDetailToExcel8=function(){j.downloadXLS()
                },k=new Highcharts.Chart({chart:{renderTo:"chart_container9"},title:{text:f.data[9].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[9].original_name+" condition datasheet"},colors:["#AD5A5A"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[9].original_name,data:f.data[9].original_data}]}),$scope.ExportChartDetailToExcel9=function(){k.downloadXLS()},l=new Highcharts.Chart({chart:{renderTo:"chart_container10"},title:{text:f.data[10].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[10].original_name+" condition datasheet"},colors:["#8080C0"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[10].original_name,data:f.data[10].original_data}]}),$scope.ExportChartDetailToExcel10=function(){l.downloadXLS()},m=new Highcharts.Chart({chart:{renderTo:"chart_container11"},title:{text:f.data[11].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[11].original_name+" condition datasheet"},colors:["#A5A552"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[11].original_name,data:f.data[11].original_data}]}),$scope.ExportChartDetailToExcel11=function(){m.downloadXLS()},n=new Highcharts.Chart({chart:{renderTo:"chart_container12"},title:{text:f.data[12].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[12].original_name+" condition datasheet"},colors:["#424200"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[12].original_name,data:f.data[12].original_data}]}),$scope.ExportChartDetailToExcel12=function(){n.downloadXLS()},o=new Highcharts.Chart({chart:{renderTo:"chart_container13"},title:{text:f.data[13].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[13].original_name+" condition datasheet"},colors:["#642100"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[13].original_name,data:f.data[13].original_data}]}),$scope.ExportChartDetailToExcel13=function(){o.downloadXLS()}):toaster.pop({type:"error",title:"Error",body:"There is no data to display",timeout:POPTIMEOUT})}})})),void 0)})})}var time1,time2,dayDiff,newDate,i,sqls,y,noDataDateDates,x;for(toaster.pop({type:"success",title:"",body:"Please waiting ...",timeout:POPTIMEOUT}),$scope.default_endTime=new Date(new Date($scope.default_startTime).getTime()).Format("yyyy-MM-dd hh:mm:ss"),$scope.default_startTime=new Date(new Date($scope.default_startTime).getTime()-1e3*60*60*$scope.my.timeDiff).Format("yyyy-MM-dd hh:mm:ss"),UTC_startTime=$scope.format(new Date($scope.default_startTime).toUTCString(),"yyyy-MM-dd HH:mm:ss"),UTC_endTime=$scope.format(new Date($scope.default_endTime).toUTCString(),"yyyy-MM-dd HH:mm:ss"),time1=$scope.default_startTime.substring(0,10),time2=$scope.default_endTime.substring(0,10),dayDiff=DateDiff(time1,time2)+1,newDate=[],i=0;dayDiff>i;i++)newDate[i]=getNewDay(time1,i);for(sqls=[],y=0;y<newDate.length;y++)sqls[y]="SELECT * FROM sensorYearDataTable WHERE time BETWEEN '"+newDate[y]+" 00:00:00"+"' AND '"+newDate[y]+" 23:59:59"+"' AND device_guid = '"+$scope.device_guid+"'";noDataDateDates=[],x=0,selectFromTable(x);
            }else {
                function selectFromTable(a){dataBase.transaction(function(b){b.executeSql(sqls[a],[],function(b,c){function e(a){var b={table_device_guid:$scope.device_guid,device_name:"",gateway_id:gatewayId,start_time:$scope.format(new Date(noDataDateDates[a]+" 00:00:00").toUTCString(),"yyyy-MM-dd HH:mm:ss"),end_time:$scope.format(new Date(noDataDateDates[a]+" 23:59:59").toUTCString(),"yyyy-MM-dd HH:mm:ss")};$scope.getSensorDataProm=AuthService.myHttp(token,b,"GET","sensor/sensorOneDay").then(function(b){var c,d,f,g,h,i,j,k,l,m,n;if("0"==b.code){for($scope.message=Math.round(100*((a+1)/$scope.vm.total)),c=[],d=[],f=[],g=[],h=[],i=[],j=[],k=[],l=0;l<b.content.time.length;l++)d[l]=new Date(b.content.time[l]),c[l]=d[l].getTime(),c[l]-=1e3*60*(new Date).getTimezoneOffset(),c[l]=new Date(c[l]).Format("yyyy-MM-dd hh:mm:ss");for(m=0;m<b.content.quarterObject.time.length;m++)f[m]=new Date(b.content.quarterObject.time[m]),i[m]=f[m].getTime(),i[m]-=1e3*60*(new Date).getTimezoneOffset(),i[m]=new Date(i[m]).Format("yyyy-MM-dd hh:mm:ss");for(m=0;m<b.content.halfYearObject.time.length;m++)g[m]=new Date(b.content.halfYearObject.time[m]),j[m]=g[m].getTime(),j[m]-=1e3*60*(new Date).getTimezoneOffset(),j[m]=new Date(j[m]).Format("yyyy-MM-dd hh:mm:ss");for(m=0;m<b.content.yearObject.time.length;m++)h[m]=new Date(b.content.yearObject.time[m]),k[m]=h[m].getTime(),k[m]-=1e3*60*(new Date).getTimezoneOffset(),k[m]=new Date(k[m]).Format("yyyy-MM-dd hh:mm:ss");if(dataBase.transaction(function(a){var d,e,f,g,h,l,m,n;for(d=0;d<b.content.time.length;d++)e="INSERT INTO sensorDataTable(device_guid,time,Carbon_Dioxide_original,Carbon_Dioxide,Substrate_PH_original,Substrate_PH,Substrate_Conductivity_original,Substrate_Conductivity,Substrate_Temperature_original,Substrate_Temperature,Air_Temperature_original,Air_Temperature,Ppfd_original,Ppfd,Liquid_PH_original,Liquid_PH,Substrate_Humidity_original,Substrate_Humidity,Liquid_DOC_original,Liquid_DOC,Liquid_Conductivity_original,Liquid_Conductivity,Air_Humidity_original,Air_Humidity,Substrate_DOC_original,Substrate_DOC,Illuminance_original,Illuminance,Lai_original,Lai) values ('"+$scope.device_guid+"','"+c[d]+"','"+b.content.data[0].original_data[d]+"','"+b.content.data[0].data[d]+"'"+",'"+b.content.data[1].original_data[d]+"','"+b.content.data[1].data[d]+"','"+b.content.data[2].original_data[d]+"','"+b.content.data[2].data[d]+"','"+b.content.data[3].original_data[d]+"','"+b.content.data[3].data[d]+"'"+",'"+b.content.data[4].original_data[d]+"','"+b.content.data[4].data[d]+"','"+b.content.data[5].original_data[d]+"','"+b.content.data[5].data[d]+"','"+b.content.data[6].original_data[d]+"','"+b.content.data[6].data[d]+"'"+",'"+b.content.data[7].original_data[d]+"','"+b.content.data[7].data[d]+"','"+b.content.data[8].original_data[d]+"','"+b.content.data[8].data[d]+"','"+b.content.data[9].original_data[d]+"','"+b.content.data[9].data[d]+"'"+",'"+b.content.data[10].original_data[d]+"','"+b.content.data[10].data[d]+"','"+b.content.data[11].original_data[d]+"','"+b.content.data[11].data[d]+"','"+b.content.data[12].original_data[d]+"','"+b.content.data[12].data[d]+"'"+",'"+b.content.data[13].original_data[d]+"','"+b.content.data[13].data[d]+"')",a.executeSql(e);for(f=0;f<b.content.quarterObject.time.length;f++)g="INSERT INTO sensorQuarterDataTable(device_guid,time,Carbon_Dioxide_original,Carbon_Dioxide,Substrate_PH_original,Substrate_PH,Substrate_Conductivity_original,Substrate_Conductivity,Substrate_Temperature_original,Substrate_Temperature,Air_Temperature_original,Air_Temperature,Ppfd_original,Ppfd,Liquid_PH_original,Liquid_PH,Substrate_Humidity_original,Substrate_Humidity,Liquid_DOC_original,Liquid_DOC,Liquid_Conductivity_original,Liquid_Conductivity,Air_Humidity_original,Air_Humidity,Substrate_DOC_original,Substrate_DOC,Illuminance_original,Illuminance,Lai_original,Lai) values ('"+$scope.device_guid+"','"+i[f]+"','"+b.content.quarterObject.data[0].original_data[f]+"','"+b.content.quarterObject.data[0].data[f]+"'"+",'"+b.content.quarterObject.data[1].original_data[f]+"','"+b.content.quarterObject.data[1].data[f]+"','"+b.content.quarterObject.data[2].original_data[f]+"','"+b.content.quarterObject.data[2].data[f]+"','"+b.content.quarterObject.data[3].original_data[f]+"','"+b.content.quarterObject.data[3].data[f]+"'"+",'"+b.content.quarterObject.data[4].original_data[f]+"','"+b.content.quarterObject.data[4].data[f]+"','"+b.content.quarterObject.data[5].original_data[f]+"','"+b.content.quarterObject.data[5].data[f]+"','"+b.content.quarterObject.data[6].original_data[f]+"','"+b.content.quarterObject.data[6].data[f]+"'"+",'"+b.content.quarterObject.data[7].original_data[f]+"','"+b.content.quarterObject.data[7].data[f]+"','"+b.content.quarterObject.data[8].original_data[f]+"','"+b.content.quarterObject.data[8].data[f]+"','"+b.content.quarterObject.data[9].original_data[f]+"','"+b.content.quarterObject.data[9].data[f]+"'"+",'"+b.content.quarterObject.data[10].original_data[f]+"','"+b.content.quarterObject.data[10].data[f]+"','"+b.content.quarterObject.data[11].original_data[f]+"','"+b.content.quarterObject.data[11].data[f]+"','"+b.content.quarterObject.data[12].original_data[f]+"','"+b.content.quarterObject.data[12].data[f]+"'"+",'"+b.content.quarterObject.data[13].original_data[f]+"','"+b.content.quarterObject.data[13].data[f]+"')",a.executeSql(g);for(h=0;h<b.content.quarterObject.time.length;h++)l="INSERT INTO sensorHalfYearDataTable(device_guid,time,Carbon_Dioxide_original,Carbon_Dioxide,Substrate_PH_original,Substrate_PH,Substrate_Conductivity_original,Substrate_Conductivity,Substrate_Temperature_original,Substrate_Temperature,Air_Temperature_original,Air_Temperature,Ppfd_original,Ppfd,Liquid_PH_original,Liquid_PH,Substrate_Humidity_original,Substrate_Humidity,Liquid_DOC_original,Liquid_DOC,Liquid_Conductivity_original,Liquid_Conductivity,Air_Humidity_original,Air_Humidity,Substrate_DOC_original,Substrate_DOC,Illuminance_original,Illuminance,Lai_original,Lai) values ('"+$scope.device_guid+"','"+j[h]+"','"+b.content.halfYearObject.data[0].original_data[h]+"','"+b.content.halfYearObject.data[0].data[h]+"'"+",'"+b.content.halfYearObject.data[1].original_data[h]+"','"+b.content.halfYearObject.data[1].data[h]+"','"+b.content.halfYearObject.data[2].original_data[h]+"','"+b.content.halfYearObject.data[2].data[h]+"','"+b.content.halfYearObject.data[3].original_data[h]+"','"+b.content.halfYearObject.data[3].data[h]+"'"+",'"+b.content.halfYearObject.data[4].original_data[h]+"','"+b.content.halfYearObject.data[4].data[h]+"','"+b.content.halfYearObject.data[5].original_data[h]+"','"+b.content.halfYearObject.data[5].data[h]+"','"+b.content.halfYearObject.data[6].original_data[h]+"','"+b.content.halfYearObject.data[6].data[h]+"'"+",'"+b.content.halfYearObject.data[7].original_data[h]+"','"+b.content.halfYearObject.data[7].data[h]+"','"+b.content.halfYearObject.data[8].original_data[h]+"','"+b.content.halfYearObject.data[8].data[h]+"','"+b.content.halfYearObject.data[9].original_data[h]+"','"+b.content.halfYearObject.data[9].data[h]+"'"+",'"+b.content.halfYearObject.data[10].original_data[h]+"','"+b.content.halfYearObject.data[10].data[h]+"','"+b.content.halfYearObject.data[11].original_data[h]+"','"+b.content.halfYearObject.data[11].data[h]+"','"+b.content.halfYearObject.data[12].original_data[h]+"','"+b.content.halfYearObject.data[12].data[h]+"'"+",'"+b.content.halfYearObject.data[13].original_data[h]+"','"+b.content.halfYearObject.data[13].data[h]+"')",a.executeSql(l);for(m=0;m<b.content.yearObject.time.length;m++)n="INSERT INTO sensorYearDataTable(device_guid,time,Carbon_Dioxide_original,Carbon_Dioxide,Substrate_PH_original,Substrate_PH,Substrate_Conductivity_original,Substrate_Conductivity,Substrate_Temperature_original,Substrate_Temperature,Air_Temperature_original,Air_Temperature,Ppfd_original,Ppfd,Liquid_PH_original,Liquid_PH,Substrate_Humidity_original,Substrate_Humidity,Liquid_DOC_original,Liquid_DOC,Liquid_Conductivity_original,Liquid_Conductivity,Air_Humidity_original,Air_Humidity,Substrate_DOC_original,Substrate_DOC,Illuminance_original,Illuminance,Lai_original,Lai) values ('"+$scope.device_guid+"','"+k[m]+"','"+b.content.yearObject.data[0].original_data[m]+"','"+b.content.yearObject.data[0].data[m]+"'"+",'"+b.content.yearObject.data[1].original_data[m]+"','"+b.content.yearObject.data[1].data[m]+"','"+b.content.yearObject.data[2].original_data[m]+"','"+b.content.yearObject.data[2].data[m]+"','"+b.content.yearObject.data[3].original_data[m]+"','"+b.content.yearObject.data[3].data[m]+"'"+",'"+b.content.yearObject.data[4].original_data[m]+"','"+b.content.yearObject.data[4].data[m]+"','"+b.content.yearObject.data[5].original_data[m]+"','"+b.content.yearObject.data[5].data[m]+"','"+b.content.yearObject.data[6].original_data[m]+"','"+b.content.yearObject.data[6].data[m]+"'"+",'"+b.content.yearObject.data[7].original_data[m]+"','"+b.content.yearObject.data[7].data[m]+"','"+b.content.yearObject.data[8].original_data[m]+"','"+b.content.yearObject.data[8].data[m]+"','"+b.content.yearObject.data[9].original_data[m]+"','"+b.content.yearObject.data[9].data[m]+"'"+",'"+b.content.yearObject.data[10].original_data[m]+"','"+b.content.yearObject.data[10].data[m]+"','"+b.content.yearObject.data[11].original_data[m]+"','"+b.content.yearObject.data[11].data[m]+"','"+b.content.yearObject.data[12].original_data[m]+"','"+b.content.yearObject.data[12].data[m]+"'"+",'"+b.content.yearObject.data[13].original_data[m]+"','"+b.content.yearObject.data[13].data[m]+"')",a.executeSql(n)}),a+1!=noDataDateDates.length)return $timeout(function(){e(a+1)},1500);a+1==noDataDateDates.length&&(toaster.pop({type:"success",title:"Success",body:"Download successfully , please waiting...",timeout:POPTIMEOUT}),n={},dataBase.transaction(function(a){var b="SELECT * FROM sensorYearDataTable WHERE time BETWEEN'"+$scope.default_startTime+"' AND '"+$scope.default_endTime+"' AND device_guid = '"+$scope.device_guid+"' ORDER BY time";a.executeSql(b,[],function(a,b){var V,c=[],d=[],e={original_name:"Carbon_Dioxide(ppm)",name:"Carbon_Dioxide(ppm)"},f=[],g=[],h={original_name:"Substrate_PH(PH)",name:"Substrate_PH(PH)"},i=[],j=[],k={original_name:"Substrate_Conductivity(mS/cm)",name:"Substrate_Conductivity(mS/cm)"},l=[],m=[],o={original_name:"Substrate_Temperature(°C)",name:"Substrate_Temperature(°C)"},p=[],q=[],r={original_name:"Air_Temperature(°C)",name:"Air_Temperature(°C)"},s=[],t=[],u={original_name:"Ppfd(μmol㎡/s)",name:"Ppfd(100*μmol㎡/s)"},v=[],w=[],x={original_name:"Liquid_PH(PH)",name:"Liquid_PH(PH)"},y=[],z=[],A={original_name:"Substrate_Humidity(%)",name:"Substrate_Humidity(%)"},B=[],C=[],D={original_name:"Liquid_DOC(mg/l)",name:"Liquid_DOC(mg/l)"},E=[],F=[],G={original_name:"Liquid_Conductivity(mS/cm)",name:"Liquid_Conductivity(mS/cm)"},H=[],I=[],J={original_name:"Air_Humidity(%)",name:"Air_Humidity(%)"},K=[],L=[],M={original_name:"Substrate_DOC(mg/l)",name:"Substrate_DOC(mg/l)"},N=[],O=[],P={original_name:"Illuminance(lux)",name:"Illuminance(100*lux)"},Q=[],R=[],S={original_name:"Lai()",name:"Lai()"},T=[],U=[];if(b)for(V=0;V<b.rows.length;V++)c.push(b.rows[V].time),f.push(parseFloat(b.rows[V].Carbon_Dioxide_original)),g.push(parseFloat(b.rows[V].Carbon_Dioxide)),i.push(parseFloat(b.rows[V].Substrate_PH_original)),j.push(parseFloat(b.rows[V].Substrate_PH)),l.push(parseFloat(b.rows[V].Substrate_Conductivity_original)),m.push(parseFloat(b.rows[V].Substrate_Conductivity)),p.push(parseFloat(b.rows[V].Substrate_Temperature_original)),q.push(parseFloat(b.rows[V].Substrate_Temperature)),s.push(parseFloat(b.rows[V].Air_Temperature_original)),t.push(parseFloat(b.rows[V].Air_Temperature)),v.push(parseFloat(b.rows[V].Ppfd_original)),w.push(parseFloat(b.rows[V].Ppfd)),y.push(parseFloat(b.rows[V].Liquid_PH_original)),z.push(parseFloat(b.rows[V].Liquid_PH)),B.push(parseFloat(b.rows[V].Substrate_Humidity_original)),C.push(parseFloat(b.rows[V].Substrate_Humidity)),E.push(parseFloat(b.rows[V].Liquid_DOC_original)),F.push(parseFloat(b.rows[V].Liquid_DOC)),H.push(parseFloat(b.rows[V].Liquid_Conductivity_original)),I.push(parseFloat(b.rows[V].Liquid_Conductivity)),K.push(parseFloat(b.rows[V].Air_Humidity_original)),L.push(parseFloat(b.rows[V].Air_Humidity)),N.push(parseFloat(b.rows[V].Substrate_DOC_original)),O.push(parseFloat(b.rows[V].Substrate_DOC)),Q.push(parseFloat(b.rows[V].Illuminance_original)),R.push(parseFloat(b.rows[V].Illuminance)),T.push(parseFloat(b.rows[V].Lai_original)),U.push(parseFloat(b.rows[V].Lai));e.original_data=f,e.data=g,h.original_data=i,h.data=j,k.original_data=l,k.data=m,o.original_data=p,o.data=q,r.original_data=s,r.data=t,u.original_data=v,u.data=w,x.original_data=y,x.data=z,A.original_data=B,A.data=C,D.original_data=E,D.data=F,G.original_data=H,G.data=I,J.original_data=K,J.data=L,M.original_data=N,M.data=O,P.original_data=Q,P.data=R,S.original_data=T,S.data=U,d.push(r),d.push(J),d.push(o),d.push(A),d.push(h),d.push(e),d.push(P),d.push(k),d.push(u),d.push(x),d.push(S),d.push(G),d.push(D),d.push(M),n.data=d,n.time=c,new Highcharts.Chart({chart:{renderTo:"container",backgroundColor:"rgba(0,0,0,0)"},colors:["#000000","#CE0000","#FF79BC","#921AFF","#7D7DFF","#00CACA","#93FF93","#FF8040","#A8FF24","#AD5A5A","#8080C0","#A5A552","#424200","#642100"],title:{text:"Sensor History Data",x:-20},exporting:{enabled:!1,filename:"horticulture growing condition datasheet"},subtitle:{text:"Source Region: "+regionName,x:-20},marker:!1,noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",borderRadius:10,pointFormat:'<tr><td>{series.name}: </td><td style="text-align: right"><b>{point.y}</b></td></tr>',valueDecimals:3},legend:{align:"center",verticalAlign:"bottom"},series:n.data}),$scope.downLoad=function(){window.open("http://73.231.41.102:8080/sensor/history/export?user_id="+$cookieStore.get("user_id")+"&region_guid="+regionId+"&gateway_id="+gatewayId+"&start_time="+encodeURI(UTC_startTime)+"&end_time="+encodeURI(UTC_endTime))},$scope.toChartDetail=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,o;n.data||0!=n.data.length?($scope.chartDetailShow=!$scope.chartDetailShow,$scope.lastNextShow=!$scope.lastNextShow,$scope.chartShow=!$scope.chartShow,a=new Highcharts.Chart({chart:{renderTo:"chart_container"},title:{text:n.data[0].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[0].original_name+" condition datasheet"},colors:["#000000"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[0].original_name,data:n.data[0].original_data}]}),$scope.ExportChartDetailToExcel=function(){a.downloadXLS()},b=new Highcharts.Chart({chart:{renderTo:"chart_container1"},title:{text:n.data[1].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[1].original_name+" condition datasheet"},colors:["#CE0000"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[1].original_name,data:n.data[1].original_data}]}),$scope.ExportChartDetailToExcel1=function(){b.downloadXLS()},c=new Highcharts.Chart({chart:{renderTo:"chart_container2"},title:{text:n.data[2].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[2].original_name+" condition datasheet"},colors:["#FF79BC"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[2].original_name,data:n.data[2].original_data}]}),$scope.ExportChartDetailToExcel2=function(){c.downloadXLS()},d=new Highcharts.Chart({chart:{renderTo:"chart_container3"},title:{text:n.data[3].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[3].original_name+" condition datasheet"},colors:["#921AFF"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[3].original_name,data:n.data[3].original_data}]}),$scope.ExportChartDetailToExcel3=function(){d.downloadXLS()},e=new Highcharts.Chart({chart:{renderTo:"chart_container4"},title:{text:n.data[4].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[4].original_name+" condition datasheet"},colors:["#7D7DFF"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[4].original_name,data:n.data[4].original_data}]}),$scope.ExportChartDetailToExcel4=function(){e.downloadXLS()},f=new Highcharts.Chart({chart:{renderTo:"chart_container5"},title:{text:n.data[5].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[5].original_name+" condition datasheet"},colors:["#00CACA"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[5].original_name,data:n.data[5].original_data}]}),$scope.ExportChartDetailToExcel5=function(){f.downloadXLS()},g=new Highcharts.Chart({chart:{renderTo:"chart_container6"},title:{text:n.data[6].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[6].original_name+" condition datasheet"},colors:["#93FF93"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[6].original_name,data:n.data[6].original_data}]}),$scope.ExportChartDetailToExcel6=function(){g.downloadXLS()},h=new Highcharts.Chart({chart:{renderTo:"chart_container7"},title:{text:n.data[7].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[7].original_name+" condition datasheet"},colors:["#FF8040"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[7].original_name,data:n.data[7].original_data}]}),$scope.ExportChartDetailToExcel7=function(){h.downloadXLS()},i=new Highcharts.Chart({chart:{renderTo:"chart_container8"},title:{text:n.data[8].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[8].original_name+" condition datasheet"},colors:["#A8FF24"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[8].original_name,data:n.data[8].original_data}]}),$scope.ExportChartDetailToExcel8=function(){i.downloadXLS()},j=new Highcharts.Chart({chart:{renderTo:"chart_container9"},title:{text:n.data[9].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[9].original_name+" condition datasheet"},colors:["#AD5A5A"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[9].original_name,data:n.data[9].original_data}]}),$scope.ExportChartDetailToExcel9=function(){j.downloadXLS()},k=new Highcharts.Chart({chart:{renderTo:"chart_container10"},title:{text:n.data[10].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[10].original_name+" condition datasheet"},colors:["#8080C0"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[10].original_name,data:n.data[10].original_data}]}),$scope.ExportChartDetailToExcel10=function(){k.downloadXLS()},l=new Highcharts.Chart({chart:{renderTo:"chart_container11"},title:{text:n.data[11].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[11].original_name+" condition datasheet"},colors:["#A5A552"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[11].original_name,data:n.data[11].original_data}]}),$scope.ExportChartDetailToExcel11=function(){l.downloadXLS()},m=new Highcharts.Chart({chart:{renderTo:"chart_container12"},title:{text:n.data[12].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[12].original_name+" condition datasheet"},colors:["#424200"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[12].original_name,data:n.data[12].original_data}]}),$scope.ExportChartDetailToExcel12=function(){m.downloadXLS()},o=new Highcharts.Chart({chart:{renderTo:"chart_container13"},title:{text:n.data[13].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[13].original_name+" condition datasheet"},colors:["#642100"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[13].original_name,data:n.data[13].original_data}]}),$scope.ExportChartDetailToExcel13=function(){o.downloadXLS()}):toaster.pop({type:"error",title:"Error",body:"There is no data to display",timeout:POPTIMEOUT})}})}))}else toaster.pop({type:"error",title:"Error",body:b.message,timeout:POPTIMEOUT})})}var d,f;return 0==c.rows.length&&noDataDateDates.push(sqls[a].substring(55,67)),a+1!=newDate.length?$timeout(function(){selectFromTable(a+1)},1):(noDataDateDates&&noDataDateDates.length>0?($scope.delay=0,$scope.minDuration=0,$scope.message="0",$scope.backdrop=!1,$scope.promise=null,$scope.templateUrl="./pages/down-loading-template.html",$scope.vm={},$scope.vm.total=noDataDateDates.length,d=0,e(d)):noDataDateDates&&0!=noDataDateDates.length||(f={},dataBase.transaction(function(a){var b="SELECT * FROM sensorYearDataTable WHERE time BETWEEN'"+$scope.default_startTime+"' AND '"+$scope.default_endTime+"' AND device_guid = '"+$scope.device_guid+"' ORDER BY time";a.executeSql(b,[],function(a,b){var V,c=[],d=[],e={original_name:"Carbon_Dioxide(ppm)",name:"Carbon_Dioxide(ppm)"},g=[],h=[],i={original_name:"Substrate_PH(PH)",name:"Substrate_PH(PH)"},j=[],k=[],l={original_name:"Substrate_Conductivity(mS/cm)",name:"Substrate_Conductivity(mS/cm)"},m=[],n=[],o={original_name:"Substrate_Temperature(°C)",name:"Substrate_Temperature(°C)"},p=[],q=[],r={original_name:"Air_Temperature(°C)",name:"Air_Temperature(°C)"},s=[],t=[],u={original_name:"Ppfd(μmol㎡/s)",name:"Ppfd(100*μmol㎡/s)"},v=[],w=[],x={original_name:"Liquid_PH(PH)",name:"Liquid_PH(PH)"},y=[],z=[],A={original_name:"Substrate_Humidity(%)",name:"Substrate_Humidity(%)"},B=[],C=[],D={original_name:"Liquid_DOC(mg/l)",name:"Liquid_DOC(mg/l)"},E=[],F=[],G={original_name:"Liquid_Conductivity(mS/cm)",name:"Liquid_Conductivity(mS/cm)"},H=[],I=[],J={original_name:"Air_Humidity(%)",name:"Air_Humidity(%)"},K=[],L=[],M={original_name:"Substrate_DOC(mg/l)",name:"Substrate_DOC(mg/l)"},N=[],O=[],P={original_name:"Illuminance(lux)",name:"Illuminance(100*lux)"},Q=[],R=[],S={original_name:"Lai()",name:"Lai()"},T=[],U=[];if(b)for(V=0;V<b.rows.length;V++)c.push(b.rows[V].time),g.push(parseFloat(b.rows[V].Carbon_Dioxide_original)),h.push(parseFloat(b.rows[V].Carbon_Dioxide)),j.push(parseFloat(b.rows[V].Substrate_PH_original)),k.push(parseFloat(b.rows[V].Substrate_PH)),m.push(parseFloat(b.rows[V].Substrate_Conductivity_original)),n.push(parseFloat(b.rows[V].Substrate_Conductivity)),p.push(parseFloat(b.rows[V].Substrate_Temperature_original)),q.push(parseFloat(b.rows[V].Substrate_Temperature)),s.push(parseFloat(b.rows[V].Air_Temperature_original)),t.push(parseFloat(b.rows[V].Air_Temperature)),v.push(parseFloat(b.rows[V].Ppfd_original)),w.push(parseFloat(b.rows[V].Ppfd)),y.push(parseFloat(b.rows[V].Liquid_PH_original)),z.push(parseFloat(b.rows[V].Liquid_PH)),B.push(parseFloat(b.rows[V].Substrate_Humidity_original)),C.push(parseFloat(b.rows[V].Substrate_Humidity)),E.push(parseFloat(b.rows[V].Liquid_DOC_original)),F.push(parseFloat(b.rows[V].Liquid_DOC)),H.push(parseFloat(b.rows[V].Liquid_Conductivity_original)),I.push(parseFloat(b.rows[V].Liquid_Conductivity)),K.push(parseFloat(b.rows[V].Air_Humidity_original)),L.push(parseFloat(b.rows[V].Air_Humidity)),N.push(parseFloat(b.rows[V].Substrate_DOC_original)),O.push(parseFloat(b.rows[V].Substrate_DOC)),Q.push(parseFloat(b.rows[V].Illuminance_original)),R.push(parseFloat(b.rows[V].Illuminance)),T.push(parseFloat(b.rows[V].Lai_original)),U.push(parseFloat(b.rows[V].Lai));e.original_data=g,e.data=h,i.original_data=j,i.data=k,l.original_data=m,l.data=n,o.original_data=p,o.data=q,r.original_data=s,r.data=t,u.original_data=v,u.data=w,x.original_data=y,x.data=z,A.original_data=B,A.data=C,D.original_data=E,D.data=F,G.original_data=H,G.data=I,J.original_data=K,J.data=L,M.original_data=N,M.data=O,P.original_data=Q,P.data=R,S.original_data=T,S.data=U,d.push(r),d.push(J),d.push(o),d.push(A),d.push(i),d.push(e),d.push(P),d.push(l),d.push(u),d.push(x),d.push(S),d.push(G),d.push(D),d.push(M),f.data=d,f.time=c,new Highcharts.Chart({chart:{renderTo:"container",backgroundColor:"rgba(0,0,0,0)"},colors:["#000000","#CE0000","#FF79BC","#921AFF","#7D7DFF","#00CACA","#93FF93","#FF8040","#A8FF24","#AD5A5A","#8080C0","#A5A552","#424200","#642100"],title:{text:"Sensor History Data",x:-20},exporting:{enabled:!1,filename:"horticulture growing condition datasheet"},subtitle:{text:"Source Region: "+regionName,x:-20},marker:!1,noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",borderRadius:10,pointFormat:'<tr><td>{series.name}: </td><td style="text-align: right"><b>{point.y}</b></td></tr>',valueDecimals:3},legend:{align:"center",verticalAlign:"bottom"},series:f.data}),$scope.downLoad=function(){window.open("http://73.231.41.102:8080/sensor/history/export?user_id="+$cookieStore.get("user_id")+"&region_guid="+regionId+"&gateway_id="+gatewayId+"&start_time="+encodeURI(UTC_startTime)+"&end_time="+encodeURI(UTC_endTime))},$scope.toChartDetail=function(){var a,b,c,d,e,g,h,i,j,k,l,m,n,o;f.data||0!=f.data.length?($scope.chartDetailShow=!$scope.chartDetailShow,$scope.lastNextShow=!$scope.lastNextShow,$scope.chartShow=!$scope.chartShow,a=new Highcharts.Chart({chart:{renderTo:"chart_container"},title:{text:f.data[0].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[0].original_name+" condition datasheet"},colors:["#000000"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[0].original_name,data:f.data[0].original_data}]}),$scope.ExportChartDetailToExcel=function(){a.downloadXLS()},b=new Highcharts.Chart({chart:{renderTo:"chart_container1"},title:{text:f.data[1].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[1].original_name+" condition datasheet"},colors:["#CE0000"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[1].original_name,data:f.data[1].original_data}]}),$scope.ExportChartDetailToExcel1=function(){b.downloadXLS()},c=new Highcharts.Chart({chart:{renderTo:"chart_container2"},title:{text:f.data[2].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[2].original_name+" condition datasheet"},colors:["#FF79BC"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[2].original_name,data:f.data[2].original_data}]}),$scope.ExportChartDetailToExcel2=function(){c.downloadXLS()},d=new Highcharts.Chart({chart:{renderTo:"chart_container3"},title:{text:f.data[3].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[3].original_name+" condition datasheet"},colors:["#921AFF"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[3].original_name,data:f.data[3].original_data}]}),$scope.ExportChartDetailToExcel3=function(){d.downloadXLS()},e=new Highcharts.Chart({chart:{renderTo:"chart_container4"},title:{text:f.data[4].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[4].original_name+" condition datasheet"},colors:["#7D7DFF"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[4].original_name,data:f.data[4].original_data}]}),$scope.ExportChartDetailToExcel4=function(){e.downloadXLS()},g=new Highcharts.Chart({chart:{renderTo:"chart_container5"},title:{text:f.data[5].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[5].original_name+" condition datasheet"},colors:["#00CACA"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[5].original_name,data:f.data[5].original_data}]}),$scope.ExportChartDetailToExcel5=function(){g.downloadXLS()},h=new Highcharts.Chart({chart:{renderTo:"chart_container6"},title:{text:f.data[6].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[6].original_name+" condition datasheet"},colors:["#93FF93"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[6].original_name,data:f.data[6].original_data}]}),$scope.ExportChartDetailToExcel6=function(){h.downloadXLS()},i=new Highcharts.Chart({chart:{renderTo:"chart_container7"},title:{text:f.data[7].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[7].original_name+" condition datasheet"},colors:["#FF8040"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[7].original_name,data:f.data[7].original_data}]}),$scope.ExportChartDetailToExcel7=function(){i.downloadXLS()},j=new Highcharts.Chart({chart:{renderTo:"chart_container8"},title:{text:f.data[8].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[8].original_name+" condition datasheet"},colors:["#A8FF24"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[8].original_name,data:f.data[8].original_data}]}),$scope.ExportChartDetailToExcel8=function(){j.downloadXLS()
                },k=new Highcharts.Chart({chart:{renderTo:"chart_container9"},title:{text:f.data[9].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[9].original_name+" condition datasheet"},colors:["#AD5A5A"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[9].original_name,data:f.data[9].original_data}]}),$scope.ExportChartDetailToExcel9=function(){k.downloadXLS()},l=new Highcharts.Chart({chart:{renderTo:"chart_container10"},title:{text:f.data[10].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[10].original_name+" condition datasheet"},colors:["#8080C0"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[10].original_name,data:f.data[10].original_data}]}),$scope.ExportChartDetailToExcel10=function(){l.downloadXLS()},m=new Highcharts.Chart({chart:{renderTo:"chart_container11"},title:{text:f.data[11].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[11].original_name+" condition datasheet"},colors:["#A5A552"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[11].original_name,data:f.data[11].original_data}]}),$scope.ExportChartDetailToExcel11=function(){m.downloadXLS()},n=new Highcharts.Chart({chart:{renderTo:"chart_container12"},title:{text:f.data[12].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[12].original_name+" condition datasheet"},colors:["#424200"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[12].original_name,data:f.data[12].original_data}]}),$scope.ExportChartDetailToExcel12=function(){n.downloadXLS()},o=new Highcharts.Chart({chart:{renderTo:"chart_container13"},title:{text:f.data[13].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[13].original_name+" condition datasheet"},colors:["#642100"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[13].original_name,data:f.data[13].original_data}]}),$scope.ExportChartDetailToExcel13=function(){o.downloadXLS()}):toaster.pop({type:"error",title:"Error",body:"There is no data to display",timeout:POPTIMEOUT})}})})),void 0)})})}var time1,time2,dayDiff,newDate,i,sqls,y,noDataDateDates,x;for(toaster.pop({type:"success",title:"",body:"Please waiting ...",timeout:POPTIMEOUT}),$scope.default_endTime=new Date(new Date($scope.default_startTime).getTime()).Format("yyyy-MM-dd hh:mm:ss"),$scope.default_startTime=new Date(new Date($scope.default_startTime).getTime()-1e3*60*60*$scope.my.timeDiff).Format("yyyy-MM-dd hh:mm:ss"),UTC_startTime=$scope.format(new Date($scope.default_startTime).toUTCString(),"yyyy-MM-dd HH:mm:ss"),UTC_endTime=$scope.format(new Date($scope.default_endTime).toUTCString(),"yyyy-MM-dd HH:mm:ss"),time1=$scope.default_startTime.substring(0,10),time2=$scope.default_endTime.substring(0,10),dayDiff=DateDiff(time1,time2)+1,newDate=[],i=0;dayDiff>i;i++)newDate[i]=getNewDay(time1,i);for(sqls=[],y=0;y<newDate.length;y++)sqls[y]="SELECT * FROM sensorYearDataTable WHERE time BETWEEN '"+newDate[y]+" 00:00:00"+"' AND '"+newDate[y]+" 23:59:59"+"' AND device_guid = '"+$scope.device_guid+"'";noDataDateDates=[],x=0,selectFromTable(x);
            }
        };
        //下一单位
        $scope.next = function () {
            var UTC_startTime = '';var UTC_endTime = '';
            var entTime = new Date(new Date($scope.default_endTime).getTime() + ($scope.my.timeDiff - 24)*60*60*1000).Format('yyyy-MM-dd hh:mm:ss');
            if($scope.my.timeDiff == '1'){
                if($scope.default_endTime >= localEndTime){
                    toaster.pop({type: 'error', title: 'Error', body: 'There is mo more data !', timeout: POPTIMEOUT});
                }else {
                    $scope.default_startTime=new Date(new Date($scope.default_endTime).getTime()).Format("yyyy-MM-dd hh:mm:ss"),$scope.default_endTime=new Date(new Date($scope.default_endTime).getTime()+1e3*60*60*$scope.my.timeDiff).Format("yyyy-MM-dd hh:mm:ss"),UTC_startTime=$scope.format(new Date($scope.default_startTime).toUTCString(),"yyyy-MM-dd HH:mm:ss"),UTC_endTime=$scope.format(new Date($scope.default_endTime).toUTCString(),"yyyy-MM-dd HH:mm:ss");var data={gateway_id:gatewayId,region_guid:regionId,start_time:encodeURI(UTC_startTime),end_time:encodeURI(UTC_endTime),type:"history",size:""};$scope.delay=0,$scope.minDuration=0,$scope.message="",$scope.backdrop=!1,$scope.promise=null,$scope.templateUrl="./pages/custom-loading-template.html",$scope.getSensorDataProm=AuthService.myHttp(token,data,"GET","sensor").then(function(a){var b,c,d,e;if("0"==a.code&&a.content.time&&a.content.data){for(b=[],c=[],d=0;d<a.content.time.length;d++)c[d]=new Date(a.content.time[d]),b[d]=c[d].getTime(),b[d]-=1e3*60*(new Date).getTimezoneOffset(),b[d]=new Date(b[d]).Format("yyyy-MM-dd hh:mm:ss");e=a.content,new Highcharts.Chart({chart:{renderTo:"container",backgroundColor:"rgba(0,0,0,0)"},colors:["#000000","#CE0000","#FF79BC","#921AFF","#7D7DFF","#00CACA","#93FF93","#FF8040","#A8FF24","#AD5A5A","#8080C0","#A5A552","#424200","#642100"],title:{text:"Sensor History Data",x:-20},exporting:{enabled:!1,filename:"horticulture growing condition datasheet"},subtitle:{text:"Source Region: "+regionName,x:-20},marker:!1,noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",borderRadius:10,pointFormat:'<tr><td>{series.name}: </td><td style="text-align: right"><b>{point.y}</b></td></tr>',valueDecimals:3},legend:{align:"center",verticalAlign:"bottom"},series:e.data}),$scope.downLoad=function(){window.open("http://73.231.41.102:8080/sensor/history/export?user_id="+$cookieStore.get("user_id")+"&region_guid="+regionId+"&gateway_id="+gatewayId+"&start_time="+encodeURI(UTC_startTime)+"&end_time="+encodeURI(UTC_endTime))},$scope.toChartDetail=function(){var a,c,d,f,g,h,i,j,k,l,m,n,o,p;e.data||0!=e.data.length?($scope.chartDetailShow=!$scope.chartDetailShow,$scope.lastNextShow=!$scope.lastNextShow,$scope.chartShow=!$scope.chartShow,a=new Highcharts.Chart({chart:{renderTo:"chart_container"},title:{text:e.data[0].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[0].original_name+" condition datasheet"},colors:["#000000"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[0].original_name,data:e.data[0].original_data}]}),$scope.ExportChartDetailToExcel=function(){a.downloadXLS()},c=new Highcharts.Chart({chart:{renderTo:"chart_container1"},title:{text:e.data[1].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[1].original_name+" condition datasheet"},colors:["#CE0000"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[1].original_name,data:e.data[1].original_data}]}),$scope.ExportChartDetailToExcel1=function(){c.downloadXLS()},d=new Highcharts.Chart({chart:{renderTo:"chart_container2"},title:{text:e.data[2].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[2].original_name+" condition datasheet"},colors:["#FF79BC"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[2].original_name,data:e.data[2].original_data}]}),$scope.ExportChartDetailToExcel2=function(){d.downloadXLS()},f=new Highcharts.Chart({chart:{renderTo:"chart_container3"},title:{text:e.data[3].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[3].original_name+" condition datasheet"},colors:["#921AFF"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[3].original_name,data:e.data[3].original_data}]}),$scope.ExportChartDetailToExcel3=function(){f.downloadXLS()},g=new Highcharts.Chart({chart:{renderTo:"chart_container4"},title:{text:e.data[4].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[4].original_name+" condition datasheet"},colors:["#7D7DFF"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[4].original_name,data:e.data[4].original_data}]}),$scope.ExportChartDetailToExcel4=function(){g.downloadXLS()},h=new Highcharts.Chart({chart:{renderTo:"chart_container5"},title:{text:e.data[5].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[5].original_name+" condition datasheet"},colors:["#00CACA"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[5].original_name,data:e.data[5].original_data}]}),$scope.ExportChartDetailToExcel5=function(){h.downloadXLS()},i=new Highcharts.Chart({chart:{renderTo:"chart_container6"},title:{text:e.data[6].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[6].original_name+" condition datasheet"},colors:["#93FF93"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[6].original_name,data:e.data[6].original_data}]}),$scope.ExportChartDetailToExcel6=function(){i.downloadXLS()},j=new Highcharts.Chart({chart:{renderTo:"chart_container7"},title:{text:e.data[7].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[7].original_name+" condition datasheet"},colors:["#FF8040"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[7].original_name,data:e.data[7].original_data}]}),$scope.ExportChartDetailToExcel7=function(){j.downloadXLS()},k=new Highcharts.Chart({chart:{renderTo:"chart_container8"},title:{text:e.data[8].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[8].original_name+" condition datasheet"},colors:["#A8FF24"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[8].original_name,data:e.data[8].original_data}]}),$scope.ExportChartDetailToExcel8=function(){k.downloadXLS()},l=new Highcharts.Chart({chart:{renderTo:"chart_container9"},title:{text:e.data[9].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[9].original_name+" condition datasheet"},colors:["#AD5A5A"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[9].original_name,data:e.data[9].original_data}]}),$scope.ExportChartDetailToExcel9=function(){l.downloadXLS()},m=new Highcharts.Chart({chart:{renderTo:"chart_container10"},title:{text:e.data[10].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[10].original_name+" condition datasheet"},colors:["#8080C0"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[10].original_name,data:e.data[10].original_data}]}),$scope.ExportChartDetailToExcel10=function(){m.downloadXLS()},n=new Highcharts.Chart({chart:{renderTo:"chart_container11"},title:{text:e.data[11].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[11].original_name+" condition datasheet"},colors:["#A5A552"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[11].original_name,data:e.data[11].original_data}]}),$scope.ExportChartDetailToExcel11=function(){n.downloadXLS()},o=new Highcharts.Chart({chart:{renderTo:"chart_container12"},title:{text:e.data[12].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[12].original_name+" condition datasheet"},colors:["#424200"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[12].original_name,data:e.data[12].original_data}]}),$scope.ExportChartDetailToExcel12=function(){o.downloadXLS()},p=new Highcharts.Chart({chart:{renderTo:"chart_container13"},title:{text:e.data[13].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[13].original_name+" condition datasheet"},colors:["#642100"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[13].original_name,data:e.data[13].original_data}]}),$scope.ExportChartDetailToExcel13=function(){p.downloadXLS()}):toaster.pop({type:"error",title:"Error",body:"There is no data to display",timeout:POPTIMEOUT})}}else toaster.pop({type:"error",title:"Error",body:a.message,timeout:POPTIMEOUT}),$scope.dataContent="noData"});
                }
            }else if($scope.my.timeDiff == '24'){
                if(entTime >= localEndTime){
                    toaster.pop({type: 'error', title: 'Error', body: 'There is mo more data !', timeout: POPTIMEOUT});
                }else {
                    $scope.default_startTime=new Date(new Date($scope.default_endTime).getTime()).Format("yyyy-MM-dd hh:mm:ss"),$scope.default_endTime=new Date(new Date($scope.default_endTime).getTime()+1e3*60*60*$scope.my.timeDiff).Format("yyyy-MM-dd hh:mm:ss"),UTC_startTime=$scope.format(new Date($scope.default_startTime).toUTCString(),"yyyy-MM-dd HH:mm:ss"),UTC_endTime=$scope.format(new Date($scope.default_endTime).toUTCString(),"yyyy-MM-dd HH:mm:ss");var data={gateway_id:gatewayId,region_guid:regionId,start_time:encodeURI(UTC_startTime),end_time:encodeURI(UTC_endTime),type:"history",size:""};$scope.delay=0,$scope.minDuration=0,$scope.message="",$scope.backdrop=!1,$scope.promise=null,$scope.templateUrl="./pages/custom-loading-template.html",$scope.getSensorDataProm=AuthService.myHttp(token,data,"GET","sensor").then(function(a){var b,c,d,e;if("0"==a.code&&a.content.time&&a.content.data){for(b=[],c=[],d=0;d<a.content.time.length;d++)c[d]=new Date(a.content.time[d]),b[d]=c[d].getTime(),b[d]-=1e3*60*(new Date).getTimezoneOffset(),b[d]=new Date(b[d]).Format("yyyy-MM-dd hh:mm:ss");e=a.content,new Highcharts.Chart({chart:{renderTo:"container",backgroundColor:"rgba(0,0,0,0)"},colors:["#000000","#CE0000","#FF79BC","#921AFF","#7D7DFF","#00CACA","#93FF93","#FF8040","#A8FF24","#AD5A5A","#8080C0","#A5A552","#424200","#642100"],title:{text:"Sensor History Data",x:-20},exporting:{enabled:!1,filename:"horticulture growing condition datasheet"},subtitle:{text:"Source Region: "+regionName,x:-20},marker:!1,noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",borderRadius:10,pointFormat:'<tr><td>{series.name}: </td><td style="text-align: right"><b>{point.y}</b></td></tr>',valueDecimals:3},legend:{align:"center",verticalAlign:"bottom"},series:e.data}),$scope.downLoad=function(){window.open("http://73.231.41.102:8080/sensor/history/export?user_id="+$cookieStore.get("user_id")+"&region_guid="+regionId+"&gateway_id="+gatewayId+"&start_time="+encodeURI(UTC_startTime)+"&end_time="+encodeURI(UTC_endTime))},$scope.toChartDetail=function(){var a,c,d,f,g,h,i,j,k,l,m,n,o,p;e.data||0!=e.data.length?($scope.chartDetailShow=!$scope.chartDetailShow,$scope.lastNextShow=!$scope.lastNextShow,$scope.chartShow=!$scope.chartShow,a=new Highcharts.Chart({chart:{renderTo:"chart_container"},title:{text:e.data[0].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[0].original_name+" condition datasheet"},colors:["#000000"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[0].original_name,data:e.data[0].original_data}]}),$scope.ExportChartDetailToExcel=function(){a.downloadXLS()},c=new Highcharts.Chart({chart:{renderTo:"chart_container1"},title:{text:e.data[1].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[1].original_name+" condition datasheet"},colors:["#CE0000"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[1].original_name,data:e.data[1].original_data}]}),$scope.ExportChartDetailToExcel1=function(){c.downloadXLS()},d=new Highcharts.Chart({chart:{renderTo:"chart_container2"},title:{text:e.data[2].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[2].original_name+" condition datasheet"},colors:["#FF79BC"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[2].original_name,data:e.data[2].original_data}]}),$scope.ExportChartDetailToExcel2=function(){d.downloadXLS()},f=new Highcharts.Chart({chart:{renderTo:"chart_container3"},title:{text:e.data[3].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[3].original_name+" condition datasheet"},colors:["#921AFF"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[3].original_name,data:e.data[3].original_data}]}),$scope.ExportChartDetailToExcel3=function(){f.downloadXLS()},g=new Highcharts.Chart({chart:{renderTo:"chart_container4"},title:{text:e.data[4].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[4].original_name+" condition datasheet"},colors:["#7D7DFF"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[4].original_name,data:e.data[4].original_data}]}),$scope.ExportChartDetailToExcel4=function(){g.downloadXLS()},h=new Highcharts.Chart({chart:{renderTo:"chart_container5"},title:{text:e.data[5].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[5].original_name+" condition datasheet"},colors:["#00CACA"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[5].original_name,data:e.data[5].original_data}]}),$scope.ExportChartDetailToExcel5=function(){h.downloadXLS()},i=new Highcharts.Chart({chart:{renderTo:"chart_container6"},title:{text:e.data[6].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[6].original_name+" condition datasheet"},colors:["#93FF93"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[6].original_name,data:e.data[6].original_data}]}),$scope.ExportChartDetailToExcel6=function(){i.downloadXLS()},j=new Highcharts.Chart({chart:{renderTo:"chart_container7"},title:{text:e.data[7].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[7].original_name+" condition datasheet"},colors:["#FF8040"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[7].original_name,data:e.data[7].original_data}]}),$scope.ExportChartDetailToExcel7=function(){j.downloadXLS()},k=new Highcharts.Chart({chart:{renderTo:"chart_container8"},title:{text:e.data[8].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[8].original_name+" condition datasheet"},colors:["#A8FF24"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[8].original_name,data:e.data[8].original_data}]}),$scope.ExportChartDetailToExcel8=function(){k.downloadXLS()},l=new Highcharts.Chart({chart:{renderTo:"chart_container9"},title:{text:e.data[9].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[9].original_name+" condition datasheet"},colors:["#AD5A5A"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[9].original_name,data:e.data[9].original_data}]}),$scope.ExportChartDetailToExcel9=function(){l.downloadXLS()},m=new Highcharts.Chart({chart:{renderTo:"chart_container10"},title:{text:e.data[10].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[10].original_name+" condition datasheet"},colors:["#8080C0"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[10].original_name,data:e.data[10].original_data}]}),$scope.ExportChartDetailToExcel10=function(){m.downloadXLS()},n=new Highcharts.Chart({chart:{renderTo:"chart_container11"},title:{text:e.data[11].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[11].original_name+" condition datasheet"},colors:["#A5A552"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[11].original_name,data:e.data[11].original_data}]}),$scope.ExportChartDetailToExcel11=function(){n.downloadXLS()},o=new Highcharts.Chart({chart:{renderTo:"chart_container12"},title:{text:e.data[12].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[12].original_name+" condition datasheet"},colors:["#424200"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[12].original_name,data:e.data[12].original_data}]}),$scope.ExportChartDetailToExcel12=function(){o.downloadXLS()},p=new Highcharts.Chart({chart:{renderTo:"chart_container13"},title:{text:e.data[13].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:e.data[13].original_name+" condition datasheet"},colors:["#642100"],noData:{position:{},attr:{},style:{}},xAxis:{categories:b,tickInterval:b.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:e.data[13].original_name,data:e.data[13].original_data}]}),$scope.ExportChartDetailToExcel13=function(){p.downloadXLS()}):toaster.pop({type:"error",title:"Error",body:"There is no data to display",timeout:POPTIMEOUT})}}else toaster.pop({type:"error",title:"Error",body:a.message,timeout:POPTIMEOUT}),$scope.dataContent="noData"});
                }
            }else if($scope.my.timeDiff == '168' || $scope.my.timeDiff == '720'){
                if(entTime >= localEndTime){
                    toaster.pop({type: 'error', title: 'Error', body: 'There is mo more data !', timeout: POPTIMEOUT});
                }else {
                    function selectFromTable(a){dataBase.transaction(function(b){b.executeSql(sqls[a],[],function(b,c){function e(a){var b={table_device_guid:$scope.device_guid,device_name:"",gateway_id:gatewayId,start_time:$scope.format(new Date(noDataDateDates[a]+" 00:00:00").toUTCString(),"yyyy-MM-dd HH:mm:ss"),end_time:$scope.format(new Date(noDataDateDates[a]+" 23:59:59").toUTCString(),"yyyy-MM-dd HH:mm:ss")};$scope.getSensorDataProm=AuthService.myHttp(token,b,"GET","sensor/sensorOneDay").then(function(b){var c,d,f,g,h,i,j,k,l,m,n;if("0"==b.code){for($scope.message=Math.round(100*((a+1)/$scope.vm.total)),c=[],d=[],f=[],g=[],h=[],i=[],j=[],k=[],l=0;l<b.content.time.length;l++)d[l]=new Date(b.content.time[l]),c[l]=d[l].getTime(),c[l]-=1e3*60*(new Date).getTimezoneOffset(),c[l]=new Date(c[l]).Format("yyyy-MM-dd hh:mm:ss");for(m=0;m<b.content.quarterObject.time.length;m++)f[m]=new Date(b.content.quarterObject.time[m]),i[m]=f[m].getTime(),i[m]-=1e3*60*(new Date).getTimezoneOffset(),i[m]=new Date(i[m]).Format("yyyy-MM-dd hh:mm:ss");for(m=0;m<b.content.halfYearObject.time.length;m++)g[m]=new Date(b.content.halfYearObject.time[m]),j[m]=g[m].getTime(),j[m]-=1e3*60*(new Date).getTimezoneOffset(),j[m]=new Date(j[m]).Format("yyyy-MM-dd hh:mm:ss");for(m=0;m<b.content.yearObject.time.length;m++)h[m]=new Date(b.content.yearObject.time[m]),k[m]=h[m].getTime(),k[m]-=1e3*60*(new Date).getTimezoneOffset(),k[m]=new Date(k[m]).Format("yyyy-MM-dd hh:mm:ss");if(dataBase.transaction(function(a){var d,e,f,g,h,l,m,n;for(d=0;d<b.content.time.length;d++)e="INSERT INTO sensorDataTable(device_guid,time,Carbon_Dioxide_original,Carbon_Dioxide,Substrate_PH_original,Substrate_PH,Substrate_Conductivity_original,Substrate_Conductivity,Substrate_Temperature_original,Substrate_Temperature,Air_Temperature_original,Air_Temperature,Ppfd_original,Ppfd,Liquid_PH_original,Liquid_PH,Substrate_Humidity_original,Substrate_Humidity,Liquid_DOC_original,Liquid_DOC,Liquid_Conductivity_original,Liquid_Conductivity,Air_Humidity_original,Air_Humidity,Substrate_DOC_original,Substrate_DOC,Illuminance_original,Illuminance,Lai_original,Lai) values ('"+$scope.device_guid+"','"+c[d]+"','"+b.content.data[0].original_data[d]+"','"+b.content.data[0].data[d]+"'"+",'"+b.content.data[1].original_data[d]+"','"+b.content.data[1].data[d]+"','"+b.content.data[2].original_data[d]+"','"+b.content.data[2].data[d]+"','"+b.content.data[3].original_data[d]+"','"+b.content.data[3].data[d]+"'"+",'"+b.content.data[4].original_data[d]+"','"+b.content.data[4].data[d]+"','"+b.content.data[5].original_data[d]+"','"+b.content.data[5].data[d]+"','"+b.content.data[6].original_data[d]+"','"+b.content.data[6].data[d]+"'"+",'"+b.content.data[7].original_data[d]+"','"+b.content.data[7].data[d]+"','"+b.content.data[8].original_data[d]+"','"+b.content.data[8].data[d]+"','"+b.content.data[9].original_data[d]+"','"+b.content.data[9].data[d]+"'"+",'"+b.content.data[10].original_data[d]+"','"+b.content.data[10].data[d]+"','"+b.content.data[11].original_data[d]+"','"+b.content.data[11].data[d]+"','"+b.content.data[12].original_data[d]+"','"+b.content.data[12].data[d]+"'"+",'"+b.content.data[13].original_data[d]+"','"+b.content.data[13].data[d]+"')",a.executeSql(e);for(f=0;f<b.content.quarterObject.time.length;f++)g="INSERT INTO sensorQuarterDataTable(device_guid,time,Carbon_Dioxide_original,Carbon_Dioxide,Substrate_PH_original,Substrate_PH,Substrate_Conductivity_original,Substrate_Conductivity,Substrate_Temperature_original,Substrate_Temperature,Air_Temperature_original,Air_Temperature,Ppfd_original,Ppfd,Liquid_PH_original,Liquid_PH,Substrate_Humidity_original,Substrate_Humidity,Liquid_DOC_original,Liquid_DOC,Liquid_Conductivity_original,Liquid_Conductivity,Air_Humidity_original,Air_Humidity,Substrate_DOC_original,Substrate_DOC,Illuminance_original,Illuminance,Lai_original,Lai) values ('"+$scope.device_guid+"','"+i[f]+"','"+b.content.quarterObject.data[0].original_data[f]+"','"+b.content.quarterObject.data[0].data[f]+"'"+",'"+b.content.quarterObject.data[1].original_data[f]+"','"+b.content.quarterObject.data[1].data[f]+"','"+b.content.quarterObject.data[2].original_data[f]+"','"+b.content.quarterObject.data[2].data[f]+"','"+b.content.quarterObject.data[3].original_data[f]+"','"+b.content.quarterObject.data[3].data[f]+"'"+",'"+b.content.quarterObject.data[4].original_data[f]+"','"+b.content.quarterObject.data[4].data[f]+"','"+b.content.quarterObject.data[5].original_data[f]+"','"+b.content.quarterObject.data[5].data[f]+"','"+b.content.quarterObject.data[6].original_data[f]+"','"+b.content.quarterObject.data[6].data[f]+"'"+",'"+b.content.quarterObject.data[7].original_data[f]+"','"+b.content.quarterObject.data[7].data[f]+"','"+b.content.quarterObject.data[8].original_data[f]+"','"+b.content.quarterObject.data[8].data[f]+"','"+b.content.quarterObject.data[9].original_data[f]+"','"+b.content.quarterObject.data[9].data[f]+"'"+",'"+b.content.quarterObject.data[10].original_data[f]+"','"+b.content.quarterObject.data[10].data[f]+"','"+b.content.quarterObject.data[11].original_data[f]+"','"+b.content.quarterObject.data[11].data[f]+"','"+b.content.quarterObject.data[12].original_data[f]+"','"+b.content.quarterObject.data[12].data[f]+"'"+",'"+b.content.quarterObject.data[13].original_data[f]+"','"+b.content.quarterObject.data[13].data[f]+"')",a.executeSql(g);for(h=0;h<b.content.quarterObject.time.length;h++)l="INSERT INTO sensorHalfYearDataTable(device_guid,time,Carbon_Dioxide_original,Carbon_Dioxide,Substrate_PH_original,Substrate_PH,Substrate_Conductivity_original,Substrate_Conductivity,Substrate_Temperature_original,Substrate_Temperature,Air_Temperature_original,Air_Temperature,Ppfd_original,Ppfd,Liquid_PH_original,Liquid_PH,Substrate_Humidity_original,Substrate_Humidity,Liquid_DOC_original,Liquid_DOC,Liquid_Conductivity_original,Liquid_Conductivity,Air_Humidity_original,Air_Humidity,Substrate_DOC_original,Substrate_DOC,Illuminance_original,Illuminance,Lai_original,Lai) values ('"+$scope.device_guid+"','"+j[h]+"','"+b.content.halfYearObject.data[0].original_data[h]+"','"+b.content.halfYearObject.data[0].data[h]+"'"+",'"+b.content.halfYearObject.data[1].original_data[h]+"','"+b.content.halfYearObject.data[1].data[h]+"','"+b.content.halfYearObject.data[2].original_data[h]+"','"+b.content.halfYearObject.data[2].data[h]+"','"+b.content.halfYearObject.data[3].original_data[h]+"','"+b.content.halfYearObject.data[3].data[h]+"'"+",'"+b.content.halfYearObject.data[4].original_data[h]+"','"+b.content.halfYearObject.data[4].data[h]+"','"+b.content.halfYearObject.data[5].original_data[h]+"','"+b.content.halfYearObject.data[5].data[h]+"','"+b.content.halfYearObject.data[6].original_data[h]+"','"+b.content.halfYearObject.data[6].data[h]+"'"+",'"+b.content.halfYearObject.data[7].original_data[h]+"','"+b.content.halfYearObject.data[7].data[h]+"','"+b.content.halfYearObject.data[8].original_data[h]+"','"+b.content.halfYearObject.data[8].data[h]+"','"+b.content.halfYearObject.data[9].original_data[h]+"','"+b.content.halfYearObject.data[9].data[h]+"'"+",'"+b.content.halfYearObject.data[10].original_data[h]+"','"+b.content.halfYearObject.data[10].data[h]+"','"+b.content.halfYearObject.data[11].original_data[h]+"','"+b.content.halfYearObject.data[11].data[h]+"','"+b.content.halfYearObject.data[12].original_data[h]+"','"+b.content.halfYearObject.data[12].data[h]+"'"+",'"+b.content.halfYearObject.data[13].original_data[h]+"','"+b.content.halfYearObject.data[13].data[h]+"')",a.executeSql(l);for(m=0;m<b.content.yearObject.time.length;m++)n="INSERT INTO sensorYearDataTable(device_guid,time,Carbon_Dioxide_original,Carbon_Dioxide,Substrate_PH_original,Substrate_PH,Substrate_Conductivity_original,Substrate_Conductivity,Substrate_Temperature_original,Substrate_Temperature,Air_Temperature_original,Air_Temperature,Ppfd_original,Ppfd,Liquid_PH_original,Liquid_PH,Substrate_Humidity_original,Substrate_Humidity,Liquid_DOC_original,Liquid_DOC,Liquid_Conductivity_original,Liquid_Conductivity,Air_Humidity_original,Air_Humidity,Substrate_DOC_original,Substrate_DOC,Illuminance_original,Illuminance,Lai_original,Lai) values ('"+$scope.device_guid+"','"+k[m]+"','"+b.content.yearObject.data[0].original_data[m]+"','"+b.content.yearObject.data[0].data[m]+"'"+",'"+b.content.yearObject.data[1].original_data[m]+"','"+b.content.yearObject.data[1].data[m]+"','"+b.content.yearObject.data[2].original_data[m]+"','"+b.content.yearObject.data[2].data[m]+"','"+b.content.yearObject.data[3].original_data[m]+"','"+b.content.yearObject.data[3].data[m]+"'"+",'"+b.content.yearObject.data[4].original_data[m]+"','"+b.content.yearObject.data[4].data[m]+"','"+b.content.yearObject.data[5].original_data[m]+"','"+b.content.yearObject.data[5].data[m]+"','"+b.content.yearObject.data[6].original_data[m]+"','"+b.content.yearObject.data[6].data[m]+"'"+",'"+b.content.yearObject.data[7].original_data[m]+"','"+b.content.yearObject.data[7].data[m]+"','"+b.content.yearObject.data[8].original_data[m]+"','"+b.content.yearObject.data[8].data[m]+"','"+b.content.yearObject.data[9].original_data[m]+"','"+b.content.yearObject.data[9].data[m]+"'"+",'"+b.content.yearObject.data[10].original_data[m]+"','"+b.content.yearObject.data[10].data[m]+"','"+b.content.yearObject.data[11].original_data[m]+"','"+b.content.yearObject.data[11].data[m]+"','"+b.content.yearObject.data[12].original_data[m]+"','"+b.content.yearObject.data[12].data[m]+"'"+",'"+b.content.yearObject.data[13].original_data[m]+"','"+b.content.yearObject.data[13].data[m]+"')",a.executeSql(n)}),a+1!=noDataDateDates.length)return $timeout(function(){e(a+1)},1500);a+1==noDataDateDates.length&&(toaster.pop({type:"success",title:"Success",body:"Download successfully , please waiting...",timeout:POPTIMEOUT}),n={},dataBase.transaction(function(a){var b="SELECT * FROM sensorDataTable WHERE time BETWEEN'"+$scope.default_startTime+"' AND '"+$scope.default_endTime+"' AND device_guid = '"+$scope.device_guid+"' ORDER BY time";a.executeSql(b,[],function(a,b){var V,c=[],d=[],e={original_name:"Carbon_Dioxide(ppm)",name:"Carbon_Dioxide(ppm)"},f=[],g=[],h={original_name:"Substrate_PH(PH)",name:"Substrate_PH(PH)"},i=[],j=[],k={original_name:"Substrate_Conductivity(mS/cm)",name:"Substrate_Conductivity(mS/cm)"},l=[],m=[],o={original_name:"Substrate_Temperature(°C)",name:"Substrate_Temperature(°C)"},p=[],q=[],r={original_name:"Air_Temperature(°C)",name:"Air_Temperature(°C)"},s=[],t=[],u={original_name:"Ppfd(μmol㎡/s)",name:"Ppfd(100*μmol㎡/s)"},v=[],w=[],x={original_name:"Liquid_PH(PH)",name:"Liquid_PH(PH)"},y=[],z=[],A={original_name:"Substrate_Humidity(%)",name:"Substrate_Humidity(%)"},B=[],C=[],D={original_name:"Liquid_DOC(mg/l)",name:"Liquid_DOC(mg/l)"},E=[],F=[],G={original_name:"Liquid_Conductivity(mS/cm)",name:"Liquid_Conductivity(mS/cm)"},H=[],I=[],J={original_name:"Air_Humidity(%)",name:"Air_Humidity(%)"},K=[],L=[],M={original_name:"Substrate_DOC(mg/l)",name:"Substrate_DOC(mg/l)"},N=[],O=[],P={original_name:"Illuminance(lux)",name:"Illuminance(100*lux)"},Q=[],R=[],S={original_name:"Lai()",name:"Lai()"},T=[],U=[];if(b)for(V=0;V<b.rows.length;V++)c.push(b.rows[V].time),f.push(parseFloat(b.rows[V].Carbon_Dioxide_original)),g.push(parseFloat(b.rows[V].Carbon_Dioxide)),i.push(parseFloat(b.rows[V].Substrate_PH_original)),j.push(parseFloat(b.rows[V].Substrate_PH)),l.push(parseFloat(b.rows[V].Substrate_Conductivity_original)),m.push(parseFloat(b.rows[V].Substrate_Conductivity)),p.push(parseFloat(b.rows[V].Substrate_Temperature_original)),q.push(parseFloat(b.rows[V].Substrate_Temperature)),s.push(parseFloat(b.rows[V].Air_Temperature_original)),t.push(parseFloat(b.rows[V].Air_Temperature)),v.push(parseFloat(b.rows[V].Ppfd_original)),w.push(parseFloat(b.rows[V].Ppfd)),y.push(parseFloat(b.rows[V].Liquid_PH_original)),z.push(parseFloat(b.rows[V].Liquid_PH)),B.push(parseFloat(b.rows[V].Substrate_Humidity_original)),C.push(parseFloat(b.rows[V].Substrate_Humidity)),E.push(parseFloat(b.rows[V].Liquid_DOC_original)),F.push(parseFloat(b.rows[V].Liquid_DOC)),H.push(parseFloat(b.rows[V].Liquid_Conductivity_original)),I.push(parseFloat(b.rows[V].Liquid_Conductivity)),K.push(parseFloat(b.rows[V].Air_Humidity_original)),L.push(parseFloat(b.rows[V].Air_Humidity)),N.push(parseFloat(b.rows[V].Substrate_DOC_original)),O.push(parseFloat(b.rows[V].Substrate_DOC)),Q.push(parseFloat(b.rows[V].Illuminance_original)),R.push(parseFloat(b.rows[V].Illuminance)),T.push(parseFloat(b.rows[V].Lai_original)),U.push(parseFloat(b.rows[V].Lai));e.original_data=f,e.data=g,h.original_data=i,h.data=j,k.original_data=l,k.data=m,o.original_data=p,o.data=q,r.original_data=s,r.data=t,u.original_data=v,u.data=w,x.original_data=y,x.data=z,A.original_data=B,A.data=C,D.original_data=E,D.data=F,G.original_data=H,G.data=I,J.original_data=K,J.data=L,M.original_data=N,M.data=O,P.original_data=Q,P.data=R,S.original_data=T,S.data=U,d.push(r),d.push(J),d.push(o),d.push(A),d.push(h),d.push(e),d.push(P),d.push(k),d.push(u),d.push(x),d.push(S),d.push(G),d.push(D),d.push(M),n.data=d,n.time=c,new Highcharts.Chart({chart:{renderTo:"container",backgroundColor:"rgba(0,0,0,0)"},colors:["#000000","#CE0000","#FF79BC","#921AFF","#7D7DFF","#00CACA","#93FF93","#FF8040","#A8FF24","#AD5A5A","#8080C0","#A5A552","#424200","#642100"],title:{text:"Sensor History Data",x:-20},exporting:{enabled:!1,filename:"horticulture growing condition datasheet"},subtitle:{text:"Source Region: "+regionName,x:-20},marker:!1,noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",borderRadius:10,pointFormat:'<tr><td>{series.name}: </td><td style="text-align: right"><b>{point.y}</b></td></tr>',valueDecimals:3},legend:{align:"center",verticalAlign:"bottom"},series:n.data}),$scope.downLoad=function(){window.open("http://73.231.41.102:8080/sensor/history/export?user_id="+$cookieStore.get("user_id")+"&region_guid="+regionId+"&gateway_id="+gatewayId+"&start_time="+encodeURI(UTC_startTime)+"&end_time="+encodeURI(UTC_endTime))},$scope.toChartDetail=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,o;n.data||0!=n.data.length?($scope.chartDetailShow=!$scope.chartDetailShow,$scope.lastNextShow=!$scope.lastNextShow,$scope.chartShow=!$scope.chartShow,a=new Highcharts.Chart({chart:{renderTo:"chart_container"},title:{text:n.data[0].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[0].original_name+" condition datasheet"},colors:["#000000"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[0].original_name,data:n.data[0].original_data}]}),$scope.ExportChartDetailToExcel=function(){a.downloadXLS()},b=new Highcharts.Chart({chart:{renderTo:"chart_container1"},title:{text:n.data[1].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[1].original_name+" condition datasheet"},colors:["#CE0000"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[1].original_name,data:n.data[1].original_data}]}),$scope.ExportChartDetailToExcel1=function(){b.downloadXLS()},c=new Highcharts.Chart({chart:{renderTo:"chart_container2"},title:{text:n.data[2].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[2].original_name+" condition datasheet"},colors:["#FF79BC"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[2].original_name,data:n.data[2].original_data}]}),$scope.ExportChartDetailToExcel2=function(){c.downloadXLS()},d=new Highcharts.Chart({chart:{renderTo:"chart_container3"},title:{text:n.data[3].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[3].original_name+" condition datasheet"},colors:["#921AFF"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[3].original_name,data:n.data[3].original_data}]}),$scope.ExportChartDetailToExcel3=function(){d.downloadXLS()},e=new Highcharts.Chart({chart:{renderTo:"chart_container4"},title:{text:n.data[4].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[4].original_name+" condition datasheet"},colors:["#7D7DFF"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[4].original_name,data:n.data[4].original_data}]}),$scope.ExportChartDetailToExcel4=function(){e.downloadXLS()},f=new Highcharts.Chart({chart:{renderTo:"chart_container5"},title:{text:n.data[5].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[5].original_name+" condition datasheet"},colors:["#00CACA"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[5].original_name,data:n.data[5].original_data}]}),$scope.ExportChartDetailToExcel5=function(){f.downloadXLS()},g=new Highcharts.Chart({chart:{renderTo:"chart_container6"},title:{text:n.data[6].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[6].original_name+" condition datasheet"},colors:["#93FF93"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[6].original_name,data:n.data[6].original_data}]}),$scope.ExportChartDetailToExcel6=function(){g.downloadXLS()},h=new Highcharts.Chart({chart:{renderTo:"chart_container7"},title:{text:n.data[7].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[7].original_name+" condition datasheet"},colors:["#FF8040"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[7].original_name,data:n.data[7].original_data}]}),$scope.ExportChartDetailToExcel7=function(){h.downloadXLS()},i=new Highcharts.Chart({chart:{renderTo:"chart_container8"},title:{text:n.data[8].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[8].original_name+" condition datasheet"},colors:["#A8FF24"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[8].original_name,data:n.data[8].original_data}]}),$scope.ExportChartDetailToExcel8=function(){i.downloadXLS()},j=new Highcharts.Chart({chart:{renderTo:"chart_container9"},title:{text:n.data[9].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[9].original_name+" condition datasheet"},colors:["#AD5A5A"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[9].original_name,data:n.data[9].original_data}]}),$scope.ExportChartDetailToExcel9=function(){j.downloadXLS()},k=new Highcharts.Chart({chart:{renderTo:"chart_container10"},title:{text:n.data[10].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[10].original_name+" condition datasheet"},colors:["#8080C0"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[10].original_name,data:n.data[10].original_data}]}),$scope.ExportChartDetailToExcel10=function(){k.downloadXLS()},l=new Highcharts.Chart({chart:{renderTo:"chart_container11"},title:{text:n.data[11].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[11].original_name+" condition datasheet"},colors:["#A5A552"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[11].original_name,data:n.data[11].original_data}]}),$scope.ExportChartDetailToExcel11=function(){l.downloadXLS()},m=new Highcharts.Chart({chart:{renderTo:"chart_container12"},title:{text:n.data[12].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[12].original_name+" condition datasheet"},colors:["#424200"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[12].original_name,data:n.data[12].original_data}]}),$scope.ExportChartDetailToExcel12=function(){m.downloadXLS()},o=new Highcharts.Chart({chart:{renderTo:"chart_container13"},title:{text:n.data[13].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[13].original_name+" condition datasheet"},colors:["#642100"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[13].original_name,data:n.data[13].original_data}]}),$scope.ExportChartDetailToExcel13=function(){o.downloadXLS()}):toaster.pop({type:"error",title:"Error",body:"There is no data to display",timeout:POPTIMEOUT})}})}))}})}if(0==c.rows.length&&noDataDateDates.push(sqls[a].substring(54,64)),a+1!=newDate.length)return $timeout(function(){selectFromTable(a+1)},1);if(noDataDateDates&&noDataDateDates.length>0){$scope.delay=0,$scope.minDuration=0,$scope.message="0",$scope.backdrop=!1,$scope.promise=null,$scope.templateUrl="./pages/down-loading-template.html",$scope.vm={},$scope.vm.total=noDataDateDates.length;var d=0;e(d)}else noDataDateDates&&0!=noDataDateDates.length||(sensorHistoryData={},dataBase.transaction(function(a){var b="SELECT * FROM sensorDataTable WHERE time BETWEEN'"+$scope.default_startTime+"' AND '"+$scope.default_endTime+"' AND device_guid = '"+$scope.device_guid+"' ORDER BY time";a.executeSql(b,[],function(a,b){var U,c=[],d=[],e={original_name:"Carbon_Dioxide(ppm)",name:"Carbon_Dioxide(ppm)"},f=[],g=[],h={original_name:"Substrate_PH(PH)",name:"Substrate_PH(PH)"},i=[],j=[],k={original_name:"Substrate_Conductivity(mS/cm)",name:"Substrate_Conductivity(mS/cm)"},l=[],m=[],n={original_name:"Substrate_Temperature(°C)",name:"Substrate_Temperature(°C)"},o=[],p=[],q={original_name:"Air_Temperature(°C)",name:"Air_Temperature(°C)"},r=[],s=[],t={original_name:"Ppfd(μmol㎡/s)",name:"Ppfd(100*μmol㎡/s)"},u=[],v=[],w={original_name:"Liquid_PH(PH)",name:"Liquid_PH(PH)"},x=[],y=[],z={original_name:"Substrate_Humidity(%)",name:"Substrate_Humidity(%)"},A=[],B=[],C={original_name:"Liquid_DOC(mg/l)",name:"Liquid_DOC(mg/l)"},D=[],E=[],F={original_name:"Liquid_Conductivity(mS/cm)",name:"Liquid_Conductivity(mS/cm)"},G=[],H=[],I={original_name:"Air_Humidity(%)",name:"Air_Humidity(%)"},J=[],K=[],L={original_name:"Substrate_DOC(mg/l)",name:"Substrate_DOC(mg/l)"},M=[],N=[],O={original_name:"Illuminance(lux)",name:"Illuminance(100*lux)"},P=[],Q=[],R={original_name:"Lai()",name:"Lai()"},S=[],T=[];if(b)for(U=0;U<b.rows.length;U++)c.push(b.rows[U].time),f.push(parseFloat(b.rows[U].Carbon_Dioxide_original)),g.push(parseFloat(b.rows[U].Carbon_Dioxide)),i.push(parseFloat(b.rows[U].Substrate_PH_original)),j.push(parseFloat(b.rows[U].Substrate_PH)),l.push(parseFloat(b.rows[U].Substrate_Conductivity_original)),m.push(parseFloat(b.rows[U].Substrate_Conductivity)),o.push(parseFloat(b.rows[U].Substrate_Temperature_original)),p.push(parseFloat(b.rows[U].Substrate_Temperature)),r.push(parseFloat(b.rows[U].Air_Temperature_original)),s.push(parseFloat(b.rows[U].Air_Temperature)),u.push(parseFloat(b.rows[U].Ppfd_original)),v.push(parseFloat(b.rows[U].Ppfd)),x.push(parseFloat(b.rows[U].Liquid_PH_original)),y.push(parseFloat(b.rows[U].Liquid_PH)),A.push(parseFloat(b.rows[U].Substrate_Humidity_original)),B.push(parseFloat(b.rows[U].Substrate_Humidity)),D.push(parseFloat(b.rows[U].Liquid_DOC_original)),E.push(parseFloat(b.rows[U].Liquid_DOC)),G.push(parseFloat(b.rows[U].Liquid_Conductivity_original)),H.push(parseFloat(b.rows[U].Liquid_Conductivity)),J.push(parseFloat(b.rows[U].Air_Humidity_original)),K.push(parseFloat(b.rows[U].Air_Humidity)),M.push(parseFloat(b.rows[U].Substrate_DOC_original)),N.push(parseFloat(b.rows[U].Substrate_DOC)),P.push(parseFloat(b.rows[U].Illuminance_original)),Q.push(parseFloat(b.rows[U].Illuminance)),S.push(parseFloat(b.rows[U].Lai_original)),T.push(parseFloat(b.rows[U].Lai));e.original_data=f,e.data=g,h.original_data=i,h.data=j,k.original_data=l,k.data=m,n.original_data=o,n.data=p,q.original_data=r,q.data=s,t.original_data=u,t.data=v,w.original_data=x,w.data=y,z.original_data=A,z.data=B,C.original_data=D,C.data=E,F.original_data=G,F.data=H,I.original_data=J,I.data=K,L.original_data=M,L.data=N,O.original_data=P,O.data=Q,R.original_data=S,R.data=T,d.push(q),d.push(I),d.push(n),d.push(z),d.push(h),d.push(e),d.push(O),d.push(k),d.push(t),d.push(w),d.push(R),d.push(F),d.push(C),d.push(L),sensorHistoryData.data=d,sensorHistoryData.time=c,new Highcharts.Chart({chart:{renderTo:"container",backgroundColor:"rgba(0,0,0,0)"},colors:["#000000","#CE0000","#FF79BC","#921AFF","#7D7DFF","#00CACA","#93FF93","#FF8040","#A8FF24","#AD5A5A","#8080C0","#A5A552","#424200","#642100"],title:{text:"Sensor History Data",x:-20},exporting:{enabled:!1,filename:"horticulture growing condition datasheet"},subtitle:{text:"Source Region: "+regionName,x:-20},marker:!1,noData:{position:{},attr:{},style:{}},xAxis:{categories:sensorHistoryData.time,tickInterval:sensorHistoryData.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",borderRadius:10,pointFormat:'<tr><td>{series.name}: </td><td style="text-align: right"><b>{point.y}</b></td></tr>',valueDecimals:3},legend:{align:"center",verticalAlign:"bottom"},series:sensorHistoryData.data}),$scope.downLoad=function(){window.open("http://73.231.41.102:8080/sensor/history/export?user_id="+$cookieStore.get("user_id")+"&region_guid="+regionId+"&gateway_id="+gatewayId+"&start_time="+encodeURI(UTC_startTime)+"&end_time="+encodeURI(UTC_endTime))},$scope.toChartDetail=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n;sensorHistoryData.data||0!=sensorHistoryData.data.length?($scope.chartDetailShow=!$scope.chartDetailShow,$scope.lastNextShow=!$scope.lastNextShow,$scope.chartShow=!$scope.chartShow,a=new Highcharts.Chart({chart:{renderTo:"chart_container"},title:{text:sensorHistoryData.data[0].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:sensorHistoryData.data[0].original_name+" condition datasheet"},colors:["#000000"],noData:{position:{},attr:{},style:{}},xAxis:{categories:sensorHistoryData.time,tickInterval:sensorHistoryData.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:sensorHistoryData.data[0].original_name,data:sensorHistoryData.data[0].original_data}]}),$scope.ExportChartDetailToExcel=function(){a.downloadXLS()},b=new Highcharts.Chart({chart:{renderTo:"chart_container1"},title:{text:sensorHistoryData.data[1].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:sensorHistoryData.data[1].original_name+" condition datasheet"},colors:["#CE0000"],noData:{position:{},attr:{},style:{}},xAxis:{categories:sensorHistoryData.time,tickInterval:sensorHistoryData.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:sensorHistoryData.data[1].original_name,data:sensorHistoryData.data[1].original_data}]}),$scope.ExportChartDetailToExcel1=function(){b.downloadXLS()},c=new Highcharts.Chart({chart:{renderTo:"chart_container2"},title:{text:sensorHistoryData.data[2].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:sensorHistoryData.data[2].original_name+" condition datasheet"},colors:["#FF79BC"],noData:{position:{},attr:{},style:{}},xAxis:{categories:sensorHistoryData.time,tickInterval:sensorHistoryData.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:sensorHistoryData.data[2].original_name,data:sensorHistoryData.data[2].original_data}]}),$scope.ExportChartDetailToExcel2=function(){c.downloadXLS()},d=new Highcharts.Chart({chart:{renderTo:"chart_container3"},title:{text:sensorHistoryData.data[3].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:sensorHistoryData.data[3].original_name+" condition datasheet"},colors:["#921AFF"],noData:{position:{},attr:{},style:{}},xAxis:{categories:sensorHistoryData.time,tickInterval:sensorHistoryData.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:sensorHistoryData.data[3].original_name,data:sensorHistoryData.data[3].original_data}]}),$scope.ExportChartDetailToExcel3=function(){d.downloadXLS()},e=new Highcharts.Chart({chart:{renderTo:"chart_container4"},title:{text:sensorHistoryData.data[4].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:sensorHistoryData.data[4].original_name+" condition datasheet"},colors:["#7D7DFF"],noData:{position:{},attr:{},style:{}},xAxis:{categories:sensorHistoryData.time,tickInterval:sensorHistoryData.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:sensorHistoryData.data[4].original_name,data:sensorHistoryData.data[4].original_data}]}),$scope.ExportChartDetailToExcel4=function(){e.downloadXLS()},f=new Highcharts.Chart({chart:{renderTo:"chart_container5"},title:{text:sensorHistoryData.data[5].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:sensorHistoryData.data[5].original_name+" condition datasheet"},colors:["#00CACA"],noData:{position:{},attr:{},style:{}},xAxis:{categories:sensorHistoryData.time,tickInterval:sensorHistoryData.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:sensorHistoryData.data[5].original_name,data:sensorHistoryData.data[5].original_data}]}),$scope.ExportChartDetailToExcel5=function(){f.downloadXLS()},g=new Highcharts.Chart({chart:{renderTo:"chart_container6"},title:{text:sensorHistoryData.data[6].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:sensorHistoryData.data[6].original_name+" condition datasheet"},colors:["#93FF93"],noData:{position:{},attr:{},style:{}},xAxis:{categories:sensorHistoryData.time,tickInterval:sensorHistoryData.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:sensorHistoryData.data[6].original_name,data:sensorHistoryData.data[6].original_data}]}),$scope.ExportChartDetailToExcel6=function(){g.downloadXLS()},h=new Highcharts.Chart({chart:{renderTo:"chart_container7"},title:{text:sensorHistoryData.data[7].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:sensorHistoryData.data[7].original_name+" condition datasheet"},colors:["#FF8040"],noData:{position:{},attr:{},style:{}},xAxis:{categories:sensorHistoryData.time,tickInterval:sensorHistoryData.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:sensorHistoryData.data[7].original_name,data:sensorHistoryData.data[7].original_data}]}),$scope.ExportChartDetailToExcel7=function(){h.downloadXLS()
                    },i=new Highcharts.Chart({chart:{renderTo:"chart_container8"},title:{text:sensorHistoryData.data[8].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:sensorHistoryData.data[8].original_name+" condition datasheet"},colors:["#A8FF24"],noData:{position:{},attr:{},style:{}},xAxis:{categories:sensorHistoryData.time,tickInterval:sensorHistoryData.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:sensorHistoryData.data[8].original_name,data:sensorHistoryData.data[8].original_data}]}),$scope.ExportChartDetailToExcel8=function(){i.downloadXLS()},j=new Highcharts.Chart({chart:{renderTo:"chart_container9"},title:{text:sensorHistoryData.data[9].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:sensorHistoryData.data[9].original_name+" condition datasheet"},colors:["#AD5A5A"],noData:{position:{},attr:{},style:{}},xAxis:{categories:sensorHistoryData.time,tickInterval:sensorHistoryData.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:sensorHistoryData.data[9].original_name,data:sensorHistoryData.data[9].original_data}]}),$scope.ExportChartDetailToExcel9=function(){j.downloadXLS()},k=new Highcharts.Chart({chart:{renderTo:"chart_container10"},title:{text:sensorHistoryData.data[10].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:sensorHistoryData.data[10].original_name+" condition datasheet"},colors:["#8080C0"],noData:{position:{},attr:{},style:{}},xAxis:{categories:sensorHistoryData.time,tickInterval:sensorHistoryData.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:sensorHistoryData.data[10].original_name,data:sensorHistoryData.data[10].original_data}]}),$scope.ExportChartDetailToExcel10=function(){k.downloadXLS()},l=new Highcharts.Chart({chart:{renderTo:"chart_container11"},title:{text:sensorHistoryData.data[11].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:sensorHistoryData.data[11].original_name+" condition datasheet"},colors:["#A5A552"],noData:{position:{},attr:{},style:{}},xAxis:{categories:sensorHistoryData.time,tickInterval:sensorHistoryData.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:sensorHistoryData.data[11].original_name,data:sensorHistoryData.data[11].original_data}]}),$scope.ExportChartDetailToExcel11=function(){l.downloadXLS()},m=new Highcharts.Chart({chart:{renderTo:"chart_container12"},title:{text:sensorHistoryData.data[12].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:sensorHistoryData.data[12].original_name+" condition datasheet"},colors:["#424200"],noData:{position:{},attr:{},style:{}},xAxis:{categories:sensorHistoryData.time,tickInterval:sensorHistoryData.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:sensorHistoryData.data[12].original_name,data:sensorHistoryData.data[12].original_data}]}),$scope.ExportChartDetailToExcel12=function(){m.downloadXLS()},n=new Highcharts.Chart({chart:{renderTo:"chart_container13"},title:{text:sensorHistoryData.data[13].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:sensorHistoryData.data[13].original_name+" condition datasheet"},colors:["#642100"],noData:{position:{},attr:{},style:{}},xAxis:{categories:sensorHistoryData.time,tickInterval:sensorHistoryData.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:sensorHistoryData.data[13].original_name,data:sensorHistoryData.data[13].original_data}]}),$scope.ExportChartDetailToExcel13=function(){n.downloadXLS()}):toaster.pop({type:"error",title:"Error",body:"There is no data to display",timeout:POPTIMEOUT})}})}))})})}var time1,time2,dayDiff,newDate,i,sqls,y,noDataDateDates,x;for(toaster.pop({type:"success",title:"",body:"Please waiting ...",timeout:POPTIMEOUT}),$scope.default_startTime=new Date(new Date($scope.default_endTime).getTime()).Format("yyyy-MM-dd hh:mm:ss"),$scope.default_endTime=new Date(new Date($scope.default_endTime).getTime()+1e3*60*60*$scope.my.timeDiff).Format("yyyy-MM-dd hh:mm:ss"),UTC_startTime=$scope.format(new Date($scope.default_startTime).toUTCString(),"yyyy-MM-dd HH:mm:ss"),UTC_endTime=$scope.format(new Date($scope.default_endTime).toUTCString(),"yyyy-MM-dd HH:mm:ss"),time1=$scope.default_startTime.substring(0,10),time2=$scope.default_endTime.substring(0,10),dayDiff=DateDiff(time1,time2)+1,newDate=[],i=0;dayDiff>i;i++)newDate[i]=getNewDay(time1,i);for(sqls=[],y=0;y<newDate.length;y++)sqls[y]="SELECT * FROM sensorYearDataTable WHERE time BETWEEN '"+newDate[y]+" 00:00:00"+"' AND '"+newDate[y]+" 23:59:59"+"' AND device_guid = '"+$scope.device_guid+"'";noDataDateDates=[],x=0,selectFromTable(x);
                }
            }else if($scope.my.timeDiff == '2160'){
                if(entTime >= localEndTime){
                    toaster.pop({type: 'error', title: 'Error', body: 'There is mo more data !', timeout: POPTIMEOUT});
                }else {
                    function selectFromTable(a){dataBase.transaction(function(b){b.executeSql(sqls[a],[],function(b,c){function e(a){var b={table_device_guid:$scope.device_guid,device_name:"",gateway_id:gatewayId,start_time:$scope.format(new Date(noDataDateDates[a]+" 00:00:00").toUTCString(),"yyyy-MM-dd HH:mm:ss"),end_time:$scope.format(new Date(noDataDateDates[a]+" 23:59:59").toUTCString(),"yyyy-MM-dd HH:mm:ss")};$scope.getSensorDataProm=AuthService.myHttp(token,b,"GET","sensor/sensorOneDay").then(function(b){var c,d,f,g,h,i,j,k,l,m,n;if("0"==b.code){for($scope.message=Math.round(100*((a+1)/$scope.vm.total)),c=[],d=[],f=[],g=[],h=[],i=[],j=[],k=[],l=0;l<b.content.time.length;l++)d[l]=new Date(b.content.time[l]),c[l]=d[l].getTime(),c[l]-=1e3*60*(new Date).getTimezoneOffset(),c[l]=new Date(c[l]).Format("yyyy-MM-dd hh:mm:ss");for(m=0;m<b.content.quarterObject.time.length;m++)f[m]=new Date(b.content.quarterObject.time[m]),i[m]=f[m].getTime(),i[m]-=1e3*60*(new Date).getTimezoneOffset(),i[m]=new Date(i[m]).Format("yyyy-MM-dd hh:mm:ss");for(m=0;m<b.content.halfYearObject.time.length;m++)g[m]=new Date(b.content.halfYearObject.time[m]),j[m]=g[m].getTime(),j[m]-=1e3*60*(new Date).getTimezoneOffset(),j[m]=new Date(j[m]).Format("yyyy-MM-dd hh:mm:ss");for(m=0;m<b.content.yearObject.time.length;m++)h[m]=new Date(b.content.yearObject.time[m]),k[m]=h[m].getTime(),k[m]-=1e3*60*(new Date).getTimezoneOffset(),k[m]=new Date(k[m]).Format("yyyy-MM-dd hh:mm:ss");if(dataBase.transaction(function(a){var d,e,f,g,h,l,m,n;for(d=0;d<b.content.time.length;d++)e="INSERT INTO sensorDataTable(device_guid,time,Carbon_Dioxide_original,Carbon_Dioxide,Substrate_PH_original,Substrate_PH,Substrate_Conductivity_original,Substrate_Conductivity,Substrate_Temperature_original,Substrate_Temperature,Air_Temperature_original,Air_Temperature,Ppfd_original,Ppfd,Liquid_PH_original,Liquid_PH,Substrate_Humidity_original,Substrate_Humidity,Liquid_DOC_original,Liquid_DOC,Liquid_Conductivity_original,Liquid_Conductivity,Air_Humidity_original,Air_Humidity,Substrate_DOC_original,Substrate_DOC,Illuminance_original,Illuminance,Lai_original,Lai) values ('"+$scope.device_guid+"','"+c[d]+"','"+b.content.data[0].original_data[d]+"','"+b.content.data[0].data[d]+"'"+",'"+b.content.data[1].original_data[d]+"','"+b.content.data[1].data[d]+"','"+b.content.data[2].original_data[d]+"','"+b.content.data[2].data[d]+"','"+b.content.data[3].original_data[d]+"','"+b.content.data[3].data[d]+"'"+",'"+b.content.data[4].original_data[d]+"','"+b.content.data[4].data[d]+"','"+b.content.data[5].original_data[d]+"','"+b.content.data[5].data[d]+"','"+b.content.data[6].original_data[d]+"','"+b.content.data[6].data[d]+"'"+",'"+b.content.data[7].original_data[d]+"','"+b.content.data[7].data[d]+"','"+b.content.data[8].original_data[d]+"','"+b.content.data[8].data[d]+"','"+b.content.data[9].original_data[d]+"','"+b.content.data[9].data[d]+"'"+",'"+b.content.data[10].original_data[d]+"','"+b.content.data[10].data[d]+"','"+b.content.data[11].original_data[d]+"','"+b.content.data[11].data[d]+"','"+b.content.data[12].original_data[d]+"','"+b.content.data[12].data[d]+"'"+",'"+b.content.data[13].original_data[d]+"','"+b.content.data[13].data[d]+"')",a.executeSql(e);for(f=0;f<b.content.quarterObject.time.length;f++)g="INSERT INTO sensorQuarterDataTable(device_guid,time,Carbon_Dioxide_original,Carbon_Dioxide,Substrate_PH_original,Substrate_PH,Substrate_Conductivity_original,Substrate_Conductivity,Substrate_Temperature_original,Substrate_Temperature,Air_Temperature_original,Air_Temperature,Ppfd_original,Ppfd,Liquid_PH_original,Liquid_PH,Substrate_Humidity_original,Substrate_Humidity,Liquid_DOC_original,Liquid_DOC,Liquid_Conductivity_original,Liquid_Conductivity,Air_Humidity_original,Air_Humidity,Substrate_DOC_original,Substrate_DOC,Illuminance_original,Illuminance,Lai_original,Lai) values ('"+$scope.device_guid+"','"+i[f]+"','"+b.content.quarterObject.data[0].original_data[f]+"','"+b.content.quarterObject.data[0].data[f]+"'"+",'"+b.content.quarterObject.data[1].original_data[f]+"','"+b.content.quarterObject.data[1].data[f]+"','"+b.content.quarterObject.data[2].original_data[f]+"','"+b.content.quarterObject.data[2].data[f]+"','"+b.content.quarterObject.data[3].original_data[f]+"','"+b.content.quarterObject.data[3].data[f]+"'"+",'"+b.content.quarterObject.data[4].original_data[f]+"','"+b.content.quarterObject.data[4].data[f]+"','"+b.content.quarterObject.data[5].original_data[f]+"','"+b.content.quarterObject.data[5].data[f]+"','"+b.content.quarterObject.data[6].original_data[f]+"','"+b.content.quarterObject.data[6].data[f]+"'"+",'"+b.content.quarterObject.data[7].original_data[f]+"','"+b.content.quarterObject.data[7].data[f]+"','"+b.content.quarterObject.data[8].original_data[f]+"','"+b.content.quarterObject.data[8].data[f]+"','"+b.content.quarterObject.data[9].original_data[f]+"','"+b.content.quarterObject.data[9].data[f]+"'"+",'"+b.content.quarterObject.data[10].original_data[f]+"','"+b.content.quarterObject.data[10].data[f]+"','"+b.content.quarterObject.data[11].original_data[f]+"','"+b.content.quarterObject.data[11].data[f]+"','"+b.content.quarterObject.data[12].original_data[f]+"','"+b.content.quarterObject.data[12].data[f]+"'"+",'"+b.content.quarterObject.data[13].original_data[f]+"','"+b.content.quarterObject.data[13].data[f]+"')",a.executeSql(g);for(h=0;h<b.content.quarterObject.time.length;h++)l="INSERT INTO sensorHalfYearDataTable(device_guid,time,Carbon_Dioxide_original,Carbon_Dioxide,Substrate_PH_original,Substrate_PH,Substrate_Conductivity_original,Substrate_Conductivity,Substrate_Temperature_original,Substrate_Temperature,Air_Temperature_original,Air_Temperature,Ppfd_original,Ppfd,Liquid_PH_original,Liquid_PH,Substrate_Humidity_original,Substrate_Humidity,Liquid_DOC_original,Liquid_DOC,Liquid_Conductivity_original,Liquid_Conductivity,Air_Humidity_original,Air_Humidity,Substrate_DOC_original,Substrate_DOC,Illuminance_original,Illuminance,Lai_original,Lai) values ('"+$scope.device_guid+"','"+j[h]+"','"+b.content.halfYearObject.data[0].original_data[h]+"','"+b.content.halfYearObject.data[0].data[h]+"'"+",'"+b.content.halfYearObject.data[1].original_data[h]+"','"+b.content.halfYearObject.data[1].data[h]+"','"+b.content.halfYearObject.data[2].original_data[h]+"','"+b.content.halfYearObject.data[2].data[h]+"','"+b.content.halfYearObject.data[3].original_data[h]+"','"+b.content.halfYearObject.data[3].data[h]+"'"+",'"+b.content.halfYearObject.data[4].original_data[h]+"','"+b.content.halfYearObject.data[4].data[h]+"','"+b.content.halfYearObject.data[5].original_data[h]+"','"+b.content.halfYearObject.data[5].data[h]+"','"+b.content.halfYearObject.data[6].original_data[h]+"','"+b.content.halfYearObject.data[6].data[h]+"'"+",'"+b.content.halfYearObject.data[7].original_data[h]+"','"+b.content.halfYearObject.data[7].data[h]+"','"+b.content.halfYearObject.data[8].original_data[h]+"','"+b.content.halfYearObject.data[8].data[h]+"','"+b.content.halfYearObject.data[9].original_data[h]+"','"+b.content.halfYearObject.data[9].data[h]+"'"+",'"+b.content.halfYearObject.data[10].original_data[h]+"','"+b.content.halfYearObject.data[10].data[h]+"','"+b.content.halfYearObject.data[11].original_data[h]+"','"+b.content.halfYearObject.data[11].data[h]+"','"+b.content.halfYearObject.data[12].original_data[h]+"','"+b.content.halfYearObject.data[12].data[h]+"'"+",'"+b.content.halfYearObject.data[13].original_data[h]+"','"+b.content.halfYearObject.data[13].data[h]+"')",a.executeSql(l);for(m=0;m<b.content.yearObject.time.length;m++)n="INSERT INTO sensorYearDataTable(device_guid,time,Carbon_Dioxide_original,Carbon_Dioxide,Substrate_PH_original,Substrate_PH,Substrate_Conductivity_original,Substrate_Conductivity,Substrate_Temperature_original,Substrate_Temperature,Air_Temperature_original,Air_Temperature,Ppfd_original,Ppfd,Liquid_PH_original,Liquid_PH,Substrate_Humidity_original,Substrate_Humidity,Liquid_DOC_original,Liquid_DOC,Liquid_Conductivity_original,Liquid_Conductivity,Air_Humidity_original,Air_Humidity,Substrate_DOC_original,Substrate_DOC,Illuminance_original,Illuminance,Lai_original,Lai) values ('"+$scope.device_guid+"','"+k[m]+"','"+b.content.yearObject.data[0].original_data[m]+"','"+b.content.yearObject.data[0].data[m]+"'"+",'"+b.content.yearObject.data[1].original_data[m]+"','"+b.content.yearObject.data[1].data[m]+"','"+b.content.yearObject.data[2].original_data[m]+"','"+b.content.yearObject.data[2].data[m]+"','"+b.content.yearObject.data[3].original_data[m]+"','"+b.content.yearObject.data[3].data[m]+"'"+",'"+b.content.yearObject.data[4].original_data[m]+"','"+b.content.yearObject.data[4].data[m]+"','"+b.content.yearObject.data[5].original_data[m]+"','"+b.content.yearObject.data[5].data[m]+"','"+b.content.yearObject.data[6].original_data[m]+"','"+b.content.yearObject.data[6].data[m]+"'"+",'"+b.content.yearObject.data[7].original_data[m]+"','"+b.content.yearObject.data[7].data[m]+"','"+b.content.yearObject.data[8].original_data[m]+"','"+b.content.yearObject.data[8].data[m]+"','"+b.content.yearObject.data[9].original_data[m]+"','"+b.content.yearObject.data[9].data[m]+"'"+",'"+b.content.yearObject.data[10].original_data[m]+"','"+b.content.yearObject.data[10].data[m]+"','"+b.content.yearObject.data[11].original_data[m]+"','"+b.content.yearObject.data[11].data[m]+"','"+b.content.yearObject.data[12].original_data[m]+"','"+b.content.yearObject.data[12].data[m]+"'"+",'"+b.content.yearObject.data[13].original_data[m]+"','"+b.content.yearObject.data[13].data[m]+"')",a.executeSql(n)}),a+1!=noDataDateDates.length)return $timeout(function(){e(a+1)},1500);a+1==noDataDateDates.length&&(toaster.pop({type:"success",title:"Success",body:"Download successfully , please waiting...",timeout:POPTIMEOUT}),n={},dataBase.transaction(function(a){var b="SELECT * FROM sensorQuarterDataTable WHERE time BETWEEN'"+$scope.default_startTime+"' AND '"+$scope.default_endTime+"' AND device_guid = '"+$scope.device_guid+"' ORDER BY time";a.executeSql(b,[],function(a,b){var V,c=[],d=[],e={original_name:"Carbon_Dioxide(ppm)",name:"Carbon_Dioxide(ppm)"},f=[],g=[],h={original_name:"Substrate_PH(PH)",name:"Substrate_PH(PH)"},i=[],j=[],k={original_name:"Substrate_Conductivity(mS/cm)",name:"Substrate_Conductivity(mS/cm)"},l=[],m=[],o={original_name:"Substrate_Temperature(°C)",name:"Substrate_Temperature(°C)"},p=[],q=[],r={original_name:"Air_Temperature(°C)",name:"Air_Temperature(°C)"},s=[],t=[],u={original_name:"Ppfd(μmol㎡/s)",name:"Ppfd(100*μmol㎡/s)"},v=[],w=[],x={original_name:"Liquid_PH(PH)",name:"Liquid_PH(PH)"},y=[],z=[],A={original_name:"Substrate_Humidity(%)",name:"Substrate_Humidity(%)"},B=[],C=[],D={original_name:"Liquid_DOC(mg/l)",name:"Liquid_DOC(mg/l)"},E=[],F=[],G={original_name:"Liquid_Conductivity(mS/cm)",name:"Liquid_Conductivity(mS/cm)"},H=[],I=[],J={original_name:"Air_Humidity(%)",name:"Air_Humidity(%)"},K=[],L=[],M={original_name:"Substrate_DOC(mg/l)",name:"Substrate_DOC(mg/l)"},N=[],O=[],P={original_name:"Illuminance(lux)",name:"Illuminance(100*lux)"},Q=[],R=[],S={original_name:"Lai()",name:"Lai()"},T=[],U=[];if(b)for(V=0;V<b.rows.length;V++)c.push(b.rows[V].time),f.push(parseFloat(b.rows[V].Carbon_Dioxide_original)),g.push(parseFloat(b.rows[V].Carbon_Dioxide)),i.push(parseFloat(b.rows[V].Substrate_PH_original)),j.push(parseFloat(b.rows[V].Substrate_PH)),l.push(parseFloat(b.rows[V].Substrate_Conductivity_original)),m.push(parseFloat(b.rows[V].Substrate_Conductivity)),p.push(parseFloat(b.rows[V].Substrate_Temperature_original)),q.push(parseFloat(b.rows[V].Substrate_Temperature)),s.push(parseFloat(b.rows[V].Air_Temperature_original)),t.push(parseFloat(b.rows[V].Air_Temperature)),v.push(parseFloat(b.rows[V].Ppfd_original)),w.push(parseFloat(b.rows[V].Ppfd)),y.push(parseFloat(b.rows[V].Liquid_PH_original)),z.push(parseFloat(b.rows[V].Liquid_PH)),B.push(parseFloat(b.rows[V].Substrate_Humidity_original)),C.push(parseFloat(b.rows[V].Substrate_Humidity)),E.push(parseFloat(b.rows[V].Liquid_DOC_original)),F.push(parseFloat(b.rows[V].Liquid_DOC)),H.push(parseFloat(b.rows[V].Liquid_Conductivity_original)),I.push(parseFloat(b.rows[V].Liquid_Conductivity)),K.push(parseFloat(b.rows[V].Air_Humidity_original)),L.push(parseFloat(b.rows[V].Air_Humidity)),N.push(parseFloat(b.rows[V].Substrate_DOC_original)),O.push(parseFloat(b.rows[V].Substrate_DOC)),Q.push(parseFloat(b.rows[V].Illuminance_original)),R.push(parseFloat(b.rows[V].Illuminance)),T.push(parseFloat(b.rows[V].Lai_original)),U.push(parseFloat(b.rows[V].Lai));e.original_data=f,e.data=g,h.original_data=i,h.data=j,k.original_data=l,k.data=m,o.original_data=p,o.data=q,r.original_data=s,r.data=t,u.original_data=v,u.data=w,x.original_data=y,x.data=z,A.original_data=B,A.data=C,D.original_data=E,D.data=F,G.original_data=H,G.data=I,J.original_data=K,J.data=L,M.original_data=N,M.data=O,P.original_data=Q,P.data=R,S.original_data=T,S.data=U,d.push(r),d.push(J),d.push(o),d.push(A),d.push(h),d.push(e),d.push(P),d.push(k),d.push(u),d.push(x),d.push(S),d.push(G),d.push(D),d.push(M),n.data=d,n.time=c,new Highcharts.Chart({chart:{renderTo:"container",backgroundColor:"rgba(0,0,0,0)"},colors:["#000000","#CE0000","#FF79BC","#921AFF","#7D7DFF","#00CACA","#93FF93","#FF8040","#A8FF24","#AD5A5A","#8080C0","#A5A552","#424200","#642100"],title:{text:"Sensor History Data",x:-20},exporting:{enabled:!1,filename:"horticulture growing condition datasheet"},subtitle:{text:"Source Region: "+regionName,x:-20},marker:!1,noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",borderRadius:10,pointFormat:'<tr><td>{series.name}: </td><td style="text-align: right"><b>{point.y}</b></td></tr>',valueDecimals:3},legend:{align:"center",verticalAlign:"bottom"},series:n.data}),$scope.downLoad=function(){window.open("http://73.231.41.102:8080/sensor/history/export?user_id="+$cookieStore.get("user_id")+"&region_guid="+regionId+"&gateway_id="+gatewayId+"&start_time="+encodeURI(UTC_startTime)+"&end_time="+encodeURI(UTC_endTime))},$scope.toChartDetail=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,o;n.data||0!=n.data.length?($scope.chartDetailShow=!$scope.chartDetailShow,$scope.lastNextShow=!$scope.lastNextShow,$scope.chartShow=!$scope.chartShow,a=new Highcharts.Chart({chart:{renderTo:"chart_container"},title:{text:n.data[0].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[0].original_name+" condition datasheet"},colors:["#000000"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[0].original_name,data:n.data[0].original_data}]}),$scope.ExportChartDetailToExcel=function(){a.downloadXLS()},b=new Highcharts.Chart({chart:{renderTo:"chart_container1"},title:{text:n.data[1].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[1].original_name+" condition datasheet"},colors:["#CE0000"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[1].original_name,data:n.data[1].original_data}]}),$scope.ExportChartDetailToExcel1=function(){b.downloadXLS()},c=new Highcharts.Chart({chart:{renderTo:"chart_container2"},title:{text:n.data[2].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[2].original_name+" condition datasheet"},colors:["#FF79BC"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[2].original_name,data:n.data[2].original_data}]}),$scope.ExportChartDetailToExcel2=function(){c.downloadXLS()},d=new Highcharts.Chart({chart:{renderTo:"chart_container3"},title:{text:n.data[3].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[3].original_name+" condition datasheet"},colors:["#921AFF"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[3].original_name,data:n.data[3].original_data}]}),$scope.ExportChartDetailToExcel3=function(){d.downloadXLS()},e=new Highcharts.Chart({chart:{renderTo:"chart_container4"},title:{text:n.data[4].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[4].original_name+" condition datasheet"},colors:["#7D7DFF"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[4].original_name,data:n.data[4].original_data}]}),$scope.ExportChartDetailToExcel4=function(){e.downloadXLS()},f=new Highcharts.Chart({chart:{renderTo:"chart_container5"},title:{text:n.data[5].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[5].original_name+" condition datasheet"},colors:["#00CACA"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[5].original_name,data:n.data[5].original_data}]}),$scope.ExportChartDetailToExcel5=function(){f.downloadXLS()},g=new Highcharts.Chart({chart:{renderTo:"chart_container6"},title:{text:n.data[6].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[6].original_name+" condition datasheet"},colors:["#93FF93"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[6].original_name,data:n.data[6].original_data}]}),$scope.ExportChartDetailToExcel6=function(){g.downloadXLS()},h=new Highcharts.Chart({chart:{renderTo:"chart_container7"},title:{text:n.data[7].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[7].original_name+" condition datasheet"},colors:["#FF8040"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[7].original_name,data:n.data[7].original_data}]}),$scope.ExportChartDetailToExcel7=function(){h.downloadXLS()},i=new Highcharts.Chart({chart:{renderTo:"chart_container8"},title:{text:n.data[8].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[8].original_name+" condition datasheet"},colors:["#A8FF24"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[8].original_name,data:n.data[8].original_data}]}),$scope.ExportChartDetailToExcel8=function(){i.downloadXLS()},j=new Highcharts.Chart({chart:{renderTo:"chart_container9"},title:{text:n.data[9].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[9].original_name+" condition datasheet"},colors:["#AD5A5A"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[9].original_name,data:n.data[9].original_data}]}),$scope.ExportChartDetailToExcel9=function(){j.downloadXLS()},k=new Highcharts.Chart({chart:{renderTo:"chart_container10"},title:{text:n.data[10].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[10].original_name+" condition datasheet"},colors:["#8080C0"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[10].original_name,data:n.data[10].original_data}]}),$scope.ExportChartDetailToExcel10=function(){k.downloadXLS()},l=new Highcharts.Chart({chart:{renderTo:"chart_container11"},title:{text:n.data[11].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[11].original_name+" condition datasheet"},colors:["#A5A552"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[11].original_name,data:n.data[11].original_data}]}),$scope.ExportChartDetailToExcel11=function(){l.downloadXLS()},m=new Highcharts.Chart({chart:{renderTo:"chart_container12"},title:{text:n.data[12].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[12].original_name+" condition datasheet"},colors:["#424200"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[12].original_name,data:n.data[12].original_data}]}),$scope.ExportChartDetailToExcel12=function(){m.downloadXLS()},o=new Highcharts.Chart({chart:{renderTo:"chart_container13"},title:{text:n.data[13].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[13].original_name+" condition datasheet"},colors:["#642100"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[13].original_name,data:n.data[13].original_data}]}),$scope.ExportChartDetailToExcel13=function(){o.downloadXLS()}):toaster.pop({type:"error",title:"Error",body:"There is no data to display",timeout:POPTIMEOUT})}})}))}else toaster.pop({type:"error",title:"Error",body:b.message,timeout:POPTIMEOUT})})}var d,f;return 0==c.rows.length&&noDataDateDates.push(sqls[a].substring(54,64)),a+1!=newDate.length?$timeout(function(){selectFromTable(a+1)},1):(noDataDateDates&&noDataDateDates.length>0?($scope.delay=0,$scope.minDuration=0,$scope.message="0",$scope.backdrop=!1,$scope.promise=null,$scope.templateUrl="./pages/down-loading-template.html",$scope.vm={},$scope.vm.total=noDataDateDates.length,d=0,e(d)):noDataDateDates&&0!=noDataDateDates.length||(f={},dataBase.transaction(function(a){var b="SELECT * FROM sensorQuarterDataTable WHERE time BETWEEN'"+$scope.default_startTime+"' AND '"+$scope.default_endTime+"' AND device_guid = '"+$scope.device_guid+"' ORDER BY time";a.executeSql(b,[],function(a,b){var V,c=[],d=[],e={original_name:"Carbon_Dioxide(ppm)",name:"Carbon_Dioxide(ppm)"},g=[],h=[],i={original_name:"Substrate_PH(PH)",name:"Substrate_PH(PH)"},j=[],k=[],l={original_name:"Substrate_Conductivity(mS/cm)",name:"Substrate_Conductivity(mS/cm)"},m=[],n=[],o={original_name:"Substrate_Temperature(°C)",name:"Substrate_Temperature(°C)"},p=[],q=[],r={original_name:"Air_Temperature(°C)",name:"Air_Temperature(°C)"},s=[],t=[],u={original_name:"Ppfd(μmol㎡/s)",name:"Ppfd(100*μmol㎡/s)"},v=[],w=[],x={original_name:"Liquid_PH(PH)",name:"Liquid_PH(PH)"},y=[],z=[],A={original_name:"Substrate_Humidity(%)",name:"Substrate_Humidity(%)"},B=[],C=[],D={original_name:"Liquid_DOC(mg/l)",name:"Liquid_DOC(mg/l)"},E=[],F=[],G={original_name:"Liquid_Conductivity(mS/cm)",name:"Liquid_Conductivity(mS/cm)"},H=[],I=[],J={original_name:"Air_Humidity(%)",name:"Air_Humidity(%)"},K=[],L=[],M={original_name:"Substrate_DOC(mg/l)",name:"Substrate_DOC(mg/l)"},N=[],O=[],P={original_name:"Illuminance(lux)",name:"Illuminance(100*lux)"},Q=[],R=[],S={original_name:"Lai()",name:"Lai()"},T=[],U=[];if(b)for(V=0;V<b.rows.length;V++)c.push(b.rows[V].time),g.push(parseFloat(b.rows[V].Carbon_Dioxide_original)),h.push(parseFloat(b.rows[V].Carbon_Dioxide)),j.push(parseFloat(b.rows[V].Substrate_PH_original)),k.push(parseFloat(b.rows[V].Substrate_PH)),m.push(parseFloat(b.rows[V].Substrate_Conductivity_original)),n.push(parseFloat(b.rows[V].Substrate_Conductivity)),p.push(parseFloat(b.rows[V].Substrate_Temperature_original)),q.push(parseFloat(b.rows[V].Substrate_Temperature)),s.push(parseFloat(b.rows[V].Air_Temperature_original)),t.push(parseFloat(b.rows[V].Air_Temperature)),v.push(parseFloat(b.rows[V].Ppfd_original)),w.push(parseFloat(b.rows[V].Ppfd)),y.push(parseFloat(b.rows[V].Liquid_PH_original)),z.push(parseFloat(b.rows[V].Liquid_PH)),B.push(parseFloat(b.rows[V].Substrate_Humidity_original)),C.push(parseFloat(b.rows[V].Substrate_Humidity)),E.push(parseFloat(b.rows[V].Liquid_DOC_original)),F.push(parseFloat(b.rows[V].Liquid_DOC)),H.push(parseFloat(b.rows[V].Liquid_Conductivity_original)),I.push(parseFloat(b.rows[V].Liquid_Conductivity)),K.push(parseFloat(b.rows[V].Air_Humidity_original)),L.push(parseFloat(b.rows[V].Air_Humidity)),N.push(parseFloat(b.rows[V].Substrate_DOC_original)),O.push(parseFloat(b.rows[V].Substrate_DOC)),Q.push(parseFloat(b.rows[V].Illuminance_original)),R.push(parseFloat(b.rows[V].Illuminance)),T.push(parseFloat(b.rows[V].Lai_original)),U.push(parseFloat(b.rows[V].Lai));e.original_data=g,e.data=h,i.original_data=j,i.data=k,l.original_data=m,l.data=n,o.original_data=p,o.data=q,r.original_data=s,r.data=t,u.original_data=v,u.data=w,x.original_data=y,x.data=z,A.original_data=B,A.data=C,D.original_data=E,D.data=F,G.original_data=H,G.data=I,J.original_data=K,J.data=L,M.original_data=N,M.data=O,P.original_data=Q,P.data=R,S.original_data=T,S.data=U,d.push(r),d.push(J),d.push(o),d.push(A),d.push(i),d.push(e),d.push(P),d.push(l),d.push(u),d.push(x),d.push(S),d.push(G),d.push(D),d.push(M),f.data=d,f.time=c,new Highcharts.Chart({chart:{renderTo:"container",backgroundColor:"rgba(0,0,0,0)"},colors:["#000000","#CE0000","#FF79BC","#921AFF","#7D7DFF","#00CACA","#93FF93","#FF8040","#A8FF24","#AD5A5A","#8080C0","#A5A552","#424200","#642100"],title:{text:"Sensor History Data",x:-20},exporting:{enabled:!1,filename:"horticulture growing condition datasheet"},subtitle:{text:"Source Region: "+regionName,x:-20},marker:!1,noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",borderRadius:10,pointFormat:'<tr><td>{series.name}: </td><td style="text-align: right"><b>{point.y}</b></td></tr>',valueDecimals:3},legend:{align:"center",verticalAlign:"bottom"},series:f.data}),$scope.downLoad=function(){window.open("http://73.231.41.102:8080/sensor/history/export?user_id="+$cookieStore.get("user_id")+"&region_guid="+regionId+"&gateway_id="+gatewayId+"&start_time="+encodeURI(UTC_startTime)+"&end_time="+encodeURI(UTC_endTime))},$scope.toChartDetail=function(){var a,b,c,d,e,g,h,i,j,k,l,m,n,o;f.data||0!=f.data.length?($scope.chartDetailShow=!$scope.chartDetailShow,$scope.lastNextShow=!$scope.lastNextShow,$scope.chartShow=!$scope.chartShow,a=new Highcharts.Chart({chart:{renderTo:"chart_container"},title:{text:f.data[0].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[0].original_name+" condition datasheet"},colors:["#000000"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[0].original_name,data:f.data[0].original_data}]}),$scope.ExportChartDetailToExcel=function(){a.downloadXLS()},b=new Highcharts.Chart({chart:{renderTo:"chart_container1"},title:{text:f.data[1].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[1].original_name+" condition datasheet"},colors:["#CE0000"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[1].original_name,data:f.data[1].original_data}]}),$scope.ExportChartDetailToExcel1=function(){b.downloadXLS()},c=new Highcharts.Chart({chart:{renderTo:"chart_container2"},title:{text:f.data[2].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[2].original_name+" condition datasheet"},colors:["#FF79BC"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[2].original_name,data:f.data[2].original_data}]}),$scope.ExportChartDetailToExcel2=function(){c.downloadXLS()},d=new Highcharts.Chart({chart:{renderTo:"chart_container3"},title:{text:f.data[3].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[3].original_name+" condition datasheet"},colors:["#921AFF"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[3].original_name,data:f.data[3].original_data}]}),$scope.ExportChartDetailToExcel3=function(){d.downloadXLS()},e=new Highcharts.Chart({chart:{renderTo:"chart_container4"},title:{text:f.data[4].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[4].original_name+" condition datasheet"},colors:["#7D7DFF"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[4].original_name,data:f.data[4].original_data}]}),$scope.ExportChartDetailToExcel4=function(){e.downloadXLS()},g=new Highcharts.Chart({chart:{renderTo:"chart_container5"},title:{text:f.data[5].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[5].original_name+" condition datasheet"},colors:["#00CACA"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[5].original_name,data:f.data[5].original_data}]}),$scope.ExportChartDetailToExcel5=function(){g.downloadXLS()},h=new Highcharts.Chart({chart:{renderTo:"chart_container6"},title:{text:f.data[6].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[6].original_name+" condition datasheet"},colors:["#93FF93"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[6].original_name,data:f.data[6].original_data}]}),$scope.ExportChartDetailToExcel6=function(){h.downloadXLS()},i=new Highcharts.Chart({chart:{renderTo:"chart_container7"},title:{text:f.data[7].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[7].original_name+" condition datasheet"},colors:["#FF8040"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[7].original_name,data:f.data[7].original_data}]}),$scope.ExportChartDetailToExcel7=function(){i.downloadXLS()},j=new Highcharts.Chart({chart:{renderTo:"chart_container8"},title:{text:f.data[8].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[8].original_name+" condition datasheet"},colors:["#A8FF24"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[8].original_name,data:f.data[8].original_data}]}),$scope.ExportChartDetailToExcel8=function(){j.downloadXLS()
                    },k=new Highcharts.Chart({chart:{renderTo:"chart_container9"},title:{text:f.data[9].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[9].original_name+" condition datasheet"},colors:["#AD5A5A"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[9].original_name,data:f.data[9].original_data}]}),$scope.ExportChartDetailToExcel9=function(){k.downloadXLS()},l=new Highcharts.Chart({chart:{renderTo:"chart_container10"},title:{text:f.data[10].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[10].original_name+" condition datasheet"},colors:["#8080C0"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[10].original_name,data:f.data[10].original_data}]}),$scope.ExportChartDetailToExcel10=function(){l.downloadXLS()},m=new Highcharts.Chart({chart:{renderTo:"chart_container11"},title:{text:f.data[11].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[11].original_name+" condition datasheet"},colors:["#A5A552"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[11].original_name,data:f.data[11].original_data}]}),$scope.ExportChartDetailToExcel11=function(){m.downloadXLS()},n=new Highcharts.Chart({chart:{renderTo:"chart_container12"},title:{text:f.data[12].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[12].original_name+" condition datasheet"},colors:["#424200"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[12].original_name,data:f.data[12].original_data}]}),$scope.ExportChartDetailToExcel12=function(){n.downloadXLS()},o=new Highcharts.Chart({chart:{renderTo:"chart_container13"},title:{text:f.data[13].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[13].original_name+" condition datasheet"},colors:["#642100"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[13].original_name,data:f.data[13].original_data}]}),$scope.ExportChartDetailToExcel13=function(){o.downloadXLS()}):toaster.pop({type:"error",title:"Error",body:"There is no data to display",timeout:POPTIMEOUT})}})})),void 0)})})}var time1,time2,dayDiff,newDate,i,sqls,y,noDataDateDates,x;for(toaster.pop({type:"success",title:"",body:"Please waiting ...",timeout:POPTIMEOUT}),$scope.default_startTime=new Date(new Date($scope.default_endTime).getTime()).Format("yyyy-MM-dd hh:mm:ss"),$scope.default_endTime=new Date(new Date($scope.default_endTime).getTime()+1e3*60*60*$scope.my.timeDiff).Format("yyyy-MM-dd hh:mm:ss"),UTC_startTime=$scope.format(new Date($scope.default_startTime).toUTCString(),"yyyy-MM-dd HH:mm:ss"),UTC_endTime=$scope.format(new Date($scope.default_endTime).toUTCString(),"yyyy-MM-dd HH:mm:ss"),time1=$scope.default_startTime.substring(0,10),time2=$scope.default_endTime.substring(0,10),dayDiff=DateDiff(time1,time2)+1,newDate=[],i=0;dayDiff>i;i++)newDate[i]=getNewDay(time1,i);for(sqls=[],y=0;y<newDate.length;y++)sqls[y]="SELECT * FROM sensorYearDataTable WHERE time BETWEEN '"+newDate[y]+" 00:00:00"+"' AND '"+newDate[y]+" 23:59:59"+"' AND device_guid = '"+$scope.device_guid+"'";noDataDateDates=[],x=0,selectFromTable(x);
                }
            }else if($scope.my.timeDiff == '4320'){
                if(entTime >= localEndTime){
                    toaster.pop({type: 'error', title: 'Error', body: 'There is mo more data !', timeout: POPTIMEOUT});
                }else {
                    function selectFromTable(a){dataBase.transaction(function(b){b.executeSql(sqls[a],[],function(b,c){function e(a){var b={table_device_guid:$scope.device_guid,device_name:"",gateway_id:gatewayId,start_time:$scope.format(new Date(noDataDateDates[a]+" 00:00:00").toUTCString(),"yyyy-MM-dd HH:mm:ss"),end_time:$scope.format(new Date(noDataDateDates[a]+" 23:59:59").toUTCString(),"yyyy-MM-dd HH:mm:ss")};$scope.getSensorDataProm=AuthService.myHttp(token,b,"GET","sensor/sensorOneDay").then(function(b){var c,d,f,g,h,i,j,k,l,m,n;if("0"==b.code){for($scope.message=Math.round(100*((a+1)/$scope.vm.total)),c=[],d=[],f=[],g=[],h=[],i=[],j=[],k=[],l=0;l<b.content.time.length;l++)d[l]=new Date(b.content.time[l]),c[l]=d[l].getTime(),c[l]-=1e3*60*(new Date).getTimezoneOffset(),c[l]=new Date(c[l]).Format("yyyy-MM-dd hh:mm:ss");for(m=0;m<b.content.quarterObject.time.length;m++)f[m]=new Date(b.content.quarterObject.time[m]),i[m]=f[m].getTime(),i[m]-=1e3*60*(new Date).getTimezoneOffset(),i[m]=new Date(i[m]).Format("yyyy-MM-dd hh:mm:ss");for(m=0;m<b.content.halfYearObject.time.length;m++)g[m]=new Date(b.content.halfYearObject.time[m]),j[m]=g[m].getTime(),j[m]-=1e3*60*(new Date).getTimezoneOffset(),j[m]=new Date(j[m]).Format("yyyy-MM-dd hh:mm:ss");for(m=0;m<b.content.yearObject.time.length;m++)h[m]=new Date(b.content.yearObject.time[m]),k[m]=h[m].getTime(),k[m]-=1e3*60*(new Date).getTimezoneOffset(),k[m]=new Date(k[m]).Format("yyyy-MM-dd hh:mm:ss");if(dataBase.transaction(function(a){var d,e,f,g,h,l,m,n;for(d=0;d<b.content.time.length;d++)e="INSERT INTO sensorDataTable(device_guid,time,Carbon_Dioxide_original,Carbon_Dioxide,Substrate_PH_original,Substrate_PH,Substrate_Conductivity_original,Substrate_Conductivity,Substrate_Temperature_original,Substrate_Temperature,Air_Temperature_original,Air_Temperature,Ppfd_original,Ppfd,Liquid_PH_original,Liquid_PH,Substrate_Humidity_original,Substrate_Humidity,Liquid_DOC_original,Liquid_DOC,Liquid_Conductivity_original,Liquid_Conductivity,Air_Humidity_original,Air_Humidity,Substrate_DOC_original,Substrate_DOC,Illuminance_original,Illuminance,Lai_original,Lai) values ('"+$scope.device_guid+"','"+c[d]+"','"+b.content.data[0].original_data[d]+"','"+b.content.data[0].data[d]+"'"+",'"+b.content.data[1].original_data[d]+"','"+b.content.data[1].data[d]+"','"+b.content.data[2].original_data[d]+"','"+b.content.data[2].data[d]+"','"+b.content.data[3].original_data[d]+"','"+b.content.data[3].data[d]+"'"+",'"+b.content.data[4].original_data[d]+"','"+b.content.data[4].data[d]+"','"+b.content.data[5].original_data[d]+"','"+b.content.data[5].data[d]+"','"+b.content.data[6].original_data[d]+"','"+b.content.data[6].data[d]+"'"+",'"+b.content.data[7].original_data[d]+"','"+b.content.data[7].data[d]+"','"+b.content.data[8].original_data[d]+"','"+b.content.data[8].data[d]+"','"+b.content.data[9].original_data[d]+"','"+b.content.data[9].data[d]+"'"+",'"+b.content.data[10].original_data[d]+"','"+b.content.data[10].data[d]+"','"+b.content.data[11].original_data[d]+"','"+b.content.data[11].data[d]+"','"+b.content.data[12].original_data[d]+"','"+b.content.data[12].data[d]+"'"+",'"+b.content.data[13].original_data[d]+"','"+b.content.data[13].data[d]+"')",a.executeSql(e);for(f=0;f<b.content.quarterObject.time.length;f++)g="INSERT INTO sensorQuarterDataTable(device_guid,time,Carbon_Dioxide_original,Carbon_Dioxide,Substrate_PH_original,Substrate_PH,Substrate_Conductivity_original,Substrate_Conductivity,Substrate_Temperature_original,Substrate_Temperature,Air_Temperature_original,Air_Temperature,Ppfd_original,Ppfd,Liquid_PH_original,Liquid_PH,Substrate_Humidity_original,Substrate_Humidity,Liquid_DOC_original,Liquid_DOC,Liquid_Conductivity_original,Liquid_Conductivity,Air_Humidity_original,Air_Humidity,Substrate_DOC_original,Substrate_DOC,Illuminance_original,Illuminance,Lai_original,Lai) values ('"+$scope.device_guid+"','"+i[f]+"','"+b.content.quarterObject.data[0].original_data[f]+"','"+b.content.quarterObject.data[0].data[f]+"'"+",'"+b.content.quarterObject.data[1].original_data[f]+"','"+b.content.quarterObject.data[1].data[f]+"','"+b.content.quarterObject.data[2].original_data[f]+"','"+b.content.quarterObject.data[2].data[f]+"','"+b.content.quarterObject.data[3].original_data[f]+"','"+b.content.quarterObject.data[3].data[f]+"'"+",'"+b.content.quarterObject.data[4].original_data[f]+"','"+b.content.quarterObject.data[4].data[f]+"','"+b.content.quarterObject.data[5].original_data[f]+"','"+b.content.quarterObject.data[5].data[f]+"','"+b.content.quarterObject.data[6].original_data[f]+"','"+b.content.quarterObject.data[6].data[f]+"'"+",'"+b.content.quarterObject.data[7].original_data[f]+"','"+b.content.quarterObject.data[7].data[f]+"','"+b.content.quarterObject.data[8].original_data[f]+"','"+b.content.quarterObject.data[8].data[f]+"','"+b.content.quarterObject.data[9].original_data[f]+"','"+b.content.quarterObject.data[9].data[f]+"'"+",'"+b.content.quarterObject.data[10].original_data[f]+"','"+b.content.quarterObject.data[10].data[f]+"','"+b.content.quarterObject.data[11].original_data[f]+"','"+b.content.quarterObject.data[11].data[f]+"','"+b.content.quarterObject.data[12].original_data[f]+"','"+b.content.quarterObject.data[12].data[f]+"'"+",'"+b.content.quarterObject.data[13].original_data[f]+"','"+b.content.quarterObject.data[13].data[f]+"')",a.executeSql(g);for(h=0;h<b.content.quarterObject.time.length;h++)l="INSERT INTO sensorHalfYearDataTable(device_guid,time,Carbon_Dioxide_original,Carbon_Dioxide,Substrate_PH_original,Substrate_PH,Substrate_Conductivity_original,Substrate_Conductivity,Substrate_Temperature_original,Substrate_Temperature,Air_Temperature_original,Air_Temperature,Ppfd_original,Ppfd,Liquid_PH_original,Liquid_PH,Substrate_Humidity_original,Substrate_Humidity,Liquid_DOC_original,Liquid_DOC,Liquid_Conductivity_original,Liquid_Conductivity,Air_Humidity_original,Air_Humidity,Substrate_DOC_original,Substrate_DOC,Illuminance_original,Illuminance,Lai_original,Lai) values ('"+$scope.device_guid+"','"+j[h]+"','"+b.content.halfYearObject.data[0].original_data[h]+"','"+b.content.halfYearObject.data[0].data[h]+"'"+",'"+b.content.halfYearObject.data[1].original_data[h]+"','"+b.content.halfYearObject.data[1].data[h]+"','"+b.content.halfYearObject.data[2].original_data[h]+"','"+b.content.halfYearObject.data[2].data[h]+"','"+b.content.halfYearObject.data[3].original_data[h]+"','"+b.content.halfYearObject.data[3].data[h]+"'"+",'"+b.content.halfYearObject.data[4].original_data[h]+"','"+b.content.halfYearObject.data[4].data[h]+"','"+b.content.halfYearObject.data[5].original_data[h]+"','"+b.content.halfYearObject.data[5].data[h]+"','"+b.content.halfYearObject.data[6].original_data[h]+"','"+b.content.halfYearObject.data[6].data[h]+"'"+",'"+b.content.halfYearObject.data[7].original_data[h]+"','"+b.content.halfYearObject.data[7].data[h]+"','"+b.content.halfYearObject.data[8].original_data[h]+"','"+b.content.halfYearObject.data[8].data[h]+"','"+b.content.halfYearObject.data[9].original_data[h]+"','"+b.content.halfYearObject.data[9].data[h]+"'"+",'"+b.content.halfYearObject.data[10].original_data[h]+"','"+b.content.halfYearObject.data[10].data[h]+"','"+b.content.halfYearObject.data[11].original_data[h]+"','"+b.content.halfYearObject.data[11].data[h]+"','"+b.content.halfYearObject.data[12].original_data[h]+"','"+b.content.halfYearObject.data[12].data[h]+"'"+",'"+b.content.halfYearObject.data[13].original_data[h]+"','"+b.content.halfYearObject.data[13].data[h]+"')",a.executeSql(l);for(m=0;m<b.content.yearObject.time.length;m++)n="INSERT INTO sensorYearDataTable(device_guid,time,Carbon_Dioxide_original,Carbon_Dioxide,Substrate_PH_original,Substrate_PH,Substrate_Conductivity_original,Substrate_Conductivity,Substrate_Temperature_original,Substrate_Temperature,Air_Temperature_original,Air_Temperature,Ppfd_original,Ppfd,Liquid_PH_original,Liquid_PH,Substrate_Humidity_original,Substrate_Humidity,Liquid_DOC_original,Liquid_DOC,Liquid_Conductivity_original,Liquid_Conductivity,Air_Humidity_original,Air_Humidity,Substrate_DOC_original,Substrate_DOC,Illuminance_original,Illuminance,Lai_original,Lai) values ('"+$scope.device_guid+"','"+k[m]+"','"+b.content.yearObject.data[0].original_data[m]+"','"+b.content.yearObject.data[0].data[m]+"'"+",'"+b.content.yearObject.data[1].original_data[m]+"','"+b.content.yearObject.data[1].data[m]+"','"+b.content.yearObject.data[2].original_data[m]+"','"+b.content.yearObject.data[2].data[m]+"','"+b.content.yearObject.data[3].original_data[m]+"','"+b.content.yearObject.data[3].data[m]+"'"+",'"+b.content.yearObject.data[4].original_data[m]+"','"+b.content.yearObject.data[4].data[m]+"','"+b.content.yearObject.data[5].original_data[m]+"','"+b.content.yearObject.data[5].data[m]+"','"+b.content.yearObject.data[6].original_data[m]+"','"+b.content.yearObject.data[6].data[m]+"'"+",'"+b.content.yearObject.data[7].original_data[m]+"','"+b.content.yearObject.data[7].data[m]+"','"+b.content.yearObject.data[8].original_data[m]+"','"+b.content.yearObject.data[8].data[m]+"','"+b.content.yearObject.data[9].original_data[m]+"','"+b.content.yearObject.data[9].data[m]+"'"+",'"+b.content.yearObject.data[10].original_data[m]+"','"+b.content.yearObject.data[10].data[m]+"','"+b.content.yearObject.data[11].original_data[m]+"','"+b.content.yearObject.data[11].data[m]+"','"+b.content.yearObject.data[12].original_data[m]+"','"+b.content.yearObject.data[12].data[m]+"'"+",'"+b.content.yearObject.data[13].original_data[m]+"','"+b.content.yearObject.data[13].data[m]+"')",a.executeSql(n)}),a+1!=noDataDateDates.length)return $timeout(function(){e(a+1)},1500);a+1==noDataDateDates.length&&(toaster.pop({type:"success",title:"Success",body:"Download successfully , please waiting...",timeout:POPTIMEOUT}),n={},dataBase.transaction(function(a){var b="SELECT * FROM sensorHalfYearDataTable WHERE time BETWEEN'"+$scope.default_startTime+"' AND '"+$scope.default_endTime+"' AND device_guid = '"+$scope.device_guid+"' ORDER BY time";a.executeSql(b,[],function(a,b){var V,c=[],d=[],e={original_name:"Carbon_Dioxide(ppm)",name:"Carbon_Dioxide(ppm)"},f=[],g=[],h={original_name:"Substrate_PH(PH)",name:"Substrate_PH(PH)"},i=[],j=[],k={original_name:"Substrate_Conductivity(mS/cm)",name:"Substrate_Conductivity(mS/cm)"},l=[],m=[],o={original_name:"Substrate_Temperature(°C)",name:"Substrate_Temperature(°C)"},p=[],q=[],r={original_name:"Air_Temperature(°C)",name:"Air_Temperature(°C)"},s=[],t=[],u={original_name:"Ppfd(μmol㎡/s)",name:"Ppfd(100*μmol㎡/s)"},v=[],w=[],x={original_name:"Liquid_PH(PH)",name:"Liquid_PH(PH)"},y=[],z=[],A={original_name:"Substrate_Humidity(%)",name:"Substrate_Humidity(%)"},B=[],C=[],D={original_name:"Liquid_DOC(mg/l)",name:"Liquid_DOC(mg/l)"},E=[],F=[],G={original_name:"Liquid_Conductivity(mS/cm)",name:"Liquid_Conductivity(mS/cm)"},H=[],I=[],J={original_name:"Air_Humidity(%)",name:"Air_Humidity(%)"},K=[],L=[],M={original_name:"Substrate_DOC(mg/l)",name:"Substrate_DOC(mg/l)"},N=[],O=[],P={original_name:"Illuminance(lux)",name:"Illuminance(100*lux)"},Q=[],R=[],S={original_name:"Lai()",name:"Lai()"},T=[],U=[];if(b)for(V=0;V<b.rows.length;V++)c.push(b.rows[V].time),f.push(parseFloat(b.rows[V].Carbon_Dioxide_original)),g.push(parseFloat(b.rows[V].Carbon_Dioxide)),i.push(parseFloat(b.rows[V].Substrate_PH_original)),j.push(parseFloat(b.rows[V].Substrate_PH)),l.push(parseFloat(b.rows[V].Substrate_Conductivity_original)),m.push(parseFloat(b.rows[V].Substrate_Conductivity)),p.push(parseFloat(b.rows[V].Substrate_Temperature_original)),q.push(parseFloat(b.rows[V].Substrate_Temperature)),s.push(parseFloat(b.rows[V].Air_Temperature_original)),t.push(parseFloat(b.rows[V].Air_Temperature)),v.push(parseFloat(b.rows[V].Ppfd_original)),w.push(parseFloat(b.rows[V].Ppfd)),y.push(parseFloat(b.rows[V].Liquid_PH_original)),z.push(parseFloat(b.rows[V].Liquid_PH)),B.push(parseFloat(b.rows[V].Substrate_Humidity_original)),C.push(parseFloat(b.rows[V].Substrate_Humidity)),E.push(parseFloat(b.rows[V].Liquid_DOC_original)),F.push(parseFloat(b.rows[V].Liquid_DOC)),H.push(parseFloat(b.rows[V].Liquid_Conductivity_original)),I.push(parseFloat(b.rows[V].Liquid_Conductivity)),K.push(parseFloat(b.rows[V].Air_Humidity_original)),L.push(parseFloat(b.rows[V].Air_Humidity)),N.push(parseFloat(b.rows[V].Substrate_DOC_original)),O.push(parseFloat(b.rows[V].Substrate_DOC)),Q.push(parseFloat(b.rows[V].Illuminance_original)),R.push(parseFloat(b.rows[V].Illuminance)),T.push(parseFloat(b.rows[V].Lai_original)),U.push(parseFloat(b.rows[V].Lai));e.original_data=f,e.data=g,h.original_data=i,h.data=j,k.original_data=l,k.data=m,o.original_data=p,o.data=q,r.original_data=s,r.data=t,u.original_data=v,u.data=w,x.original_data=y,x.data=z,A.original_data=B,A.data=C,D.original_data=E,D.data=F,G.original_data=H,G.data=I,J.original_data=K,J.data=L,M.original_data=N,M.data=O,P.original_data=Q,P.data=R,S.original_data=T,S.data=U,d.push(r),d.push(J),d.push(o),d.push(A),d.push(h),d.push(e),d.push(P),d.push(k),d.push(u),d.push(x),d.push(S),d.push(G),d.push(D),d.push(M),n.data=d,n.time=c,new Highcharts.Chart({chart:{renderTo:"container",backgroundColor:"rgba(0,0,0,0)"},colors:["#000000","#CE0000","#FF79BC","#921AFF","#7D7DFF","#00CACA","#93FF93","#FF8040","#A8FF24","#AD5A5A","#8080C0","#A5A552","#424200","#642100"],title:{text:"Sensor History Data",x:-20},exporting:{enabled:!1,filename:"horticulture growing condition datasheet"},subtitle:{text:"Source Region: "+regionName,x:-20},marker:!1,noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",borderRadius:10,pointFormat:'<tr><td>{series.name}: </td><td style="text-align: right"><b>{point.y}</b></td></tr>',valueDecimals:3},legend:{align:"center",verticalAlign:"bottom"},series:n.data}),$scope.downLoad=function(){window.open("http://73.231.41.102:8080/sensor/history/export?user_id="+$cookieStore.get("user_id")+"&region_guid="+regionId+"&gateway_id="+gatewayId+"&start_time="+encodeURI(UTC_startTime)+"&end_time="+encodeURI(UTC_endTime))},$scope.toChartDetail=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,o;n.data||0!=n.data.length?($scope.chartDetailShow=!$scope.chartDetailShow,$scope.lastNextShow=!$scope.lastNextShow,$scope.chartShow=!$scope.chartShow,a=new Highcharts.Chart({chart:{renderTo:"chart_container"},title:{text:n.data[0].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[0].original_name+" condition datasheet"},colors:["#000000"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[0].original_name,data:n.data[0].original_data}]}),$scope.ExportChartDetailToExcel=function(){a.downloadXLS()},b=new Highcharts.Chart({chart:{renderTo:"chart_container1"},title:{text:n.data[1].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[1].original_name+" condition datasheet"},colors:["#CE0000"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[1].original_name,data:n.data[1].original_data}]}),$scope.ExportChartDetailToExcel1=function(){b.downloadXLS()},c=new Highcharts.Chart({chart:{renderTo:"chart_container2"},title:{text:n.data[2].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[2].original_name+" condition datasheet"},colors:["#FF79BC"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[2].original_name,data:n.data[2].original_data}]}),$scope.ExportChartDetailToExcel2=function(){c.downloadXLS()},d=new Highcharts.Chart({chart:{renderTo:"chart_container3"},title:{text:n.data[3].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[3].original_name+" condition datasheet"},colors:["#921AFF"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[3].original_name,data:n.data[3].original_data}]}),$scope.ExportChartDetailToExcel3=function(){d.downloadXLS()},e=new Highcharts.Chart({chart:{renderTo:"chart_container4"},title:{text:n.data[4].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[4].original_name+" condition datasheet"},colors:["#7D7DFF"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[4].original_name,data:n.data[4].original_data}]}),$scope.ExportChartDetailToExcel4=function(){e.downloadXLS()},f=new Highcharts.Chart({chart:{renderTo:"chart_container5"},title:{text:n.data[5].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[5].original_name+" condition datasheet"},colors:["#00CACA"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[5].original_name,data:n.data[5].original_data}]}),$scope.ExportChartDetailToExcel5=function(){f.downloadXLS()},g=new Highcharts.Chart({chart:{renderTo:"chart_container6"},title:{text:n.data[6].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[6].original_name+" condition datasheet"},colors:["#93FF93"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[6].original_name,data:n.data[6].original_data}]}),$scope.ExportChartDetailToExcel6=function(){g.downloadXLS()},h=new Highcharts.Chart({chart:{renderTo:"chart_container7"},title:{text:n.data[7].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[7].original_name+" condition datasheet"},colors:["#FF8040"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[7].original_name,data:n.data[7].original_data}]}),$scope.ExportChartDetailToExcel7=function(){h.downloadXLS()},i=new Highcharts.Chart({chart:{renderTo:"chart_container8"},title:{text:n.data[8].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[8].original_name+" condition datasheet"},colors:["#A8FF24"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[8].original_name,data:n.data[8].original_data}]}),$scope.ExportChartDetailToExcel8=function(){i.downloadXLS()},j=new Highcharts.Chart({chart:{renderTo:"chart_container9"},title:{text:n.data[9].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[9].original_name+" condition datasheet"},colors:["#AD5A5A"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[9].original_name,data:n.data[9].original_data}]}),$scope.ExportChartDetailToExcel9=function(){j.downloadXLS()},k=new Highcharts.Chart({chart:{renderTo:"chart_container10"},title:{text:n.data[10].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[10].original_name+" condition datasheet"},colors:["#8080C0"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[10].original_name,data:n.data[10].original_data}]}),$scope.ExportChartDetailToExcel10=function(){k.downloadXLS()},l=new Highcharts.Chart({chart:{renderTo:"chart_container11"},title:{text:n.data[11].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[11].original_name+" condition datasheet"},colors:["#A5A552"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[11].original_name,data:n.data[11].original_data}]}),$scope.ExportChartDetailToExcel11=function(){l.downloadXLS()},m=new Highcharts.Chart({chart:{renderTo:"chart_container12"},title:{text:n.data[12].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[12].original_name+" condition datasheet"},colors:["#424200"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[12].original_name,data:n.data[12].original_data}]}),$scope.ExportChartDetailToExcel12=function(){m.downloadXLS()},o=new Highcharts.Chart({chart:{renderTo:"chart_container13"},title:{text:n.data[13].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[13].original_name+" condition datasheet"},colors:["#642100"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[13].original_name,data:n.data[13].original_data}]}),$scope.ExportChartDetailToExcel13=function(){o.downloadXLS()}):toaster.pop({type:"error",title:"Error",body:"There is no data to display",timeout:POPTIMEOUT})}})}))}else toaster.pop({type:"error",title:"Error",body:b.message,timeout:POPTIMEOUT})})}var d,f;return 0==c.rows.length&&noDataDateDates.push(sqls[a].substring(54,64)),a+1!=newDate.length?$timeout(function(){selectFromTable(a+1)},1):(noDataDateDates&&noDataDateDates.length>0?($scope.delay=0,$scope.minDuration=0,$scope.message="0",$scope.backdrop=!1,$scope.promise=null,$scope.templateUrl="./pages/down-loading-template.html",$scope.vm={},$scope.vm.total=noDataDateDates.length,d=0,e(d)):noDataDateDates&&0!=noDataDateDates.length||(f={},dataBase.transaction(function(a){var b="SELECT * FROM sensorHalfYearDataTable WHERE time BETWEEN'"+$scope.default_startTime+"' AND '"+$scope.default_endTime+"' AND device_guid = '"+$scope.device_guid+"' ORDER BY time";a.executeSql(b,[],function(a,b){var V,c=[],d=[],e={original_name:"Carbon_Dioxide(ppm)",name:"Carbon_Dioxide(ppm)"},g=[],h=[],i={original_name:"Substrate_PH(PH)",name:"Substrate_PH(PH)"},j=[],k=[],l={original_name:"Substrate_Conductivity(mS/cm)",name:"Substrate_Conductivity(mS/cm)"},m=[],n=[],o={original_name:"Substrate_Temperature(°C)",name:"Substrate_Temperature(°C)"},p=[],q=[],r={original_name:"Air_Temperature(°C)",name:"Air_Temperature(°C)"},s=[],t=[],u={original_name:"Ppfd(μmol㎡/s)",name:"Ppfd(100*μmol㎡/s)"},v=[],w=[],x={original_name:"Liquid_PH(PH)",name:"Liquid_PH(PH)"},y=[],z=[],A={original_name:"Substrate_Humidity(%)",name:"Substrate_Humidity(%)"},B=[],C=[],D={original_name:"Liquid_DOC(mg/l)",name:"Liquid_DOC(mg/l)"},E=[],F=[],G={original_name:"Liquid_Conductivity(mS/cm)",name:"Liquid_Conductivity(mS/cm)"},H=[],I=[],J={original_name:"Air_Humidity(%)",name:"Air_Humidity(%)"},K=[],L=[],M={original_name:"Substrate_DOC(mg/l)",name:"Substrate_DOC(mg/l)"},N=[],O=[],P={original_name:"Illuminance(lux)",name:"Illuminance(100*lux)"},Q=[],R=[],S={original_name:"Lai()",name:"Lai()"},T=[],U=[];if(b)for(V=0;V<b.rows.length;V++)c.push(b.rows[V].time),g.push(parseFloat(b.rows[V].Carbon_Dioxide_original)),h.push(parseFloat(b.rows[V].Carbon_Dioxide)),j.push(parseFloat(b.rows[V].Substrate_PH_original)),k.push(parseFloat(b.rows[V].Substrate_PH)),m.push(parseFloat(b.rows[V].Substrate_Conductivity_original)),n.push(parseFloat(b.rows[V].Substrate_Conductivity)),p.push(parseFloat(b.rows[V].Substrate_Temperature_original)),q.push(parseFloat(b.rows[V].Substrate_Temperature)),s.push(parseFloat(b.rows[V].Air_Temperature_original)),t.push(parseFloat(b.rows[V].Air_Temperature)),v.push(parseFloat(b.rows[V].Ppfd_original)),w.push(parseFloat(b.rows[V].Ppfd)),y.push(parseFloat(b.rows[V].Liquid_PH_original)),z.push(parseFloat(b.rows[V].Liquid_PH)),B.push(parseFloat(b.rows[V].Substrate_Humidity_original)),C.push(parseFloat(b.rows[V].Substrate_Humidity)),E.push(parseFloat(b.rows[V].Liquid_DOC_original)),F.push(parseFloat(b.rows[V].Liquid_DOC)),H.push(parseFloat(b.rows[V].Liquid_Conductivity_original)),I.push(parseFloat(b.rows[V].Liquid_Conductivity)),K.push(parseFloat(b.rows[V].Air_Humidity_original)),L.push(parseFloat(b.rows[V].Air_Humidity)),N.push(parseFloat(b.rows[V].Substrate_DOC_original)),O.push(parseFloat(b.rows[V].Substrate_DOC)),Q.push(parseFloat(b.rows[V].Illuminance_original)),R.push(parseFloat(b.rows[V].Illuminance)),T.push(parseFloat(b.rows[V].Lai_original)),U.push(parseFloat(b.rows[V].Lai));e.original_data=g,e.data=h,i.original_data=j,i.data=k,l.original_data=m,l.data=n,o.original_data=p,o.data=q,r.original_data=s,r.data=t,u.original_data=v,u.data=w,x.original_data=y,x.data=z,A.original_data=B,A.data=C,D.original_data=E,D.data=F,G.original_data=H,G.data=I,J.original_data=K,J.data=L,M.original_data=N,M.data=O,P.original_data=Q,P.data=R,S.original_data=T,S.data=U,d.push(r),d.push(J),d.push(o),d.push(A),d.push(i),d.push(e),d.push(P),d.push(l),d.push(u),d.push(x),d.push(S),d.push(G),d.push(D),d.push(M),f.data=d,f.time=c,new Highcharts.Chart({chart:{renderTo:"container",backgroundColor:"rgba(0,0,0,0)"},colors:["#000000","#CE0000","#FF79BC","#921AFF","#7D7DFF","#00CACA","#93FF93","#FF8040","#A8FF24","#AD5A5A","#8080C0","#A5A552","#424200","#642100"],title:{text:"Sensor History Data",x:-20},exporting:{enabled:!1,filename:"horticulture growing condition datasheet"},subtitle:{text:"Source Region: "+regionName,x:-20},marker:!1,noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",borderRadius:10,pointFormat:'<tr><td>{series.name}: </td><td style="text-align: right"><b>{point.y}</b></td></tr>',valueDecimals:3},legend:{align:"center",verticalAlign:"bottom"},series:f.data}),$scope.downLoad=function(){window.open("http://73.231.41.102:8080/sensor/history/export?user_id="+$cookieStore.get("user_id")+"&region_guid="+regionId+"&gateway_id="+gatewayId+"&start_time="+encodeURI(UTC_startTime)+"&end_time="+encodeURI(UTC_endTime))},$scope.toChartDetail=function(){var a,b,c,d,e,g,h,i,j,k,l,m,n,o;f.data||0!=f.data.length?($scope.chartDetailShow=!$scope.chartDetailShow,$scope.lastNextShow=!$scope.lastNextShow,$scope.chartShow=!$scope.chartShow,a=new Highcharts.Chart({chart:{renderTo:"chart_container"},title:{text:f.data[0].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[0].original_name+" condition datasheet"},colors:["#000000"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[0].original_name,data:f.data[0].original_data}]}),$scope.ExportChartDetailToExcel=function(){a.downloadXLS()},b=new Highcharts.Chart({chart:{renderTo:"chart_container1"},title:{text:f.data[1].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[1].original_name+" condition datasheet"},colors:["#CE0000"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[1].original_name,data:f.data[1].original_data}]}),$scope.ExportChartDetailToExcel1=function(){b.downloadXLS()},c=new Highcharts.Chart({chart:{renderTo:"chart_container2"},title:{text:f.data[2].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[2].original_name+" condition datasheet"},colors:["#FF79BC"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[2].original_name,data:f.data[2].original_data}]}),$scope.ExportChartDetailToExcel2=function(){c.downloadXLS()},d=new Highcharts.Chart({chart:{renderTo:"chart_container3"},title:{text:f.data[3].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[3].original_name+" condition datasheet"},colors:["#921AFF"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[3].original_name,data:f.data[3].original_data}]}),$scope.ExportChartDetailToExcel3=function(){d.downloadXLS()},e=new Highcharts.Chart({chart:{renderTo:"chart_container4"},title:{text:f.data[4].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[4].original_name+" condition datasheet"},colors:["#7D7DFF"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[4].original_name,data:f.data[4].original_data}]}),$scope.ExportChartDetailToExcel4=function(){e.downloadXLS()},g=new Highcharts.Chart({chart:{renderTo:"chart_container5"},title:{text:f.data[5].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[5].original_name+" condition datasheet"},colors:["#00CACA"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[5].original_name,data:f.data[5].original_data}]}),$scope.ExportChartDetailToExcel5=function(){g.downloadXLS()},h=new Highcharts.Chart({chart:{renderTo:"chart_container6"},title:{text:f.data[6].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[6].original_name+" condition datasheet"},colors:["#93FF93"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[6].original_name,data:f.data[6].original_data}]}),$scope.ExportChartDetailToExcel6=function(){h.downloadXLS()},i=new Highcharts.Chart({chart:{renderTo:"chart_container7"},title:{text:f.data[7].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[7].original_name+" condition datasheet"},colors:["#FF8040"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[7].original_name,data:f.data[7].original_data}]}),$scope.ExportChartDetailToExcel7=function(){i.downloadXLS()},j=new Highcharts.Chart({chart:{renderTo:"chart_container8"},title:{text:f.data[8].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[8].original_name+" condition datasheet"},colors:["#A8FF24"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[8].original_name,data:f.data[8].original_data}]}),$scope.ExportChartDetailToExcel8=function(){j.downloadXLS()
                    },k=new Highcharts.Chart({chart:{renderTo:"chart_container9"},title:{text:f.data[9].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[9].original_name+" condition datasheet"},colors:["#AD5A5A"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[9].original_name,data:f.data[9].original_data}]}),$scope.ExportChartDetailToExcel9=function(){k.downloadXLS()},l=new Highcharts.Chart({chart:{renderTo:"chart_container10"},title:{text:f.data[10].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[10].original_name+" condition datasheet"},colors:["#8080C0"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[10].original_name,data:f.data[10].original_data}]}),$scope.ExportChartDetailToExcel10=function(){l.downloadXLS()},m=new Highcharts.Chart({chart:{renderTo:"chart_container11"},title:{text:f.data[11].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[11].original_name+" condition datasheet"},colors:["#A5A552"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[11].original_name,data:f.data[11].original_data}]}),$scope.ExportChartDetailToExcel11=function(){m.downloadXLS()},n=new Highcharts.Chart({chart:{renderTo:"chart_container12"},title:{text:f.data[12].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[12].original_name+" condition datasheet"},colors:["#424200"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[12].original_name,data:f.data[12].original_data}]}),$scope.ExportChartDetailToExcel12=function(){n.downloadXLS()},o=new Highcharts.Chart({chart:{renderTo:"chart_container13"},title:{text:f.data[13].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[13].original_name+" condition datasheet"},colors:["#642100"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[13].original_name,data:f.data[13].original_data}]}),$scope.ExportChartDetailToExcel13=function(){o.downloadXLS()}):toaster.pop({type:"error",title:"Error",body:"There is no data to display",timeout:POPTIMEOUT})}})})),void 0)})})}var time1,time2,dayDiff,newDate,i,sqls,y,noDataDateDates,x;for(toaster.pop({type:"success",title:"",body:"Please waiting ...",timeout:POPTIMEOUT}),$scope.default_startTime=new Date(new Date($scope.default_endTime).getTime()).Format("yyyy-MM-dd hh:mm:ss"),$scope.default_endTime=new Date(new Date($scope.default_endTime).getTime()+1e3*60*60*$scope.my.timeDiff).Format("yyyy-MM-dd hh:mm:ss"),UTC_startTime=$scope.format(new Date($scope.default_startTime).toUTCString(),"yyyy-MM-dd HH:mm:ss"),UTC_endTime=$scope.format(new Date($scope.default_endTime).toUTCString(),"yyyy-MM-dd HH:mm:ss"),time1=$scope.default_startTime.substring(0,10),time2=$scope.default_endTime.substring(0,10),dayDiff=DateDiff(time1,time2)+1,newDate=[],i=0;dayDiff>i;i++)newDate[i]=getNewDay(time1,i);for(sqls=[],y=0;y<newDate.length;y++)sqls[y]="SELECT * FROM sensorYearDataTable WHERE time BETWEEN '"+newDate[y]+" 00:00:00"+"' AND '"+newDate[y]+" 23:59:59"+"' AND device_guid = '"+$scope.device_guid+"'";noDataDateDates=[],x=0,selectFromTable(x);
                }
            }else{
                if(entTime >= localEndTime){
                    toaster.pop({type: 'error', title: 'Error', body: 'There is mo more data !', timeout: POPTIMEOUT});
                }else {
                    function selectFromTable(a){dataBase.transaction(function(b){b.executeSql(sqls[a],[],function(b,c){function e(a){var b={table_device_guid:$scope.device_guid,device_name:"",gateway_id:gatewayId,start_time:$scope.format(new Date(noDataDateDates[a]+" 00:00:00").toUTCString(),"yyyy-MM-dd HH:mm:ss"),end_time:$scope.format(new Date(noDataDateDates[a]+" 23:59:59").toUTCString(),"yyyy-MM-dd HH:mm:ss")};$scope.getSensorDataProm=AuthService.myHttp(token,b,"GET","sensor/sensorOneDay").then(function(b){var c,d,f,g,h,i,j,k,l,m,n;if("0"==b.code){for($scope.message=Math.round(100*((a+1)/$scope.vm.total)),c=[],d=[],f=[],g=[],h=[],i=[],j=[],k=[],l=0;l<b.content.time.length;l++)d[l]=new Date(b.content.time[l]),c[l]=d[l].getTime(),c[l]-=1e3*60*(new Date).getTimezoneOffset(),c[l]=new Date(c[l]).Format("yyyy-MM-dd hh:mm:ss");for(m=0;m<b.content.quarterObject.time.length;m++)f[m]=new Date(b.content.quarterObject.time[m]),i[m]=f[m].getTime(),i[m]-=1e3*60*(new Date).getTimezoneOffset(),i[m]=new Date(i[m]).Format("yyyy-MM-dd hh:mm:ss");for(m=0;m<b.content.halfYearObject.time.length;m++)g[m]=new Date(b.content.halfYearObject.time[m]),j[m]=g[m].getTime(),j[m]-=1e3*60*(new Date).getTimezoneOffset(),j[m]=new Date(j[m]).Format("yyyy-MM-dd hh:mm:ss");for(m=0;m<b.content.yearObject.time.length;m++)h[m]=new Date(b.content.yearObject.time[m]),k[m]=h[m].getTime(),k[m]-=1e3*60*(new Date).getTimezoneOffset(),k[m]=new Date(k[m]).Format("yyyy-MM-dd hh:mm:ss");if(dataBase.transaction(function(a){var d,e,f,g,h,l,m,n;for(d=0;d<b.content.time.length;d++)e="INSERT INTO sensorDataTable(device_guid,time,Carbon_Dioxide_original,Carbon_Dioxide,Substrate_PH_original,Substrate_PH,Substrate_Conductivity_original,Substrate_Conductivity,Substrate_Temperature_original,Substrate_Temperature,Air_Temperature_original,Air_Temperature,Ppfd_original,Ppfd,Liquid_PH_original,Liquid_PH,Substrate_Humidity_original,Substrate_Humidity,Liquid_DOC_original,Liquid_DOC,Liquid_Conductivity_original,Liquid_Conductivity,Air_Humidity_original,Air_Humidity,Substrate_DOC_original,Substrate_DOC,Illuminance_original,Illuminance,Lai_original,Lai) values ('"+$scope.device_guid+"','"+c[d]+"','"+b.content.data[0].original_data[d]+"','"+b.content.data[0].data[d]+"'"+",'"+b.content.data[1].original_data[d]+"','"+b.content.data[1].data[d]+"','"+b.content.data[2].original_data[d]+"','"+b.content.data[2].data[d]+"','"+b.content.data[3].original_data[d]+"','"+b.content.data[3].data[d]+"'"+",'"+b.content.data[4].original_data[d]+"','"+b.content.data[4].data[d]+"','"+b.content.data[5].original_data[d]+"','"+b.content.data[5].data[d]+"','"+b.content.data[6].original_data[d]+"','"+b.content.data[6].data[d]+"'"+",'"+b.content.data[7].original_data[d]+"','"+b.content.data[7].data[d]+"','"+b.content.data[8].original_data[d]+"','"+b.content.data[8].data[d]+"','"+b.content.data[9].original_data[d]+"','"+b.content.data[9].data[d]+"'"+",'"+b.content.data[10].original_data[d]+"','"+b.content.data[10].data[d]+"','"+b.content.data[11].original_data[d]+"','"+b.content.data[11].data[d]+"','"+b.content.data[12].original_data[d]+"','"+b.content.data[12].data[d]+"'"+",'"+b.content.data[13].original_data[d]+"','"+b.content.data[13].data[d]+"')",a.executeSql(e);for(f=0;f<b.content.quarterObject.time.length;f++)g="INSERT INTO sensorQuarterDataTable(device_guid,time,Carbon_Dioxide_original,Carbon_Dioxide,Substrate_PH_original,Substrate_PH,Substrate_Conductivity_original,Substrate_Conductivity,Substrate_Temperature_original,Substrate_Temperature,Air_Temperature_original,Air_Temperature,Ppfd_original,Ppfd,Liquid_PH_original,Liquid_PH,Substrate_Humidity_original,Substrate_Humidity,Liquid_DOC_original,Liquid_DOC,Liquid_Conductivity_original,Liquid_Conductivity,Air_Humidity_original,Air_Humidity,Substrate_DOC_original,Substrate_DOC,Illuminance_original,Illuminance,Lai_original,Lai) values ('"+$scope.device_guid+"','"+i[f]+"','"+b.content.quarterObject.data[0].original_data[f]+"','"+b.content.quarterObject.data[0].data[f]+"'"+",'"+b.content.quarterObject.data[1].original_data[f]+"','"+b.content.quarterObject.data[1].data[f]+"','"+b.content.quarterObject.data[2].original_data[f]+"','"+b.content.quarterObject.data[2].data[f]+"','"+b.content.quarterObject.data[3].original_data[f]+"','"+b.content.quarterObject.data[3].data[f]+"'"+",'"+b.content.quarterObject.data[4].original_data[f]+"','"+b.content.quarterObject.data[4].data[f]+"','"+b.content.quarterObject.data[5].original_data[f]+"','"+b.content.quarterObject.data[5].data[f]+"','"+b.content.quarterObject.data[6].original_data[f]+"','"+b.content.quarterObject.data[6].data[f]+"'"+",'"+b.content.quarterObject.data[7].original_data[f]+"','"+b.content.quarterObject.data[7].data[f]+"','"+b.content.quarterObject.data[8].original_data[f]+"','"+b.content.quarterObject.data[8].data[f]+"','"+b.content.quarterObject.data[9].original_data[f]+"','"+b.content.quarterObject.data[9].data[f]+"'"+",'"+b.content.quarterObject.data[10].original_data[f]+"','"+b.content.quarterObject.data[10].data[f]+"','"+b.content.quarterObject.data[11].original_data[f]+"','"+b.content.quarterObject.data[11].data[f]+"','"+b.content.quarterObject.data[12].original_data[f]+"','"+b.content.quarterObject.data[12].data[f]+"'"+",'"+b.content.quarterObject.data[13].original_data[f]+"','"+b.content.quarterObject.data[13].data[f]+"')",a.executeSql(g);for(h=0;h<b.content.quarterObject.time.length;h++)l="INSERT INTO sensorHalfYearDataTable(device_guid,time,Carbon_Dioxide_original,Carbon_Dioxide,Substrate_PH_original,Substrate_PH,Substrate_Conductivity_original,Substrate_Conductivity,Substrate_Temperature_original,Substrate_Temperature,Air_Temperature_original,Air_Temperature,Ppfd_original,Ppfd,Liquid_PH_original,Liquid_PH,Substrate_Humidity_original,Substrate_Humidity,Liquid_DOC_original,Liquid_DOC,Liquid_Conductivity_original,Liquid_Conductivity,Air_Humidity_original,Air_Humidity,Substrate_DOC_original,Substrate_DOC,Illuminance_original,Illuminance,Lai_original,Lai) values ('"+$scope.device_guid+"','"+j[h]+"','"+b.content.halfYearObject.data[0].original_data[h]+"','"+b.content.halfYearObject.data[0].data[h]+"'"+",'"+b.content.halfYearObject.data[1].original_data[h]+"','"+b.content.halfYearObject.data[1].data[h]+"','"+b.content.halfYearObject.data[2].original_data[h]+"','"+b.content.halfYearObject.data[2].data[h]+"','"+b.content.halfYearObject.data[3].original_data[h]+"','"+b.content.halfYearObject.data[3].data[h]+"'"+",'"+b.content.halfYearObject.data[4].original_data[h]+"','"+b.content.halfYearObject.data[4].data[h]+"','"+b.content.halfYearObject.data[5].original_data[h]+"','"+b.content.halfYearObject.data[5].data[h]+"','"+b.content.halfYearObject.data[6].original_data[h]+"','"+b.content.halfYearObject.data[6].data[h]+"'"+",'"+b.content.halfYearObject.data[7].original_data[h]+"','"+b.content.halfYearObject.data[7].data[h]+"','"+b.content.halfYearObject.data[8].original_data[h]+"','"+b.content.halfYearObject.data[8].data[h]+"','"+b.content.halfYearObject.data[9].original_data[h]+"','"+b.content.halfYearObject.data[9].data[h]+"'"+",'"+b.content.halfYearObject.data[10].original_data[h]+"','"+b.content.halfYearObject.data[10].data[h]+"','"+b.content.halfYearObject.data[11].original_data[h]+"','"+b.content.halfYearObject.data[11].data[h]+"','"+b.content.halfYearObject.data[12].original_data[h]+"','"+b.content.halfYearObject.data[12].data[h]+"'"+",'"+b.content.halfYearObject.data[13].original_data[h]+"','"+b.content.halfYearObject.data[13].data[h]+"')",a.executeSql(l);for(m=0;m<b.content.yearObject.time.length;m++)n="INSERT INTO sensorYearDataTable(device_guid,time,Carbon_Dioxide_original,Carbon_Dioxide,Substrate_PH_original,Substrate_PH,Substrate_Conductivity_original,Substrate_Conductivity,Substrate_Temperature_original,Substrate_Temperature,Air_Temperature_original,Air_Temperature,Ppfd_original,Ppfd,Liquid_PH_original,Liquid_PH,Substrate_Humidity_original,Substrate_Humidity,Liquid_DOC_original,Liquid_DOC,Liquid_Conductivity_original,Liquid_Conductivity,Air_Humidity_original,Air_Humidity,Substrate_DOC_original,Substrate_DOC,Illuminance_original,Illuminance,Lai_original,Lai) values ('"+$scope.device_guid+"','"+k[m]+"','"+b.content.yearObject.data[0].original_data[m]+"','"+b.content.yearObject.data[0].data[m]+"'"+",'"+b.content.yearObject.data[1].original_data[m]+"','"+b.content.yearObject.data[1].data[m]+"','"+b.content.yearObject.data[2].original_data[m]+"','"+b.content.yearObject.data[2].data[m]+"','"+b.content.yearObject.data[3].original_data[m]+"','"+b.content.yearObject.data[3].data[m]+"'"+",'"+b.content.yearObject.data[4].original_data[m]+"','"+b.content.yearObject.data[4].data[m]+"','"+b.content.yearObject.data[5].original_data[m]+"','"+b.content.yearObject.data[5].data[m]+"','"+b.content.yearObject.data[6].original_data[m]+"','"+b.content.yearObject.data[6].data[m]+"'"+",'"+b.content.yearObject.data[7].original_data[m]+"','"+b.content.yearObject.data[7].data[m]+"','"+b.content.yearObject.data[8].original_data[m]+"','"+b.content.yearObject.data[8].data[m]+"','"+b.content.yearObject.data[9].original_data[m]+"','"+b.content.yearObject.data[9].data[m]+"'"+",'"+b.content.yearObject.data[10].original_data[m]+"','"+b.content.yearObject.data[10].data[m]+"','"+b.content.yearObject.data[11].original_data[m]+"','"+b.content.yearObject.data[11].data[m]+"','"+b.content.yearObject.data[12].original_data[m]+"','"+b.content.yearObject.data[12].data[m]+"'"+",'"+b.content.yearObject.data[13].original_data[m]+"','"+b.content.yearObject.data[13].data[m]+"')",a.executeSql(n)}),a+1!=noDataDateDates.length)return $timeout(function(){e(a+1)},1500);a+1==noDataDateDates.length&&(toaster.pop({type:"success",title:"Success",body:"Download successfully , please waiting...",timeout:POPTIMEOUT}),n={},dataBase.transaction(function(a){var b="SELECT * FROM sensorYearDataTable WHERE time BETWEEN'"+$scope.default_startTime+"' AND '"+$scope.default_endTime+"' AND device_guid = '"+$scope.device_guid+"' ORDER BY time";a.executeSql(b,[],function(a,b){var V,c=[],d=[],e={original_name:"Carbon_Dioxide(ppm)",name:"Carbon_Dioxide(ppm)"},f=[],g=[],h={original_name:"Substrate_PH(PH)",name:"Substrate_PH(PH)"},i=[],j=[],k={original_name:"Substrate_Conductivity(mS/cm)",name:"Substrate_Conductivity(mS/cm)"},l=[],m=[],o={original_name:"Substrate_Temperature(°C)",name:"Substrate_Temperature(°C)"},p=[],q=[],r={original_name:"Air_Temperature(°C)",name:"Air_Temperature(°C)"},s=[],t=[],u={original_name:"Ppfd(μmol㎡/s)",name:"Ppfd(100*μmol㎡/s)"},v=[],w=[],x={original_name:"Liquid_PH(PH)",name:"Liquid_PH(PH)"},y=[],z=[],A={original_name:"Substrate_Humidity(%)",name:"Substrate_Humidity(%)"},B=[],C=[],D={original_name:"Liquid_DOC(mg/l)",name:"Liquid_DOC(mg/l)"},E=[],F=[],G={original_name:"Liquid_Conductivity(mS/cm)",name:"Liquid_Conductivity(mS/cm)"},H=[],I=[],J={original_name:"Air_Humidity(%)",name:"Air_Humidity(%)"},K=[],L=[],M={original_name:"Substrate_DOC(mg/l)",name:"Substrate_DOC(mg/l)"},N=[],O=[],P={original_name:"Illuminance(lux)",name:"Illuminance(100*lux)"},Q=[],R=[],S={original_name:"Lai()",name:"Lai()"},T=[],U=[];if(b)for(V=0;V<b.rows.length;V++)c.push(b.rows[V].time),f.push(parseFloat(b.rows[V].Carbon_Dioxide_original)),g.push(parseFloat(b.rows[V].Carbon_Dioxide)),i.push(parseFloat(b.rows[V].Substrate_PH_original)),j.push(parseFloat(b.rows[V].Substrate_PH)),l.push(parseFloat(b.rows[V].Substrate_Conductivity_original)),m.push(parseFloat(b.rows[V].Substrate_Conductivity)),p.push(parseFloat(b.rows[V].Substrate_Temperature_original)),q.push(parseFloat(b.rows[V].Substrate_Temperature)),s.push(parseFloat(b.rows[V].Air_Temperature_original)),t.push(parseFloat(b.rows[V].Air_Temperature)),v.push(parseFloat(b.rows[V].Ppfd_original)),w.push(parseFloat(b.rows[V].Ppfd)),y.push(parseFloat(b.rows[V].Liquid_PH_original)),z.push(parseFloat(b.rows[V].Liquid_PH)),B.push(parseFloat(b.rows[V].Substrate_Humidity_original)),C.push(parseFloat(b.rows[V].Substrate_Humidity)),E.push(parseFloat(b.rows[V].Liquid_DOC_original)),F.push(parseFloat(b.rows[V].Liquid_DOC)),H.push(parseFloat(b.rows[V].Liquid_Conductivity_original)),I.push(parseFloat(b.rows[V].Liquid_Conductivity)),K.push(parseFloat(b.rows[V].Air_Humidity_original)),L.push(parseFloat(b.rows[V].Air_Humidity)),N.push(parseFloat(b.rows[V].Substrate_DOC_original)),O.push(parseFloat(b.rows[V].Substrate_DOC)),Q.push(parseFloat(b.rows[V].Illuminance_original)),R.push(parseFloat(b.rows[V].Illuminance)),T.push(parseFloat(b.rows[V].Lai_original)),U.push(parseFloat(b.rows[V].Lai));e.original_data=f,e.data=g,h.original_data=i,h.data=j,k.original_data=l,k.data=m,o.original_data=p,o.data=q,r.original_data=s,r.data=t,u.original_data=v,u.data=w,x.original_data=y,x.data=z,A.original_data=B,A.data=C,D.original_data=E,D.data=F,G.original_data=H,G.data=I,J.original_data=K,J.data=L,M.original_data=N,M.data=O,P.original_data=Q,P.data=R,S.original_data=T,S.data=U,d.push(r),d.push(J),d.push(o),d.push(A),d.push(h),d.push(e),d.push(P),d.push(k),d.push(u),d.push(x),d.push(S),d.push(G),d.push(D),d.push(M),n.data=d,n.time=c,new Highcharts.Chart({chart:{renderTo:"container",backgroundColor:"rgba(0,0,0,0)"},colors:["#000000","#CE0000","#FF79BC","#921AFF","#7D7DFF","#00CACA","#93FF93","#FF8040","#A8FF24","#AD5A5A","#8080C0","#A5A552","#424200","#642100"],title:{text:"Sensor History Data",x:-20},exporting:{enabled:!1,filename:"horticulture growing condition datasheet"},subtitle:{text:"Source Region: "+regionName,x:-20},marker:!1,noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",borderRadius:10,pointFormat:'<tr><td>{series.name}: </td><td style="text-align: right"><b>{point.y}</b></td></tr>',valueDecimals:3},legend:{align:"center",verticalAlign:"bottom"},series:n.data}),$scope.downLoad=function(){window.open("http://73.231.41.102:8080/sensor/history/export?user_id="+$cookieStore.get("user_id")+"&region_guid="+regionId+"&gateway_id="+gatewayId+"&start_time="+encodeURI(UTC_startTime)+"&end_time="+encodeURI(UTC_endTime))},$scope.toChartDetail=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,o;n.data||0!=n.data.length?($scope.chartDetailShow=!$scope.chartDetailShow,$scope.lastNextShow=!$scope.lastNextShow,$scope.chartShow=!$scope.chartShow,a=new Highcharts.Chart({chart:{renderTo:"chart_container"},title:{text:n.data[0].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[0].original_name+" condition datasheet"},colors:["#000000"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[0].original_name,data:n.data[0].original_data}]}),$scope.ExportChartDetailToExcel=function(){a.downloadXLS()},b=new Highcharts.Chart({chart:{renderTo:"chart_container1"},title:{text:n.data[1].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[1].original_name+" condition datasheet"},colors:["#CE0000"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[1].original_name,data:n.data[1].original_data}]}),$scope.ExportChartDetailToExcel1=function(){b.downloadXLS()},c=new Highcharts.Chart({chart:{renderTo:"chart_container2"},title:{text:n.data[2].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[2].original_name+" condition datasheet"},colors:["#FF79BC"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[2].original_name,data:n.data[2].original_data}]}),$scope.ExportChartDetailToExcel2=function(){c.downloadXLS()},d=new Highcharts.Chart({chart:{renderTo:"chart_container3"},title:{text:n.data[3].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[3].original_name+" condition datasheet"},colors:["#921AFF"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[3].original_name,data:n.data[3].original_data}]}),$scope.ExportChartDetailToExcel3=function(){d.downloadXLS()},e=new Highcharts.Chart({chart:{renderTo:"chart_container4"},title:{text:n.data[4].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[4].original_name+" condition datasheet"},colors:["#7D7DFF"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[4].original_name,data:n.data[4].original_data}]}),$scope.ExportChartDetailToExcel4=function(){e.downloadXLS()},f=new Highcharts.Chart({chart:{renderTo:"chart_container5"},title:{text:n.data[5].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[5].original_name+" condition datasheet"},colors:["#00CACA"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[5].original_name,data:n.data[5].original_data}]}),$scope.ExportChartDetailToExcel5=function(){f.downloadXLS()},g=new Highcharts.Chart({chart:{renderTo:"chart_container6"},title:{text:n.data[6].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[6].original_name+" condition datasheet"},colors:["#93FF93"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[6].original_name,data:n.data[6].original_data}]}),$scope.ExportChartDetailToExcel6=function(){g.downloadXLS()},h=new Highcharts.Chart({chart:{renderTo:"chart_container7"},title:{text:n.data[7].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[7].original_name+" condition datasheet"},colors:["#FF8040"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[7].original_name,data:n.data[7].original_data}]}),$scope.ExportChartDetailToExcel7=function(){h.downloadXLS()},i=new Highcharts.Chart({chart:{renderTo:"chart_container8"},title:{text:n.data[8].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[8].original_name+" condition datasheet"},colors:["#A8FF24"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[8].original_name,data:n.data[8].original_data}]}),$scope.ExportChartDetailToExcel8=function(){i.downloadXLS()},j=new Highcharts.Chart({chart:{renderTo:"chart_container9"},title:{text:n.data[9].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[9].original_name+" condition datasheet"},colors:["#AD5A5A"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[9].original_name,data:n.data[9].original_data}]}),$scope.ExportChartDetailToExcel9=function(){j.downloadXLS()},k=new Highcharts.Chart({chart:{renderTo:"chart_container10"},title:{text:n.data[10].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[10].original_name+" condition datasheet"},colors:["#8080C0"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[10].original_name,data:n.data[10].original_data}]}),$scope.ExportChartDetailToExcel10=function(){k.downloadXLS()},l=new Highcharts.Chart({chart:{renderTo:"chart_container11"},title:{text:n.data[11].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[11].original_name+" condition datasheet"},colors:["#A5A552"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[11].original_name,data:n.data[11].original_data}]}),$scope.ExportChartDetailToExcel11=function(){l.downloadXLS()},m=new Highcharts.Chart({chart:{renderTo:"chart_container12"},title:{text:n.data[12].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[12].original_name+" condition datasheet"},colors:["#424200"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[12].original_name,data:n.data[12].original_data}]}),$scope.ExportChartDetailToExcel12=function(){m.downloadXLS()},o=new Highcharts.Chart({chart:{renderTo:"chart_container13"},title:{text:n.data[13].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:n.data[13].original_name+" condition datasheet"},colors:["#642100"],noData:{position:{},attr:{},style:{}},xAxis:{categories:n.time,tickInterval:n.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:n.data[13].original_name,data:n.data[13].original_data}]}),$scope.ExportChartDetailToExcel13=function(){o.downloadXLS()}):toaster.pop({type:"error",title:"Error",body:"There is no data to display",timeout:POPTIMEOUT})}})}))}else toaster.pop({type:"error",title:"Error",body:b.message,timeout:POPTIMEOUT})})}var d,f;return 0==c.rows.length&&noDataDateDates.push(sqls[a].substring(55,67)),a+1!=newDate.length?$timeout(function(){selectFromTable(a+1)},1):(noDataDateDates&&noDataDateDates.length>0?($scope.delay=0,$scope.minDuration=0,$scope.message="0",$scope.backdrop=!1,$scope.promise=null,$scope.templateUrl="./pages/down-loading-template.html",$scope.vm={},$scope.vm.total=noDataDateDates.length,d=0,e(d)):noDataDateDates&&0!=noDataDateDates.length||(f={},dataBase.transaction(function(a){var b="SELECT * FROM sensorYearDataTable WHERE time BETWEEN'"+$scope.default_startTime+"' AND '"+$scope.default_endTime+"' AND device_guid = '"+$scope.device_guid+"' ORDER BY time";a.executeSql(b,[],function(a,b){var V,c=[],d=[],e={original_name:"Carbon_Dioxide(ppm)",name:"Carbon_Dioxide(ppm)"},g=[],h=[],i={original_name:"Substrate_PH(PH)",name:"Substrate_PH(PH)"},j=[],k=[],l={original_name:"Substrate_Conductivity(mS/cm)",name:"Substrate_Conductivity(mS/cm)"},m=[],n=[],o={original_name:"Substrate_Temperature(°C)",name:"Substrate_Temperature(°C)"},p=[],q=[],r={original_name:"Air_Temperature(°C)",name:"Air_Temperature(°C)"},s=[],t=[],u={original_name:"Ppfd(μmol㎡/s)",name:"Ppfd(100*μmol㎡/s)"},v=[],w=[],x={original_name:"Liquid_PH(PH)",name:"Liquid_PH(PH)"},y=[],z=[],A={original_name:"Substrate_Humidity(%)",name:"Substrate_Humidity(%)"},B=[],C=[],D={original_name:"Liquid_DOC(mg/l)",name:"Liquid_DOC(mg/l)"},E=[],F=[],G={original_name:"Liquid_Conductivity(mS/cm)",name:"Liquid_Conductivity(mS/cm)"},H=[],I=[],J={original_name:"Air_Humidity(%)",name:"Air_Humidity(%)"},K=[],L=[],M={original_name:"Substrate_DOC(mg/l)",name:"Substrate_DOC(mg/l)"},N=[],O=[],P={original_name:"Illuminance(lux)",name:"Illuminance(100*lux)"},Q=[],R=[],S={original_name:"Lai()",name:"Lai()"},T=[],U=[];if(b)for(V=0;V<b.rows.length;V++)c.push(b.rows[V].time),g.push(parseFloat(b.rows[V].Carbon_Dioxide_original)),h.push(parseFloat(b.rows[V].Carbon_Dioxide)),j.push(parseFloat(b.rows[V].Substrate_PH_original)),k.push(parseFloat(b.rows[V].Substrate_PH)),m.push(parseFloat(b.rows[V].Substrate_Conductivity_original)),n.push(parseFloat(b.rows[V].Substrate_Conductivity)),p.push(parseFloat(b.rows[V].Substrate_Temperature_original)),q.push(parseFloat(b.rows[V].Substrate_Temperature)),s.push(parseFloat(b.rows[V].Air_Temperature_original)),t.push(parseFloat(b.rows[V].Air_Temperature)),v.push(parseFloat(b.rows[V].Ppfd_original)),w.push(parseFloat(b.rows[V].Ppfd)),y.push(parseFloat(b.rows[V].Liquid_PH_original)),z.push(parseFloat(b.rows[V].Liquid_PH)),B.push(parseFloat(b.rows[V].Substrate_Humidity_original)),C.push(parseFloat(b.rows[V].Substrate_Humidity)),E.push(parseFloat(b.rows[V].Liquid_DOC_original)),F.push(parseFloat(b.rows[V].Liquid_DOC)),H.push(parseFloat(b.rows[V].Liquid_Conductivity_original)),I.push(parseFloat(b.rows[V].Liquid_Conductivity)),K.push(parseFloat(b.rows[V].Air_Humidity_original)),L.push(parseFloat(b.rows[V].Air_Humidity)),N.push(parseFloat(b.rows[V].Substrate_DOC_original)),O.push(parseFloat(b.rows[V].Substrate_DOC)),Q.push(parseFloat(b.rows[V].Illuminance_original)),R.push(parseFloat(b.rows[V].Illuminance)),T.push(parseFloat(b.rows[V].Lai_original)),U.push(parseFloat(b.rows[V].Lai));e.original_data=g,e.data=h,i.original_data=j,i.data=k,l.original_data=m,l.data=n,o.original_data=p,o.data=q,r.original_data=s,r.data=t,u.original_data=v,u.data=w,x.original_data=y,x.data=z,A.original_data=B,A.data=C,D.original_data=E,D.data=F,G.original_data=H,G.data=I,J.original_data=K,J.data=L,M.original_data=N,M.data=O,P.original_data=Q,P.data=R,S.original_data=T,S.data=U,d.push(r),d.push(J),d.push(o),d.push(A),d.push(i),d.push(e),d.push(P),d.push(l),d.push(u),d.push(x),d.push(S),d.push(G),d.push(D),d.push(M),f.data=d,f.time=c,new Highcharts.Chart({chart:{renderTo:"container",backgroundColor:"rgba(0,0,0,0)"},colors:["#000000","#CE0000","#FF79BC","#921AFF","#7D7DFF","#00CACA","#93FF93","#FF8040","#A8FF24","#AD5A5A","#8080C0","#A5A552","#424200","#642100"],title:{text:"Sensor History Data",x:-20},exporting:{enabled:!1,filename:"horticulture growing condition datasheet"},subtitle:{text:"Source Region: "+regionName,x:-20},marker:!1,noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",borderRadius:10,pointFormat:'<tr><td>{series.name}: </td><td style="text-align: right"><b>{point.y}</b></td></tr>',valueDecimals:3},legend:{align:"center",verticalAlign:"bottom"},series:f.data}),$scope.downLoad=function(){window.open("http://73.231.41.102:8080/sensor/history/export?user_id="+$cookieStore.get("user_id")+"&region_guid="+regionId+"&gateway_id="+gatewayId+"&start_time="+encodeURI(UTC_startTime)+"&end_time="+encodeURI(UTC_endTime))},$scope.toChartDetail=function(){var a,b,c,d,e,g,h,i,j,k,l,m,n,o;f.data||0!=f.data.length?($scope.chartDetailShow=!$scope.chartDetailShow,$scope.lastNextShow=!$scope.lastNextShow,$scope.chartShow=!$scope.chartShow,a=new Highcharts.Chart({chart:{renderTo:"chart_container"},title:{text:f.data[0].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[0].original_name+" condition datasheet"},colors:["#000000"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[0].original_name,data:f.data[0].original_data}]}),$scope.ExportChartDetailToExcel=function(){a.downloadXLS()},b=new Highcharts.Chart({chart:{renderTo:"chart_container1"},title:{text:f.data[1].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[1].original_name+" condition datasheet"},colors:["#CE0000"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[1].original_name,data:f.data[1].original_data}]}),$scope.ExportChartDetailToExcel1=function(){b.downloadXLS()},c=new Highcharts.Chart({chart:{renderTo:"chart_container2"},title:{text:f.data[2].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[2].original_name+" condition datasheet"},colors:["#FF79BC"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[2].original_name,data:f.data[2].original_data}]}),$scope.ExportChartDetailToExcel2=function(){c.downloadXLS()},d=new Highcharts.Chart({chart:{renderTo:"chart_container3"},title:{text:f.data[3].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[3].original_name+" condition datasheet"},colors:["#921AFF"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[3].original_name,data:f.data[3].original_data}]}),$scope.ExportChartDetailToExcel3=function(){d.downloadXLS()},e=new Highcharts.Chart({chart:{renderTo:"chart_container4"},title:{text:f.data[4].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[4].original_name+" condition datasheet"},colors:["#7D7DFF"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[4].original_name,data:f.data[4].original_data}]}),$scope.ExportChartDetailToExcel4=function(){e.downloadXLS()},g=new Highcharts.Chart({chart:{renderTo:"chart_container5"},title:{text:f.data[5].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[5].original_name+" condition datasheet"},colors:["#00CACA"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[5].original_name,data:f.data[5].original_data}]}),$scope.ExportChartDetailToExcel5=function(){g.downloadXLS()},h=new Highcharts.Chart({chart:{renderTo:"chart_container6"},title:{text:f.data[6].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[6].original_name+" condition datasheet"},colors:["#93FF93"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[6].original_name,data:f.data[6].original_data}]}),$scope.ExportChartDetailToExcel6=function(){h.downloadXLS()},i=new Highcharts.Chart({chart:{renderTo:"chart_container7"},title:{text:f.data[7].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[7].original_name+" condition datasheet"},colors:["#FF8040"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[7].original_name,data:f.data[7].original_data}]}),$scope.ExportChartDetailToExcel7=function(){i.downloadXLS()},j=new Highcharts.Chart({chart:{renderTo:"chart_container8"},title:{text:f.data[8].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[8].original_name+" condition datasheet"},colors:["#A8FF24"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[8].original_name,data:f.data[8].original_data}]}),$scope.ExportChartDetailToExcel8=function(){j.downloadXLS()
                    },k=new Highcharts.Chart({chart:{renderTo:"chart_container9"},title:{text:f.data[9].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[9].original_name+" condition datasheet"},colors:["#AD5A5A"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[9].original_name,data:f.data[9].original_data}]}),$scope.ExportChartDetailToExcel9=function(){k.downloadXLS()},l=new Highcharts.Chart({chart:{renderTo:"chart_container10"},title:{text:f.data[10].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[10].original_name+" condition datasheet"},colors:["#8080C0"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[10].original_name,data:f.data[10].original_data}]}),$scope.ExportChartDetailToExcel10=function(){l.downloadXLS()},m=new Highcharts.Chart({chart:{renderTo:"chart_container11"},title:{text:f.data[11].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[11].original_name+" condition datasheet"},colors:["#A5A552"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[11].original_name,data:f.data[11].original_data}]}),$scope.ExportChartDetailToExcel11=function(){m.downloadXLS()},n=new Highcharts.Chart({chart:{renderTo:"chart_container12"},title:{text:f.data[12].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[12].original_name+" condition datasheet"},colors:["#424200"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[12].original_name,data:f.data[12].original_data}]}),$scope.ExportChartDetailToExcel12=function(){n.downloadXLS()},o=new Highcharts.Chart({chart:{renderTo:"chart_container13"},title:{text:f.data[13].original_name+" History Data",x:-20},exporting:{enabled:!1,filename:f.data[13].original_name+" condition datasheet"},colors:["#642100"],noData:{position:{},attr:{},style:{}},xAxis:{categories:f.time,tickInterval:f.time.length-1},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"",valueDecimals:3},series:[{name:f.data[13].original_name,data:f.data[13].original_data}]}),$scope.ExportChartDetailToExcel13=function(){o.downloadXLS()}):toaster.pop({type:"error",title:"Error",body:"There is no data to display",timeout:POPTIMEOUT})}})})),void 0)})})}var time1,time2,dayDiff,newDate,i,sqls,y,noDataDateDates,x;for(toaster.pop({type:"success",title:"",body:"Please waiting ...",timeout:POPTIMEOUT}),$scope.default_startTime=new Date(new Date($scope.default_endTime).getTime()).Format("yyyy-MM-dd hh:mm:ss"),$scope.default_endTime=new Date(new Date($scope.default_endTime).getTime()+1e3*60*60*$scope.my.timeDiff).Format("yyyy-MM-dd hh:mm:ss"),UTC_startTime=$scope.format($scope.default_startTime.toUTCString(),"yyyy-MM-dd HH:mm:ss"),UTC_endTime=$scope.format($scope.default_endTime.toUTCString(),"yyyy-MM-dd HH:mm:ss"),time1=$scope.default_startTime.substring(0,10),time2=$scope.default_endTime.substring(0,10),dayDiff=DateDiff(time1,time2)+1,newDate=[],i=0;dayDiff>i;i++)newDate[i]=getNewDay(time1,i);for(sqls=[],y=0;y<newDate.length;y++)sqls[y]="SELECT * FROM sensorYearDataTable WHERE time BETWEEN '"+newDate[y]+" 00:00:00"+"' AND '"+newDate[y]+" 23:59:59"+"' AND device_guid = '"+$scope.device_guid+"'";noDataDateDates=[],x=0,selectFromTable(x);
                }
            }
        };
    }
    $scope.closeChartDetail = function () {$scope.chartDetailShow = !$scope.chartDetailShow;$scope.chartShow = !$scope.chartShow;};
})

